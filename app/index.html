<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ad Instal Gaz SRL - Management Business</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🔥</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f3f4f6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #ffffff 0%, #f0f4f8 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid rgba(255,255,255,0.3);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .logo svg {
            width: 32px;
            height: 32px;
        }

        .header-text h1 {
            font-size: 1.5rem;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .header-text p {
            font-size: 0.9rem;
            color: #e2e8f0;
            font-weight: 500;
        }

        .header-date {
            text-align: right;
        }

        .header-date p:first-child {
            font-size: 0.9rem;
            color: #e2e8f0;
        }

        .header-date p:last-child {
            font-weight: 600;
        }

        /* Navigation */
        .nav {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 1rem 0;
        }

        .nav-container {
            display: flex;
            gap: 0.5rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
        }

        .nav-button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            border: none;
            background: #f3f4f6;
            color: #374151;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .nav-button:hover {
            background: #e5e7eb;
        }

        .nav-button.active {
            background: #2563eb;
            color: white;
        }

        .nav-button .icon {
            width: 18px;
            height: 18px;
        }

        /* Main Content */
        .main {
            padding: 2rem 0;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid #e5e7eb;
        }

        .card-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .card-content {
            padding: 1.5rem;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #111827;
            margin-bottom: 0.5rem;
        }

        /* Dashboard */
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .dashboard-title {
            font-size: 2rem;
            font-weight: bold;
            color: #111827;
        }

        .last-update {
            font-size: 0.875rem;
            color: #6b7280;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid #e5e7eb;
        }

        .stat-card.special {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            color: white;
        }

        .stat-header {
            display: flex;
            justify-content: between;
            align-items: center;
        }

        .stat-content {
            flex: 1;
        }

        .stat-label {
            font-size: 0.875rem;
            color: #6b7280;
            margin-bottom: 0.25rem;
        }

        .stat-card.special .stat-label {
            color: #bfdbfe;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #111827;
        }

        .stat-card.special .stat-value {
            color: white;
        }

        .stat-subtext {
            font-size: 0.75rem;
            color: #bfdbfe;
            margin-top: 0.25rem;
        }

        .stat-icon {
            width: 24px;
            height: 24px;
            margin-left: 1rem;
        }

        /* Forms */
        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            margin-bottom: 0.5rem;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 0.875rem;
            color: #111827;
            background: white;
            transition: border-color 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 0.875rem;
            color: #111827;
            background: white;
            cursor: pointer;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary {
            background: #3b82f6;
            color: white;
        }

        .btn-primary:hover {
            background: #2563eb;
        }

        .btn-success {
            background: #10b981;
            color: white;
        }

        .btn-success:hover {
            background: #059669;
        }

        .btn-secondary {
            background: #6b7280;
            color: white;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #111827;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #6b7280;
            cursor: pointer;
            padding: 0.25rem;
        }

        .modal-close:hover {
            color: #374151;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            padding: 1.5rem;
            border-top: 1px solid #e5e7eb;
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        /* Lists */
        .list-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-bottom: 1px solid #f3f4f6;
        }

        .list-item:last-child {
            border-bottom: none;
        }

        .avatar {
            width: 40px;
            height: 40px;
            background: #dbeafe;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #1d4ed8;
        }

        .list-content {
            flex: 1;
        }

        .list-title {
            font-weight: 500;
            color: #111827;
            margin-bottom: 0.25rem;
        }

        .list-subtitle {
            font-size: 0.875rem;
            color: #6b7280;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .dashboard-header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .modal-content {
                margin: 1rem;
            }
        }

        /* Utility Classes */
        .hidden { display: none !important; }
        .text-center { text-align: center; }
        .text-sm { font-size: 0.875rem; }
        .text-xs { font-size: 0.75rem; }
        .font-medium { font-weight: 500; }
        .font-bold { font-weight: bold; }
        .mb-4 { margin-bottom: 1rem; }
        .mt-4 { margin-top: 1rem; }
        .gap-4 { gap: 1rem; }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo-container">
                    <div class="logo">
                        <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <path d="M50 15 C60 25, 65 35, 65 45 C65 55, 60 65, 50 65 C40 65, 35 55, 35 45 C35 35, 40 25, 50 15 Z" fill="url(#flameGradient)"/>
                            <rect x="20" y="70" width="60" height="8" rx="4" fill="#2a5298"/>
                            <rect x="15" y="78" width="70" height="6" rx="3" fill="#1e3c72"/>
                            <path d="M25 50 L35 50 L35 45 L40 45 L40 55 L35 55 L35 50 L30 50 L30 60 L25 60 Z" fill="#ff6b35"/>
                            <defs>
                                <linearGradient id="flameGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#ff6b35;stop-opacity:1" />
                                    <stop offset="50%" style="stop-color:#ff8c42;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#ffa726;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                        </svg>
                    </div>
                    <div class="header-text">
                        <h1>Ad Instal Gaz SRL</h1>
                        <p>Management Business</p>
                    </div>
                </div>
                <div class="header-date">
                    <p>Astăzi</p>
                    <p id="current-date"></p>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav">
        <div class="container">
            <div class="nav-container">
                <button class="nav-button active" onclick="showSection('dashboard')" id="nav-dashboard">
                    <span class="icon">📊</span>
                    Dashboard
                </button>
                <button class="nav-button" onclick="showSection('clients')" id="nav-clients">
                    <span class="icon">👥</span>
                    Clienți
                </button>
                <button class="nav-button" onclick="showSection('appointments')" id="nav-appointments">
                    <span class="icon">📅</span>
                    Programări
                </button>
                <button class="nav-button" onclick="showSection('reminders')" id="nav-reminders">
                    <span class="icon">🔔</span>
                    Reminder-e
                </button>
                <button class="nav-button" onclick="showSection('reports')" id="nav-reports">
                    <span class="icon">📄</span>
                    Rapoarte
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            <!-- Dashboard Section -->
            <section id="dashboard" class="section active">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Dashboard</h2>
                    <div class="last-update">
                        Ultima actualizare: <span id="last-update-time"></span>
                    </div>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-content">
                                <div class="stat-label">Total Clienți</div>
                                <div class="stat-value" id="total-clients">0</div>
                            </div>
                            <div class="stat-icon">👥</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-content">
                                <div class="stat-label">Programări Luna</div>
                                <div class="stat-value" id="month-appointments">0</div>
                            </div>
                            <div class="stat-icon">📅</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-content">
                                <div class="stat-label">În Așteptare</div>
                                <div class="stat-value" id="pending-appointments">0</div>
                            </div>
                            <div class="stat-icon">⏳</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-content">
                                <div class="stat-label">Venituri Luna</div>
                                <div class="stat-value" id="month-revenue">0 RON</div>
                            </div>
                            <div class="stat-icon">💰</div>
                        </div>
                    </div>

                    <div class="stat-card special">
                        <div class="stat-header">
                            <div class="stat-content">
                                <div class="stat-label">Mâine</div>
                                <div class="stat-value" id="tomorrow-tasks">0</div>
                                <div class="stat-subtext">activități</div>
                            </div>
                            <div class="stat-icon">🔔</div>
                        </div>
                    </div>
                </div>

                <!-- Activity Cards -->
                <div class="stats-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Programări Recente</h3>
                        </div>
                        <div class="card-content">
                            <div id="recent-appointments">
                                <p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">
                                    Nu există programări încă
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Clienți Noi</h3>
                        </div>
                        <div class="card-content">
                            <div id="recent-clients">
                                <p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">
                                    Nu există clienți încă
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Clients Section -->
            <section id="clients" class="section">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Clienți (<span id="clients-count">0</span>)</h2>
                    <button class="btn btn-primary" onclick="showModal('addClientModal')">
                        <span>➕</span>
                        Adaugă Client
                    </button>
                </div>

                <!-- Search -->
                <div class="card mb-4">
                    <div class="card-content">
                        <input type="text" class="form-input" placeholder="Caută clienți..." 
                               onkeyup="searchClients(this.value)" id="client-search">
                    </div>
                </div>

                <!-- Clients List -->
                <div class="card">
                    <div class="card-content">
                        <div id="clients-list">
                            <p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">
                                Nu aveți clienți încă
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Appointments Section -->
            <section id="appointments" class="section">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Programări (<span id="appointments-count">0</span>)</h2>
                    <button class="btn btn-primary" onclick="showModal('addAppointmentModal')">
                        <span>➕</span>
                        Programare Nouă
                    </button>
                </div>

                <!-- Search -->
                <div class="card mb-4">
                    <div class="card-content">
                        <input type="text" class="form-input" placeholder="Caută programări..." 
                               onkeyup="searchAppointments(this.value)" id="appointment-search">
                    </div>
                </div>

                <!-- Appointments List -->
                <div class="card">
                    <div class="card-content">
                        <div id="appointments-list">
                            <p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">
                                Nu aveți programări încă
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Reminders Section -->
            <section id="reminders" class="section">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Reminder-e & Notificări</h2>
                    <button class="btn btn-success" onclick="showModal('addReminderModal')">
                        <span>➕</span>
                        Reminder Nou
                    </button>
                </div>

                <div class="stats-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">🔔 Reminder-e Active</h3>
                        </div>
                        <div class="card-content">
                            <div id="active-reminders">
                                <p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">
                                    Nu există reminder-e active
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">⚡ Reminder-e Automate</h3>
                        </div>
                        <div class="card-content">
                            <div style="background: #dbeafe; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                                <h4 style="color: #1e40af; font-weight: 600; margin-bottom: 0.5rem;">Verificări Instalații Gaz</h4>
                                <p style="color: #1e40af; font-size: 0.875rem;">
                                    Reminder automat pentru verificările periodice ale instalațiilor de gaze
                                </p>
                            </div>
                            <div style="background: #dcfce7; padding: 1rem; border-radius: 8px;">
                                <h4 style="color: #166534; font-weight: 600; margin-bottom: 0.5rem;">Verificări Centrale Termice</h4>
                                <p style="color: #166534; font-size: 0.875rem;">
                                    Notificare clienți pentru reviziile periodice ale centralelor termice
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Reports Section -->
            <section id="reports" class="section">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Rapoarte & Statistici</h2>
                    <button class="btn btn-success" onclick="exportData()">
                        <span>📥</span>
                        Export Date
                    </button>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">📊 Raport Lunar</h3>
                    </div>
                    <div class="card-content">
                        <div class="stats-grid">
                            <div class="text-center">
                                <div style="font-size: 2rem; font-weight: bold; color: #3b82f6;" id="report-appointments">0</div>
                                <div style="color: #6b7280;">Servicii Luna Aceasta</div>
                            </div>
                            <div class="text-center">
                                <div style="font-size: 2rem; font-weight: bold; color: #10b981;" id="report-completed">0</div>
                                <div style="color: #6b7280;">Servicii Finalizate</div>
                            </div>
                            <div class="text-center">
                                <div style="font-size: 2rem; font-weight: bold; color: #10b981;" id="report-revenue">0 RON</div>
                                <div style="color: #6b7280;">Venituri Luna</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Add Client Modal -->
    <div id="addClientModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Adaugă Client Nou</h3>
                <button class="modal-close" onclick="hideModal('addClientModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Nume Complet *</label>
                    <input type="text" class="form-input" id="client-name" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Telefon *</label>
                    <input type="tel" class="form-input" id="client-phone" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" id="client-email">
                </div>
                <div class="form-group">
                    <label class="form-label">Adresa *</label>
                    <textarea class="form-input form-textarea" id="client-address" required></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('addClientModal')">Anulează</button>
                <button class="btn btn-primary" onclick="addClient()">Salvează</button>
            </div>
        </div>
    </div>

    <!-- Add Appointment Modal -->
    <div id="addAppointmentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Programare Nouă</h3>
                <button class="modal-close" onclick="hideModal('addAppointmentModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Client *</label>
                    <select class="form-select" id="appointment-client-select" onchange="selectClient()" required>
                        <option value="">Selectează clientul</option>
                        <option value="new-client">+ Client Nou (introdu manual)</option>
                    </select>
                </div>
                <div class="form-group" id="manual-client-group" style="display: none;">
                    <label class="form-label">Nume Client *</label>
                    <input type="text" class="form-input" id="appointment-client-name">
                </div>
                <div class="form-group">
                    <label class="form-label">Telefon *</label>
                    <input type="tel" class="form-input" id="appointment-phone" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Serviciu *</label>
                    <select class="form-select" id="appointment-service" required>
                        <option value="">Selectează serviciul</option>
                        <option value="Verificări instalații gaz">Verificări instalații gaz</option>
                        <option value="Revizii instalații gaz">Revizii instalații gaz</option>
                        <option value="Verificări centrale termice">Verificări centrale termice</option>
                        <option value="Revizii centrale termice">Revizii centrale termice</option>
                        <option value="Verificare Tehnică Periodică">Verificare Tehnică Periodică</option>
                        <option value="Verificare la Racordare">Verificare la Racordare</option>
                        <option value="Instalații de Utilizare Gaz">Instalații de Utilizare Gaz</option>
                        <option value="Proiectare Branșamente">Proiectare Branșamente</option>
                        <option value="Execuție Branșamente">Execuție Branșamente</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Adresa *</label>
                    <input type="text" class="form-input" id="appointment-address" required>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label class="form-label">Data *</label>
                        <input type="date" class="form-input" id="appointment-date" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ora *</label>
                        <input type="time" class="form-input" id="appointment-time" required>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Preț (RON)</label>
                    <input type="number" class="form-input" id="appointment-price">
                </div>
                <div class="form-group">
                    <label class="form-label">Observații</label>
                    <textarea class="form-input form-textarea" id="appointment-notes"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('addAppointmentModal')">Anulează</button>
                <button class="btn btn-primary" onclick="addAppointment()">Salvează</button>
            </div>
        </div>
    </div>

    <!-- Add Reminder Modal -->
    <div id="addReminderModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Reminder Nou</h3>
                <button class="modal-close" onclick="hideModal('addReminderModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Client *</label>
                    <select class="form-select" id="reminder-client-select" onchange="selectReminderClient()" required>
                        <option value="">Selectează clientul</option>
                        <option value="new-client">+ Client Nou (introdu manual)</option>
                    </select>
                </div>
                <div class="form-group" id="manual-reminder-client-group" style="display: none;">
                    <label class="form-label">Nume Client *</label>
                    <input type="text" class="form-input" id="reminder-client-name">
                </div>
                <div class="form-group">
                    <label class="form-label">Telefon Client *</label>
                    <input type="tel" class="form-input" id="reminder-phone" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Tipul Reminder-ului *</label>
                    <select class="form-select" id="reminder-type" onchange="updateReminderMessage()" required>
                        <option value="">Selectează tipul</option>
                        <option value="verificare-instalatii-gaz">Verificări și Revizii Instalații Gaz</option>
                        <option value="verificare-centrale-termice">Verificări și Revizii Centrale Termice</option>
                        <option value="urmărire-factura">Urmărire Factură</option>
                        <option value="custom">Personalizat</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Data Reminder *</label>
                    <input type="date" class="form-input" id="reminder-date" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Mesajul pentru Client</label>
                    <textarea class="form-input form-textarea" id="reminder-message" rows="4"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('addReminderModal')">Anulează</button>
                <button class="btn btn-success" onclick="addReminder()">Salvează</button>
            </div>
        </div>
    </div>

    <script>
        // Global data storage
        let appData = {
            clients: [],
            appointments: [],
            reminders: []
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            updateUI();
            updateDateTime();
            setInterval(updateDateTime, 60000); // Update every minute
        });

        // Date and time functions
        function updateDateTime() {
            const now = new Date();
            const dateStr = now.toLocaleDateString('ro-RO');
            const timeStr = now.toLocaleTimeString('ro-RO', {hour: '2-digit', minute: '2-digit'});
            
            document.getElementById('current-date').textContent = dateStr;
            document.getElementById('last-update-time').textContent = timeStr;
        }

        // Data persistence
        function saveData() {
            localStorage.setItem('adinstalgaz_data', JSON.stringify(appData));
        }

        function loadData() {
            const saved = localStorage.getItem('adinstalgaz_data');
            if (saved) {
                appData = JSON.parse(saved);
            }
        }

        // Navigation
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active from all nav buttons
            document.querySelectorAll('.nav-button').forEach(button => {
                button.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            document.getElementById('nav-' + sectionId).classList.add('active');
            
            // Update UI for the current section
            updateUI();
        }

        // Modal functions
        function showModal(modalId) {
            if (modalId === 'addAppointmentModal') {
                populateClientDropdown();
            } else if (modalId === 'addReminderModal') {
                populateReminderClientDropdown();
            }
            document.getElementById(modalId).classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function populateClientDropdown() {
            const dropdown = document.getElementById('appointment-client-select');
            const defaultOptions = `
                <option value="">Selectează clientul</option>
                <option value="new-client">+ Client Nou (introdu manual)</option>
            `;
            
            const clientOptions = appData.clients.map(client => 
                `<option value="${client.id}">${client.name} - ${client.phone}</option>`
            ).join('');
            
            dropdown.innerHTML = defaultOptions + clientOptions;
        }

        function populateReminderClientDropdown() {
            const dropdown = document.getElementById('reminder-client-select');
            const defaultOptions = `
                <option value="">Selectează clientul</option>
                <option value="new-client">+ Client Nou (introdu manual)</option>
            `;
            
            const clientOptions = appData.clients.map(client => 
                `<option value="${client.id}">${client.name} - ${client.phone}</option>`
            ).join('');
            
            dropdown.innerHTML = defaultOptions + clientOptions;
        }

        function selectClient() {
            const dropdown = document.getElementById('appointment-client-select');
            const manualGroup = document.getElementById('manual-client-group');
            const phoneInput = document.getElementById('appointment-phone');
            const addressInput = document.getElementById('appointment-address');
            const nameInput = document.getElementById('appointment-client-name');
            
            const selectedValue = dropdown.value;
            
            if (selectedValue === 'new-client') {
                // Afișează câmpul pentru nume manual
                manualGroup.style.display = 'block';
                nameInput.required = true;
                
                // Resetează câmpurile
                phoneInput.value = '';
                addressInput.value = '';
                nameInput.value = '';
            } else if (selectedValue === '') {
                // Ascunde câmpul manual
                manualGroup.style.display = 'none';
                nameInput.required = false;
                
                // Resetează câmpurile
                phoneInput.value = '';
                addressInput.value = '';
                nameInput.value = '';
            } else {
                // Client existent selectat
                manualGroup.style.display = 'none';
                nameInput.required = false;
                
                const client = appData.clients.find(c => c.id == selectedValue);
                if (client) {
                    phoneInput.value = client.phone;
                    addressInput.value = client.address;
                    nameInput.value = client.name;
                }
            }
        }

        function selectReminderClient() {
            const dropdown = document.getElementById('reminder-client-select');
            const manualGroup = document.getElementById('manual-reminder-client-group');
            const phoneInput = document.getElementById('reminder-phone');
            const nameInput = document.getElementById('reminder-client-name');
            
            const selectedValue = dropdown.value;
            
            if (selectedValue === 'new-client') {
                // Afișează câmpul pentru nume manual
                manualGroup.style.display = 'block';
                nameInput.required = true;
                
                // Resetează câmpurile
                phoneInput.value = '';
                nameInput.value = '';
            } else if (selectedValue === '') {
                // Ascunde câmpul manual
                manualGroup.style.display = 'none';
                nameInput.required = false;
                
                // Resetează câmpurile
                phoneInput.value = '';
                nameInput.value = '';
            } else {
                // Client existent selectat
                manualGroup.style.display = 'none';
                nameInput.required = false;
                
                const client = appData.clients.find(c => c.id == selectedValue);
                if (client) {
                    phoneInput.value = client.phone;
                    nameInput.value = client.name;
                }
            }
        }

        function hideModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            document.body.style.overflow = 'auto';
            clearModalInputs(modalId);
        }

        function clearModalInputs(modalId) {
            const modal = document.getElementById(modalId);
            const inputs = modal.querySelectorAll('input, textarea, select');
            inputs.forEach(input => {
                if (input.type === 'checkbox' || input.type === 'radio') {
                    input.checked = false;
                } else {
                    input.value = '';
                }
            });
            
            // Resetează și elementele specifice pentru programări
            if (modalId === 'addAppointmentModal') {
                const manualGroup = document.getElementById('manual-client-group');
                const nameInput = document.getElementById('appointment-client-name');
                manualGroup.style.display = 'none';
                nameInput.required = false;
            }
            
            // Resetează și elementele specifice pentru reminder-uri
            if (modalId === 'addReminderModal') {
                const manualGroup = document.getElementById('manual-reminder-client-group');
                const nameInput = document.getElementById('reminder-client-name');
                manualGroup.style.display = 'none';
                nameInput.required = false;
            }
        }

        // Client functions
        function addClient() {
            const name = document.getElementById('client-name').value.trim();
            const phone = document.getElementById('client-phone').value.trim();
            const email = document.getElementById('client-email').value.trim();
            const address = document.getElementById('client-address').value.trim();

            if (!name || !phone || !address) {
                alert('Te rog să completezi toate câmpurile obligatorii!');
                return;
            }

            const newClient = {
                id: Date.now(),
                name: name,
                phone: phone,
                email: email,
                address: address,
                createdAt: new Date().toISOString(),
                totalServices: 0
            };

            appData.clients.push(newClient);
            saveData();
            updateUI();
            hideModal('addClientModal');
        }

        function renderClients(clientsToRender = null) {
            const clients = clientsToRender || appData.clients;
            const container = document.getElementById('clients-list');
            
            if (clients.length === 0) {
                container.innerHTML = '<p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">Nu aveți clienți încă</p>';
                return;
            }

            container.innerHTML = clients.map(client => `
                <div class="list-item">
                    <div class="avatar">${client.name.charAt(0).toUpperCase()}</div>
                    <div class="list-content">
                        <div class="list-title">${client.name}</div>
                        <div class="list-subtitle">📞 ${client.phone} • 📍 ${client.address}</div>
                    </div>
                    <button class="btn btn-primary" onclick="callClient('${client.phone}')">
                        📞
                    </button>
                </div>
            `).join('');
        }

        function searchClients(searchTerm) {
            if (!searchTerm.trim()) {
                renderClients();
                return;
            }

            const filtered = appData.clients.filter(client =>
                client.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                client.phone.includes(searchTerm) ||
                client.address.toLowerCase().includes(searchTerm.toLowerCase())
            );

            renderClients(filtered);
        }

        function callClient(phone) {
            window.open(`tel:${phone}`);
        }

        // Appointment functions
        function addAppointment() {
            const clientDropdown = document.getElementById('appointment-client-select');
            const manualNameInput = document.getElementById('appointment-client-name');
            const phone = document.getElementById('appointment-phone').value.trim();
            const service = document.getElementById('appointment-service').value;
            const address = document.getElementById('appointment-address').value.trim();
            const date = document.getElementById('appointment-date').value;
            const time = document.getElementById('appointment-time').value;
            const price = document.getElementById('appointment-price').value;
            const notes = document.getElementById('appointment-notes').value.trim();

            let clientName = '';
            let clientId = null;

            // Determină numele clientului
            if (clientDropdown.value === 'new-client') {
                clientName = manualNameInput.value.trim();
                if (!clientName) {
                    alert('Te rog să introduci numele clientului!');
                    return;
                }
            } else if (clientDropdown.value === '') {
                alert('Te rog să selectezi un client sau să alegi "Client Nou"!');
                return;
            } else {
                // Client existent
                clientId = parseInt(clientDropdown.value);
                const client = appData.clients.find(c => c.id === clientId);
                if (client) {
                    clientName = client.name;
                }
            }

            if (!clientName || !phone || !service || !address || !date || !time) {
                alert('Te rog să completezi toate câmpurile obligatorii!');
                return;
            }

            const newAppointment = {
                id: Date.now(),
                clientId: clientId, // null pentru clienți noi, id pentru clienți existenți
                clientName: clientName,
                phone: phone,
                service: service,
                address: address,
                date: date,
                time: time,
                price: parseFloat(price) || 0,
                notes: notes,
                status: 'programat',
                createdAt: new Date().toISOString()
            };

            appData.appointments.push(newAppointment);
            
            // Dacă este client nou și nu există deja în baza de date, îl adăugăm
            if (clientId === null) {
                const existingClient = appData.clients.find(c => 
                    c.name.toLowerCase() === clientName.toLowerCase() && c.phone === phone
                );
                
                if (!existingClient) {
                    const newClient = {
                        id: Date.now() + 1, // +1 pentru a evita conflictul cu appointment id
                        name: clientName,
                        phone: phone,
                        email: '',
                        address: address,
                        createdAt: new Date().toISOString(),
                        totalServices: 0
                    };
                    appData.clients.push(newClient);
                }
            }
            
            saveData();
            updateUI();
            hideModal('addAppointmentModal');
        }

        function renderAppointments(appointmentsToRender = null) {
            const appointments = appointmentsToRender || appData.appointments;
            const container = document.getElementById('appointments-list');
            
            if (appointments.length === 0) {
                container.innerHTML = '<p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">Nu aveți programări încă</p>';
                return;
            }

            container.innerHTML = appointments.map(apt => `
                <div class="list-item">
                    <div class="avatar" style="background: ${getStatusColor(apt.status)};">${apt.clientName.charAt(0).toUpperCase()}</div>
                    <div class="list-content">
                        <div class="list-title">${apt.clientName} - ${apt.service}</div>
                        <div class="list-subtitle">
                            📅 ${new Date(apt.date).toLocaleDateString('ro-RO')} • ⏰ ${apt.time} • 📍 ${apt.address}
                            ${apt.price ? ` • 💰 ${apt.price} RON` : ''}
                        </div>
                        <div class="text-xs mt-2">
                            <span style="background: ${getStatusColor(apt.status)}; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">
                                ${getStatusText(apt.status)}
                            </span>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        ${apt.status === 'programat' ? `
                            <button class="btn btn-success" onclick="updateAppointmentStatus(${apt.id}, 'in-progres')" style="padding: 0.5rem;">
                                ▶️
                            </button>
                        ` : ''}
                        ${apt.status === 'in-progres' ? `
                            <button class="btn btn-success" onclick="updateAppointmentStatus(${apt.id}, 'finalizat')" style="padding: 0.5rem;">
                                ✅
                            </button>
                        ` : ''}
                        <button class="btn btn-primary" onclick="callClient('${apt.phone}')" style="padding: 0.5rem;">
                            📞
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function searchAppointments(searchTerm) {
            if (!searchTerm.trim()) {
                renderAppointments();
                return;
            }

            const filtered = appData.appointments.filter(apt =>
                apt.clientName.toLowerCase().includes(searchTerm.toLowerCase()) ||
                apt.service.toLowerCase().includes(searchTerm.toLowerCase()) ||
                apt.address.toLowerCase().includes(searchTerm.toLowerCase())
            );

            renderAppointments(filtered);
        }

        function updateAppointmentStatus(id, newStatus) {
            const appointment = appData.appointments.find(apt => apt.id === id);
            if (appointment) {
                appointment.status = newStatus;
                if (newStatus === 'finalizat') {
                    appointment.completedAt = new Date().toISOString();
                }
                saveData();
                updateUI();
            }
        }

        function getStatusColor(status) {
            switch (status) {
                case 'finalizat': return '#10b981';
                case 'in-progres': return '#f59e0b';
                default: return '#3b82f6';
            }
        }

        function getStatusText(status) {
            switch (status) {
                case 'finalizat': return 'Finalizat';
                case 'in-progres': return 'În Progres';
                default: return 'Programat';
            }
        }

        // Reminder functions
        function addReminder() {
            const clientDropdown = document.getElementById('reminder-client-select');
            const manualNameInput = document.getElementById('reminder-client-name');
            const phone = document.getElementById('reminder-phone').value.trim();
            const type = document.getElementById('reminder-type').value;
            const date = document.getElementById('reminder-date').value;
            const message = document.getElementById('reminder-message').value.trim();

            let clientName = '';
            let clientId = null;

            // Determină numele clientului
            if (clientDropdown.value === 'new-client') {
                clientName = manualNameInput.value.trim();
                if (!clientName) {
                    alert('Te rog să introduci numele clientului!');
                    return;
                }
            } else if (clientDropdown.value === '') {
                alert('Te rog să selectezi un client sau să alegi "Client Nou"!');
                return;
            } else {
                // Client existent
                clientId = parseInt(clientDropdown.value);
                const client = appData.clients.find(c => c.id === clientId);
                if (client) {
                    clientName = client.name;
                }
            }

            if (!clientName || !phone || !type || !date || !message) {
                alert('Te rog să completezi toate câmpurile obligatorii!');
                return;
            }

            const newReminder = {
                id: Date.now(),
                clientId: clientId,
                clientName: clientName,
                phone: phone,
                type: type,
                reminderDate: date,
                message: message,
                sent: false,
                createdAt: new Date().toISOString()
            };

            appData.reminders.push(newReminder);
            saveData();
            updateUI();
            hideModal('addReminderModal');
        }

        function updateReminderMessage() {
            const type = document.getElementById('reminder-type').value;
            const messageField = document.getElementById('reminder-message');
            
            const templates = {
                'verificare-instalatii-gaz': 'Bună ziua! Vă aducem aminte că se apropie termenul pentru verificarea tehnică a instalațiilor de gaze. Vă rugăm să ne contactați pentru programare. Ad Instal Gaz SRL - 0762 614 401',
                'verificare-centrale-termice': 'Bună ziua! Este timpul pentru revizia/verificarea centralei termice. Contactați-ne pentru programare. Ad Instal Gaz SRL - 0762 614 401',
                'urmărire-factura': 'Bună ziua! Vă aducem aminte despre factura pentru serviciile prestate. Pentru detalii, contactați-ne la 0762 614 401. Ad Instal Gaz SRL'
            };

            messageField.value = templates[type] || '';
        }

        function renderReminders() {
            const container = document.getElementById('active-reminders');
            const activeReminders = appData.reminders.filter(r => !r.sent);
            
            if (activeReminders.length === 0) {
                container.innerHTML = '<p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">Nu există reminder-e active</p>';
                return;
            }

            container.innerHTML = activeReminders.map(reminder => `
                <div class="list-item">
                    <div class="avatar">🔔</div>
                    <div class="list-content">
                        <div class="list-title">${reminder.clientName}</div>
                        <div class="list-subtitle">${reminder.message.substring(0, 100)}...</div>
                        <div class="text-xs" style="color: #6b7280;">
                            Programat: ${new Date(reminder.reminderDate).toLocaleDateString('ro-RO')}
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <button class="btn btn-success" onclick="sendWhatsApp('${reminder.phone}', '${reminder.message}')" style="padding: 0.5rem;">
                            📱
                        </button>
                        <button class="btn btn-primary" onclick="sendSMS('${reminder.phone}', '${reminder.message}')" style="padding: 0.5rem;">
                            💬
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function sendWhatsApp(phone, message) {
            const cleanPhone = phone.replace(/\D/g, '').slice(-9);
            const whatsappURL = `https://wa.me/40${cleanPhone}?text=${encodeURIComponent(message)}`;
            window.open(whatsappURL, '_blank');
        }

        function sendSMS(phone, message) {
            const cleanPhone = phone.replace(/\D/g, '').slice(-9);
            const smsURL = `sms:+40${cleanPhone}?body=${encodeURIComponent(message)}`;
            window.location.href = smsURL;
        }

        // Statistics and reporting
        function calculateStats() {
            const now = new Date();
            const currentMonth = now.getMonth();
            const currentYear = now.getFullYear();

            return {
                totalClients: appData.clients.length,
                monthAppointments: appData.appointments.filter(apt => {
                    const aptDate = new Date(apt.date);
                    return aptDate.getMonth() === currentMonth && aptDate.getFullYear() === currentYear;
                }).length,
                pendingAppointments: appData.appointments.filter(apt => apt.status === 'programat').length,
                completedAppointments: appData.appointments.filter(apt => apt.status === 'finalizat').length,
                monthRevenue: appData.appointments
                    .filter(apt => {
                        if (apt.status !== 'finalizat' || !apt.completedAt) return false;
                        const completedDate = new Date(apt.completedAt);
                        return completedDate.getMonth() === currentMonth && completedDate.getFullYear() === currentYear;
                    })
                    .reduce((sum, apt) => sum + (apt.price || 0), 0),
                tomorrowTasks: getTomorrowTasks()
            };
        }

        function getTomorrowTasks() {
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            const tomorrowStr = tomorrow.toISOString().split('T')[0];
            
            const tomorrowAppointments = appData.appointments.filter(apt => apt.date === tomorrowStr);
            const tomorrowReminders = appData.reminders.filter(r => r.reminderDate === tomorrowStr && !r.sent);
            
            return tomorrowAppointments.length + tomorrowReminders.length;
        }

        function updateUI() {
            const stats = calculateStats();
            
            // Update stats
            document.getElementById('total-clients').textContent = stats.totalClients;
            document.getElementById('month-appointments').textContent = stats.monthAppointments;
            document.getElementById('pending-appointments').textContent = stats.pendingAppointments;
            document.getElementById('month-revenue').textContent = stats.monthRevenue + ' RON';
            document.getElementById('tomorrow-tasks').textContent = stats.tomorrowTasks;
            
            // Update counts
            document.getElementById('clients-count').textContent = stats.totalClients;
            document.getElementById('appointments-count').textContent = appData.appointments.length;
            
            // Update reports
            document.getElementById('report-appointments').textContent = stats.monthAppointments;
            document.getElementById('report-completed').textContent = stats.completedAppointments;
            document.getElementById('report-revenue').textContent = stats.monthRevenue + ' RON';
            
            // Render lists
            renderClients();
            renderAppointments();
            renderReminders();
            renderRecentActivity();
        }

        function renderRecentActivity() {
            // Recent appointments
            const recentAppointments = appData.appointments
                .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
                .slice(0, 5);
            
            const appointmentsContainer = document.getElementById('recent-appointments');
            if (recentAppointments.length === 0) {
                appointmentsContainer.innerHTML = '<p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">Nu există programări încă</p>';
            } else {
                appointmentsContainer.innerHTML = recentAppointments.map(apt => `
                    <div class="list-item" style="padding: 0.75rem 0;">
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: ${getStatusColor(apt.status)};"></div>
                        <div class="list-content">
                            <div class="list-title">${apt.clientName}</div>
                            <div class="list-subtitle">${apt.service}</div>
                        </div>
                        <div class="text-xs" style="color: #6b7280;">
                            ${new Date(apt.date).toLocaleDateString('ro-RO')}
                        </div>
                    </div>
                `).join('');
            }
            
            // Recent clients
            const recentClients = appData.clients
                .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
                .slice(0, 5);
            
            const clientsContainer = document.getElementById('recent-clients');
            if (recentClients.length === 0) {
                clientsContainer.innerHTML = '<p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">Nu există clienți încă</p>';
            } else {
                clientsContainer.innerHTML = recentClients.map(client => `
                    <div class="list-item" style="padding: 0.75rem 0;">
                        <div class="avatar" style="width: 32px; height: 32px; font-size: 0.875rem;">${client.name.charAt(0).toUpperCase()}</div>
                        <div class="list-content">
                            <div class="list-title">${client.name}</div>
                            <div class="list-subtitle">${client.phone}</div>
                        </div>
                        <button class="btn btn-primary" onclick="callClient('${client.phone}')" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;">
                            📞
                        </button>
                    </div>
                `).join('');
            }
        }

        function exportData() {
            const dataToExport = {
                ...appData,
                stats: calculateStats(),
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(dataToExport, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `adinstalgaz-backup-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // Set minimum date for date inputs
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date().toISOString().split('T')[0];
            const dateInputs = document.querySelectorAll('input[type="date"]');
            dateInputs.forEach(input => {
                input.min = today;
            });
        });
    </script>
</body>
</html>
