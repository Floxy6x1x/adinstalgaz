<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ad Instal Gaz SRL - Management Business</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üî•</text></svg>">
    <!-- Libraries for Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f3f4f6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #ffffff 0%, #f0f4f8 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid rgba(255,255,255,0.3);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .logo svg {
            width: 32px;
            height: 32px;
        }

        .header-text h1 {
            font-size: 1.5rem;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .header-text p {
            font-size: 0.9rem;
            color: #e2e8f0;
            font-weight: 500;
        }

        .header-date {
            text-align: right;
        }

        .header-date p:first-child {
            font-size: 0.9rem;
            color: #e2e8f0;
        }

        .header-date p:last-child {
            font-weight: 600;
        }

        /* Navigation */
        .nav {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 1rem 0;
        }

        .nav-container {
            display: flex;
            gap: 0.5rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
        }

        .nav-button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            border: none;
            background: #f3f4f6;
            color: #374151;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .nav-button:hover {
            background: #e5e7eb;
        }

        .nav-button.active {
            background: #2563eb;
            color: white;
        }

        .nav-button .icon {
            width: 18px;
            height: 18px;
        }

        /* Main Content */
        .main {
            padding: 2rem 0;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid #e5e7eb;
        }

        .card-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .card-content {
            padding: 1.5rem;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #111827;
            margin-bottom: 0.5rem;
        }

        /* Dashboard */
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .dashboard-title {
            font-size: 2rem;
            font-weight: bold;
            color: #111827;
        }

        .last-update {
            font-size: 0.875rem;
            color: #6b7280;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid #e5e7eb;
        }

        .stat-card.special {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            color: white;
        }

        .stat-header {
            display: flex;
            justify-content: between;
            align-items: center;
        }

        .stat-content {
            flex: 1;
        }

        .stat-label {
            font-size: 0.875rem;
            color: #6b7280;
            margin-bottom: 0.25rem;
        }

        .stat-card.special .stat-label {
            color: #bfdbfe;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #111827;
        }

        .stat-card.special .stat-value {
            color: white;
        }

        .stat-subtext {
            font-size: 0.75rem;
            color: #bfdbfe;
            margin-top: 0.25rem;
        }

        .stat-icon {
            width: 24px;
            height: 24px;
            margin-left: 1rem;
        }

        /* Forms */
        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            margin-bottom: 0.5rem;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 0.875rem;
            color: #111827;
            background: white;
            transition: border-color 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 0.875rem;
            color: #111827;
            background: white;
            cursor: pointer;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary {
            background: #3b82f6;
            color: white;
        }

        .btn-primary:hover {
            background: #2563eb;
        }

        .btn-success {
            background: #10b981;
            color: white;
        }

        .btn-success:hover {
            background: #059669;
        }

        .btn-secondary {
            background: #6b7280;
            color: white;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #111827;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #6b7280;
            cursor: pointer;
            padding: 0.25rem;
        }

        .modal-close:hover {
            color: #374151;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            padding: 1.5rem;
            border-top: 1px solid #e5e7eb;
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        /* Lists */
        .list-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-bottom: 1px solid #f3f4f6;
        }

        .list-item:last-child {
            border-bottom: none;
        }

        .avatar {
            width: 40px;
            height: 40px;
            background: #dbeafe;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #1d4ed8;
        }

        .list-content {
            flex: 1;
        }

        .list-title {
            font-weight: 500;
            color: #111827;
            margin-bottom: 0.25rem;
        }

        .list-subtitle {
            font-size: 0.875rem;
            color: #6b7280;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .dashboard-header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .modal-content {
                margin: 1rem;
            }
        }

        /* Utility Classes */
        .hidden { display: none !important; }
        .text-center { text-align: center; }
        .text-sm { font-size: 0.875rem; }
        .text-xs { font-size: 0.75rem; }
        .font-medium { font-weight: 500; }
        .font-bold { font-weight: bold; }
        .mb-4 { margin-bottom: 1rem; }
        .mt-4 { margin-top: 1rem; }
        .gap-4 { gap: 1rem; }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo-container">
                    <div class="logo">
                        <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <path d="M50 15 C60 25, 65 35, 65 45 C65 55, 60 65, 50 65 C40 65, 35 55, 35 45 C35 35, 40 25, 50 15 Z" fill="url(#flameGradient)"/>
                            <rect x="20" y="70" width="60" height="8" rx="4" fill="#2a5298"/>
                            <rect x="15" y="78" width="70" height="6" rx="3" fill="#1e3c72"/>
                            <path d="M25 50 L35 50 L35 45 L40 45 L40 55 L35 55 L35 50 L30 50 L30 60 L25 60 Z" fill="#ff6b35"/>
                            <defs>
                                <linearGradient id="flameGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#ff6b35;stop-opacity:1" />
                                    <stop offset="50%" style="stop-color:#ff8c42;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#ffa726;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                        </svg>
                    </div>
                    <div class="header-text">
                        <h1>Ad Instal Gaz SRL</h1>
                        <p>Management Business</p>
                    </div>
                </div>
                <div class="header-date">
                    <p>AstƒÉzi</p>
                    <p id="current-date"></p>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav">
        <div class="container">
            <div class="nav-container">
                <button class="nav-button active" onclick="showSection('dashboard')" id="nav-dashboard">
                    <span class="icon">üìä</span>
                    Dashboard
                </button>
                <button class="nav-button" onclick="showSection('clients')" id="nav-clients">
                    <span class="icon">üë•</span>
                    Clien»õi
                </button>
                <button class="nav-button" onclick="showSection('appointments')" id="nav-appointments">
                    <span class="icon">üìÖ</span>
                    ProgramƒÉri
                </button>
                <button class="nav-button" onclick="showSection('workplan')" id="nav-workplan">
                    <span class="icon">üìã</span>
                    Fi»ôa M√¢ine
                </button>
                <button class="nav-button" onclick="showSection('reminders')" id="nav-reminders">
                    <span class="icon">üîî</span>
                    Reminder-e
                </button>
                <button class="nav-button" onclick="showSection('reports')" id="nav-reports">
                    <span class="icon">üìÑ</span>
                    Rapoarte
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            <!-- Dashboard Section -->
            <section id="dashboard" class="section active">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Dashboard</h2>
                    <div class="last-update">
                        Ultima actualizare: <span id="last-update-time"></span>
                    </div>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-content">
                                <div class="stat-label">Total Clien»õi</div>
                                <div class="stat-value" id="total-clients">0</div>
                            </div>
                            <div class="stat-icon">üë•</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-content">
                                <div class="stat-label">ProgramƒÉri Luna</div>
                                <div class="stat-value" id="month-appointments">0</div>
                            </div>
                            <div class="stat-icon">üìÖ</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-content">
                                <div class="stat-label">√én A»ôteptare</div>
                                <div class="stat-value" id="pending-appointments">0</div>
                            </div>
                            <div class="stat-icon">‚è≥</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-content">
                                <div class="stat-label">Venituri Luna</div>
                                <div class="stat-value" id="month-revenue">0 RON</div>
                            </div>
                            <div class="stat-icon">üí∞</div>
                        </div>
                    </div>

                    <div class="stat-card special">
                        <div class="stat-header">
                            <div class="stat-content">
                                <div class="stat-label">M√¢ine</div>
                                <div class="stat-value" id="tomorrow-tasks">0</div>
                                <div class="stat-subtext">activitƒÉ»õi</div>
                            </div>
                            <div class="stat-icon">üîî</div>
                        </div>
                    </div>
                </div>

                <!-- Activity Cards -->
                <div class="stats-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">ProgramƒÉri Recente</h3>
                        </div>
                        <div class="card-content">
                            <div id="recent-appointments">
                                <p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">
                                    Nu existƒÉ programƒÉri √ÆncƒÉ
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Clien»õi Noi</h3>
                        </div>
                        <div class="card-content">
                            <div id="recent-clients">
                                <p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">
                                    Nu existƒÉ clien»õi √ÆncƒÉ
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Clients Section -->
            <section id="clients" class="section">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Clien»õi (<span id="clients-count">0</span>)</h2>
                    <button class="btn btn-primary" onclick="showModal('addClientModal')">
                        <span>‚ûï</span>
                        AdaugƒÉ Client
                    </button>
                </div>

                <!-- Search -->
                <div class="card mb-4">
                    <div class="card-content">
                        <input type="text" class="form-input" placeholder="CautƒÉ clien»õi..." 
                               onkeyup="searchClients(this.value)" id="client-search">
                    </div>
                </div>

                <!-- Clients List -->
                <div class="card">
                    <div class="card-content">
                        <div id="clients-list">
                            <p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">
                                Nu ave»õi clien»õi √ÆncƒÉ
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Appointments Section -->
            <section id="appointments" class="section">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">ProgramƒÉri (<span id="appointments-count">0</span>)</h2>
                    <button class="btn btn-primary" onclick="showModal('addAppointmentModal')">
                        <span>‚ûï</span>
                        Programare NouƒÉ
                    </button>
                </div>

                <!-- Search -->
                <div class="card mb-4">
                    <div class="card-content">
                        <input type="text" class="form-input" placeholder="CautƒÉ programƒÉri..." 
                               onkeyup="searchAppointments(this.value)" id="appointment-search">
                    </div>
                </div>

                <!-- Appointments List -->
                <div class="card">
                    <div class="card-content">
                        <div id="appointments-list">
                            <p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">
                                Nu ave»õi programƒÉri √ÆncƒÉ
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Work Plan Section -->
            <section id="workplan" class="section">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">üìã Fi»ôa de Lucru - M√¢ine</h2>
                    <div class="flex gap-2">
                        <button class="btn btn-success" onclick="exportTomorrowWorkPlan()">
                            <span>üìÑ</span>
                            Export PDF
                        </button>
                        <button class="btn btn-primary" onclick="sendTomorrowReminders()">
                            <span>üì±</span>
                            Trimite Reminder-e
                        </button>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">üìÖ ProgramƒÉri M√¢ine</h3>
                        </div>
                        <div class="card-content">
                            <div id="tomorrow-appointments">
                                <p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">
                                    Nu ave»õi programƒÉri m√¢ine
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">üîî Reminder-e de Trimis M√¢ine</h3>
                        </div>
                        <div class="card-content">
                            <div id="tomorrow-reminders">
                                <p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">
                                    Nu ave»õi reminder-e m√¢ine
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">üìä Rezumat Zilei</h3>
                    </div>
                    <div class="card-content">
                        <div class="stats-grid">
                            <div class="text-center">
                                <div style="font-size: 2rem; font-weight: bold; color: #3b82f6;" id="tomorrow-total-tasks">0</div>
                                <div style="color: #6b7280;">Total ActivitƒÉ»õi</div>
                            </div>
                            <div class="text-center">
                                <div style="font-size: 2rem; font-weight: bold; color: #10b981;" id="tomorrow-appointments-count">0</div>
                                <div style="color: #6b7280;">ProgramƒÉri</div>
                            </div>
                            <div class="text-center">
                                <div style="font-size: 2rem; font-weight: bold; color: #f59e0b;" id="tomorrow-reminders-count">0</div>
                                <div style="color: #6b7280;">Reminder-e</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Reminders Section -->
            <section id="reminders" class="section">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Reminder-e & NotificƒÉri</h2>
                    <div class="flex gap-2">
                        <button class="btn btn-success" onclick="showModal('addReminderModal')">
                            <span>‚ûï</span>
                            Reminder Nou
                        </button>
                        <button class="btn btn-primary" onclick="sendTodayReminders()">
                            <span>üì±</span>
                            Trimite Azi
                        </button>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">üîî Reminder-e Active</h3>
                        </div>
                        <div class="card-content">
                            <div id="active-reminders">
                                <p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">
                                    Nu existƒÉ reminder-e active
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">‚ö° Reminder-e Automate</h3>
                        </div>
                        <div class="card-content">
                            <div style="background: #dbeafe; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                                <h4 style="color: #1e40af; font-weight: 600; margin-bottom: 0.5rem;">VerificƒÉri Instala»õii Gaz</h4>
                                <p style="color: #1e40af; font-size: 0.875rem;">
                                    Reminder automat pentru verificƒÉrile periodice ale instala»õiilor de gaze
                                </p>
                            </div>
                            <div style="background: #dcfce7; padding: 1rem; border-radius: 8px;">
                                <h4 style="color: #166534; font-weight: 600; margin-bottom: 0.5rem;">VerificƒÉri Centrale Termice</h4>
                                <p style="color: #166534; font-size: 0.875rem;">
                                    Notificare clien»õi pentru reviziile periodice ale centralelor termice
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Reports Section -->
            <section id="reports" class="section">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Rapoarte & Statistici</h2>
                    <div class="flex gap-2">
                        <button class="btn btn-success" onclick="exportToExcel()">
                            <span>üìä</span>
                            Export Excel
                        </button>
                        <button class="btn btn-success" onclick="exportToPDF()">
                            <span>üìÑ</span>
                            Export PDF
                        </button>
                        <button class="btn btn-primary" onclick="backupData()">
                            <span>üíæ</span>
                            Backup
                        </button>
                        <button class="btn btn-primary" onclick="document.getElementById('restore-file').click()">
                            <span>üìÇ</span>
                            Restore
                        </button>
                        <input type="file" id="restore-file" accept=".json" style="display: none;" onchange="restoreData(this)">
                        <button class="btn btn-secondary" onclick="showModal('deleteDataModal')" style="background: #dc2626;">
                            <span>üóëÔ∏è</span>
                            »òterge Date Test
                        </button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">üìä Raport Lunar</h3>
                    </div>
                    <div class="card-content">
                        <div class="stats-grid">
                            <div class="text-center">
                                <div style="font-size: 2rem; font-weight: bold; color: #3b82f6;" id="report-appointments">0</div>
                                <div style="color: #6b7280;">Servicii Luna Aceasta</div>
                            </div>
                            <div class="text-center">
                                <div style="font-size: 2rem; font-weight: bold; color: #10b981;" id="report-completed">0</div>
                                <div style="color: #6b7280;">Servicii Finalizate</div>
                            </div>
                            <div class="text-center">
                                <div style="font-size: 2rem; font-weight: bold; color: #10b981;" id="report-revenue">0 RON</div>
                                <div style="color: #6b7280;">Venituri Luna</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Add Client Modal -->
    <div id="addClientModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">AdaugƒÉ Client Nou</h3>
                <button class="modal-close" onclick="hideModal('addClientModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Nume Complet *</label>
                    <input type="text" class="form-input" id="client-name" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Telefon *</label>
                    <input type="tel" class="form-input" id="client-phone" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" id="client-email">
                </div>
                <div class="form-group">
                    <label class="form-label">Adresa *</label>
                    <textarea class="form-input form-textarea" id="client-address" required></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('addClientModal')">AnuleazƒÉ</button>
                <button class="btn btn-primary" onclick="addClient()">SalveazƒÉ</button>
            </div>
        </div>
    </div>

    <!-- Add Appointment Modal -->
    <div id="addAppointmentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Programare NouƒÉ</h3>
                <button class="modal-close" onclick="hideModal('addAppointmentModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Client *</label>
                    <select class="form-select" id="appointment-client-select" onchange="selectClient()" required>
                        <option value="">SelecteazƒÉ clientul</option>
                        <option value="new-client">+ Client Nou (introdu manual)</option>
                    </select>
                </div>
                <div class="form-group" id="manual-client-group" style="display: none;">
                    <label class="form-label">Nume Client *</label>
                    <input type="text" class="form-input" id="appointment-client-name">
                </div>
                <div class="form-group">
                    <label class="form-label">Telefon *</label>
                    <input type="tel" class="form-input" id="appointment-phone" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Serviciu *</label>
                    <select class="form-select" id="appointment-service" required>
                        <option value="">SelecteazƒÉ serviciul</option>
                        <option value="VerificƒÉri instala»õii gaz">VerificƒÉri instala»õii gaz</option>
                        <option value="Revizii instala»õii gaz">Revizii instala»õii gaz</option>
                        <option value="VerificƒÉri centrale termice">VerificƒÉri centrale termice</option>
                        <option value="Revizii centrale termice">Revizii centrale termice</option>
                        <option value="Verificare TehnicƒÉ PeriodicƒÉ">Verificare TehnicƒÉ PeriodicƒÉ</option>
                        <option value="Verificare la Racordare">Verificare la Racordare</option>
                        <option value="Instala»õii de Utilizare Gaz">Instala»õii de Utilizare Gaz</option>
                        <option value="Proiectare Bran»ôamente">Proiectare Bran»ôamente</option>
                        <option value="Execu»õie Bran»ôamente">Execu»õie Bran»ôamente</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Adresa *</label>
                    <input type="text" class="form-input" id="appointment-address" required>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label class="form-label">Data *</label>
                        <input type="date" class="form-input" id="appointment-date" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ora *</label>
                        <input type="time" class="form-input" id="appointment-time" required>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Pre»õ (RON)</label>
                    <input type="number" class="form-input" id="appointment-price">
                </div>
                <div class="form-group">
                    <label class="form-label">Observa»õii</label>
                    <textarea class="form-input form-textarea" id="appointment-notes"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('addAppointmentModal')">AnuleazƒÉ</button>
                <button class="btn btn-primary" onclick="addAppointment()">SalveazƒÉ</button>
            </div>
        </div>
    </div>

    <!-- Add Reminder Modal -->
    <div id="addReminderModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Reminder Nou</h3>
                <button class="modal-close" onclick="hideModal('addReminderModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Client *</label>
                    <select class="form-select" id="reminder-client-select" onchange="selectReminderClient()" required>
                        <option value="">SelecteazƒÉ clientul</option>
                        <option value="new-client">+ Client Nou (introdu manual)</option>
                    </select>
                </div>
                <div class="form-group" id="manual-reminder-client-group" style="display: none;">
                    <label class="form-label">Nume Client *</label>
                    <input type="text" class="form-input" id="reminder-client-name">
                </div>
                <div class="form-group">
                    <label class="form-label">Telefon Client *</label>
                    <input type="tel" class="form-input" id="reminder-phone" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Tipul Reminder-ului *</label>
                    <select class="form-select" id="reminder-type" onchange="updateReminderMessage()" required>
                        <option value="">SelecteazƒÉ tipul</option>
                        <option value="verificare-instalatii-gaz">VerificƒÉri »ôi Revizii Instala»õii Gaz</option>
                        <option value="verificare-centrale-termice">VerificƒÉri »ôi Revizii Centrale Termice</option>
                        <option value="urmƒÉrire-factura">UrmƒÉrire FacturƒÉ</option>
                        <option value="custom">Personalizat</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Data Reminder *</label>
                    <input type="date" class="form-input" id="reminder-date" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Mesajul pentru Client</label>
                    <textarea class="form-input form-textarea" id="reminder-message" rows="4"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('addReminderModal')">AnuleazƒÉ</button>
                <button class="btn btn-success" onclick="addReminder()">SalveazƒÉ</button>
            </div>
        </div>
    </div>

    <!-- Client Details Modal -->
    <div id="clientDetailsModal" class="modal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h3 class="modal-title">üë§ Detalii Client</h3>
                <button class="modal-close" onclick="hideModal('clientDetailsModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="client-details-content">
                    <!-- Content will be populated dynamically -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('clientDetailsModal')">√énchide</button>
            </div>
        </div>
    </div>

    <!-- Delete Data Modal -->
    <div id="deleteDataModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" style="color: #dc2626;">‚ö†Ô∏è »òtergere Date Test</h3>
                <button class="modal-close" onclick="hideModal('deleteDataModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div style="background: #fef2f2; border: 1px solid #fecaca; border-radius: 6px; padding: 1rem; margin-bottom: 1rem;">
                    <p style="color: #dc2626; font-weight: 600; margin-bottom: 0.5rem;">ATEN»öIE!</p>
                    <p style="color: #dc2626; font-size: 0.875rem;">
                        AceastƒÉ ac»õiune va »ôterge TOATE datele (clien»õi, programƒÉri, reminder-uri) »ôi nu poate fi anulatƒÉ!
                    </p>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Pentru confirmare, scrie: <strong>STERGE TOTUL</strong></label>
                    <input type="text" class="form-input" id="delete-confirmation" placeholder="Scrie exact: STERGE TOTUL">
                </div>
                
                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.875rem;">
                        <input type="checkbox" id="delete-checkbox">
                        Confirm cƒÉ vreau sƒÉ »ôterg toate datele
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('deleteDataModal')">AnuleazƒÉ</button>
                <button class="btn" onclick="deleteAllData()" style="background: #dc2626; color: white;">
                    üóëÔ∏è »òterge Totul
                </button>
            </div>
        </div>
    </div>

    <script>
        // Global data storage
        let appData = {
            clients: [],
            appointments: [],
            reminders: []
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            updateUI();
            updateDateTime();
            setInterval(updateDateTime, 60000); // Update every minute
        });

        // Date and time functions
        function updateDateTime() {
            const now = new Date();
            const dateStr = now.toLocaleDateString('ro-RO');
            const timeStr = now.toLocaleTimeString('ro-RO', {hour: '2-digit', minute: '2-digit'});
            
            document.getElementById('current-date').textContent = dateStr;
            document.getElementById('last-update-time').textContent = timeStr;
        }

        // Data persistence
        function saveData() {
            localStorage.setItem('adinstalgaz_data', JSON.stringify(appData));
        }

        function loadData() {
            const saved = localStorage.getItem('adinstalgaz_data');
            if (saved) {
                appData = JSON.parse(saved);
                // Ensure documents array exists for all clients
                appData.clients.forEach(client => {
                    if (!client.documents) {
                        client.documents = [];
                    }
                });
            }
        }

        // Navigation
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active from all nav buttons
            document.querySelectorAll('.nav-button').forEach(button => {
                button.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            document.getElementById('nav-' + sectionId).classList.add('active');
            
            // Update UI for the current section
            updateUI();
        }

        // Modal functions
        function showModal(modalId) {
            if (modalId === 'addAppointmentModal') {
                populateClientDropdown();
            } else if (modalId === 'addReminderModal') {
                populateReminderClientDropdown();
            }
            document.getElementById(modalId).classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function populateClientDropdown() {
            const dropdown = document.getElementById('appointment-client-select');
            const defaultOptions = `
                <option value="">SelecteazƒÉ clientul</option>
                <option value="new-client">+ Client Nou (introdu manual)</option>
            `;
            
            const clientOptions = appData.clients.map(client => 
                `<option value="${client.id}">${client.name} - ${client.phone}</option>`
            ).join('');
            
            dropdown.innerHTML = defaultOptions + clientOptions;
        }

        function populateReminderClientDropdown() {
            const dropdown = document.getElementById('reminder-client-select');
            const defaultOptions = `
                <option value="">SelecteazƒÉ clientul</option>
                <option value="new-client">+ Client Nou (introdu manual)</option>
            `;
            
            const clientOptions = appData.clients.map(client => 
                `<option value="${client.id}">${client.name} - ${client.phone}</option>`
            ).join('');
            
            dropdown.innerHTML = defaultOptions + clientOptions;
        }

        function selectClient() {
            const dropdown = document.getElementById('appointment-client-select');
            const manualGroup = document.getElementById('manual-client-group');
            const phoneInput = document.getElementById('appointment-phone');
            const addressInput = document.getElementById('appointment-address');
            const nameInput = document.getElementById('appointment-client-name');
            
            const selectedValue = dropdown.value;
            
            if (selectedValue === 'new-client') {
                // Afi»ôeazƒÉ c√¢mpul pentru nume manual
                manualGroup.style.display = 'block';
                nameInput.required = true;
                
                // ReseteazƒÉ c√¢mpurile
                phoneInput.value = '';
                addressInput.value = '';
                nameInput.value = '';
            } else if (selectedValue === '') {
                // Ascunde c√¢mpul manual
                manualGroup.style.display = 'none';
                nameInput.required = false;
                
                // ReseteazƒÉ c√¢mpurile
                phoneInput.value = '';
                addressInput.value = '';
                nameInput.value = '';
            } else {
                // Client existent selectat
                manualGroup.style.display = 'none';
                nameInput.required = false;
                
                const client = appData.clients.find(c => c.id == selectedValue);
                if (client) {
                    phoneInput.value = client.phone;
                    addressInput.value = client.address;
                    nameInput.value = client.name;
                }
            }
        }

        function selectReminderClient() {
            const dropdown = document.getElementById('reminder-client-select');
            const manualGroup = document.getElementById('manual-reminder-client-group');
            const phoneInput = document.getElementById('reminder-phone');
            const nameInput = document.getElementById('reminder-client-name');
            
            const selectedValue = dropdown.value;
            
            if (selectedValue === 'new-client') {
                // Afi»ôeazƒÉ c√¢mpul pentru nume manual
                manualGroup.style.display = 'block';
                nameInput.required = true;
                
                // ReseteazƒÉ c√¢mpurile
                phoneInput.value = '';
                nameInput.value = '';
            } else if (selectedValue === '') {
                // Ascunde c√¢mpul manual
                manualGroup.style.display = 'none';
                nameInput.required = false;
                
                // ReseteazƒÉ c√¢mpurile
                phoneInput.value = '';
                nameInput.value = '';
            } else {
                // Client existent selectat
                manualGroup.style.display = 'none';
                nameInput.required = false;
                
                const client = appData.clients.find(c => c.id == selectedValue);
                if (client) {
                    phoneInput.value = client.phone;
                    nameInput.value = client.name;
                }
            }
        }

        function hideModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            document.body.style.overflow = 'auto';
            clearModalInputs(modalId);
        }

        function clearModalInputs(modalId) {
            const modal = document.getElementById(modalId);
            const inputs = modal.querySelectorAll('input, textarea, select');
            inputs.forEach(input => {
                if (input.type === 'checkbox' || input.type === 'radio') {
                    input.checked = false;
                } else {
                    input.value = '';
                }
            });
            
            // ReseteazƒÉ »ôi elementele specifice pentru programƒÉri
            if (modalId === 'addAppointmentModal') {
                const manualGroup = document.getElementById('manual-client-group');
                const nameInput = document.getElementById('appointment-client-name');
                manualGroup.style.display = 'none';
                nameInput.required = false;
            }
            
            // ReseteazƒÉ »ôi elementele specifice pentru reminder-uri
            if (modalId === 'addReminderModal') {
                const manualGroup = document.getElementById('manual-reminder-client-group');
                const nameInput = document.getElementById('reminder-client-name');
                manualGroup.style.display = 'none';
                nameInput.required = false;
            }
        }

        // Client functions
        function addClient() {
            const name = document.getElementById('client-name').value.trim();
            const phone = document.getElementById('client-phone').value.trim();
            const email = document.getElementById('client-email').value.trim();
            const address = document.getElementById('client-address').value.trim();

            if (!name || !phone || !address) {
                alert('Te rog sƒÉ completezi toate c√¢mpurile obligatorii!');
                return;
            }

            const newClient = {
                id: Date.now(),
                name: name,
                phone: phone,
                email: email,
                address: address,
                createdAt: new Date().toISOString(),
                totalServices: 0,
                documents: []
            };

            appData.clients.push(newClient);
            saveData();
            updateUI();
            hideModal('addClientModal');
        }

        // Client documents functions
        function uploadClientDocument(clientId) {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*,.pdf,.doc,.docx';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const document = {
                            id: Date.now(),
                            name: file.name,
                            type: file.type,
                            size: file.size,
                            data: e.target.result,
                            uploadDate: new Date().toISOString()
                        };
                        
                        const client = appData.clients.find(c => c.id === clientId);
                        if (client) {
                            if (!client.documents) client.documents = [];
                            client.documents.push(document);
                            saveData();
                            updateUI();
                            alert('‚úÖ Document uplodat cu succes!');
                        }
                    };
                    reader.readAsDataURL(file);
                }
            };
            input.click();
        }

        function showClientDetails(clientId) {
            const client = appData.clients.find(c => c.id === clientId);
            if (!client) return;
            
            const clientAppointments = appData.appointments.filter(apt => apt.clientId === clientId || apt.clientName === client.name);
            const clientReminders = appData.reminders.filter(r => r.clientId === clientId || r.clientName === client.name);
            
            const content = `
                <div style="margin-bottom: 2rem;">
                    <h4 style="color: #111827; margin-bottom: 1rem;">üìã Informa»õii Client</h4>
                    <div style="background: #f9fafb; padding: 1rem; border-radius: 8px;">
                        <p><strong>Nume:</strong> ${client.name}</p>
                        <p><strong>Telefon:</strong> ${client.phone}</p>
                        <p><strong>Email:</strong> ${client.email || 'Nu este specificat'}</p>
                        <p><strong>Adresa:</strong> ${client.address}</p>
                        <p><strong>Client din:</strong> ${new Date(client.createdAt).toLocaleDateString('ro-RO')}</p>
                    </div>
                </div>
                
                ${client.documents && client.documents.length > 0 ? `
                <div style="margin-bottom: 2rem;">
                    <h4 style="color: #111827; margin-bottom: 1rem;">üìé Documente (${client.documents.length})</h4>
                    <div style="display: grid; gap: 0.5rem;">
                        ${client.documents.map(doc => `
                            <div style="display: flex; justify-content: space-between; align-items: center; background: #f3f4f6; padding: 0.75rem; border-radius: 6px;">
                                <div>
                                    <div style="font-weight: 500;">${doc.name}</div>
                                    <div style="font-size: 0.875rem; color: #6b7280;">
                                        ${new Date(doc.uploadDate).toLocaleDateString('ro-RO')} ‚Ä¢ ${(doc.size / 1024).toFixed(1)} KB
                                    </div>
                                </div>
                                <button class="btn btn-primary" onclick="viewDocument('${doc.id}', ${clientId})" style="padding: 0.5rem;">
                                    üëÅÔ∏è
                                </button>
                            </div>
                        `).join('')}
                    </div>
                </div>
                ` : ''}
                
                ${clientAppointments.length > 0 ? `
                <div style="margin-bottom: 2rem;">
                    <h4 style="color: #111827; margin-bottom: 1rem;">üìÖ Istoric ProgramƒÉri (${clientAppointments.length})</h4>
                    <div style="display: grid; gap: 0.5rem;">
                        ${clientAppointments.slice(0, 5).map(apt => `
                            <div style="background: #f3f4f6; padding: 0.75rem; border-radius: 6px;">
                                <div style="font-weight: 500;">${apt.service}</div>
                                <div style="font-size: 0.875rem; color: #6b7280;">
                                    ${new Date(apt.date).toLocaleDateString('ro-RO')} ‚Ä¢ ${apt.time} ‚Ä¢ ${getStatusText(apt.status)}
                                </div>
                            </div>
                        `).join('')}
                        ${clientAppointments.length > 5 ? `<div style="text-align: center; color: #6b7280; font-size: 0.875rem;">... »ôi √ÆncƒÉ ${clientAppointments.length - 5} programƒÉri</div>` : ''}
                    </div>
                </div>
                ` : ''}
            `;
            
            document.getElementById('client-details-content').innerHTML = content;
            showModal('clientDetailsModal');
        }

        function viewDocument(docId, clientId) {
            const client = appData.clients.find(c => c.id === clientId);
            if (!client || !client.documents) return;
            
            const document = client.documents.find(d => d.id == docId);
            if (!document) return;
            
            if (document.type.startsWith('image/')) {
                // Show image in new window
                const newWindow = window.open();
                newWindow.document.write(`
                    <html>
                        <head><title>${document.name}</title></head>
                        <body style="margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; background: #000;">
                            <img src="${document.data}" style="max-width: 100%; max-height: 100%; object-fit: contain;">
                        </body>
                    </html>
                `);
            } else {
                // Download other files
                const link = document.createElement('a');
                link.href = document.data;
                link.download = document.name;
                link.click();
            }
        }

        function renderClients(clientsToRender = null) {
            const clients = clientsToRender || appData.clients;
            const container = document.getElementById('clients-list');
            
            if (clients.length === 0) {
                container.innerHTML = '<p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">Nu ave»õi clien»õi √ÆncƒÉ</p>';
                return;
            }

            container.innerHTML = clients.map(client => `
                <div class="list-item">
                    <div class="avatar">${client.name.charAt(0).toUpperCase()}</div>
                    <div class="list-content">
                        <div class="list-title">${client.name}</div>
                        <div class="list-subtitle">üìû ${client.phone} ‚Ä¢ üìç ${client.address}</div>
                        ${client.documents && client.documents.length > 0 ? `
                            <div class="text-xs" style="color: #10b981; margin-top: 0.25rem;">
                                üìé ${client.documents.length} document${client.documents.length > 1 ? 'e' : ''}
                            </div>
                        ` : ''}
                    </div>
                    <div class="flex gap-1" style="flex-direction: column;">
                        <div class="flex gap-1">
                            <button class="btn btn-primary" onclick="callClient('${client.phone}')" style="padding: 0.4rem; font-size: 0.75rem;">
                                üìû
                            </button>
                            <button class="btn btn-success" onclick="showClientDetails(${client.id})" style="padding: 0.4rem; font-size: 0.75rem;">
                                üëÅÔ∏è
                            </button>
                        </div>
                        <button class="btn btn-secondary" onclick="uploadClientDocument(${client.id})" style="padding: 0.3rem; font-size: 0.7rem;">
                            üìé Upload
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function searchClients(searchTerm) {
            if (!searchTerm.trim()) {
                renderClients();
                return;
            }

            const filtered = appData.clients.filter(client =>
                client.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                client.phone.includes(searchTerm) ||
                client.address.toLowerCase().includes(searchTerm.toLowerCase())
            );

            renderClients(filtered);
        }

        function callClient(phone) {
            window.open(`tel:${phone}`);
        }

        // Appointment functions
        function addAppointment() {
            const clientDropdown = document.getElementById('appointment-client-select');
            const manualNameInput = document.getElementById('appointment-client-name');
            const phone = document.getElementById('appointment-phone').value.trim();
            const service = document.getElementById('appointment-service').value;
            const address = document.getElementById('appointment-address').value.trim();
            const date = document.getElementById('appointment-date').value;
            const time = document.getElementById('appointment-time').value;
            const price = document.getElementById('appointment-price').value;
            const notes = document.getElementById('appointment-notes').value.trim();

            let clientName = '';
            let clientId = null;

            // DeterminƒÉ numele clientului
            if (clientDropdown.value === 'new-client') {
                clientName = manualNameInput.value.trim();
                if (!clientName) {
                    alert('Te rog sƒÉ introduci numele clientului!');
                    return;
                }
            } else if (clientDropdown.value === '') {
                alert('Te rog sƒÉ selectezi un client sau sƒÉ alegi "Client Nou"!');
                return;
            } else {
                // Client existent
                clientId = parseInt(clientDropdown.value);
                const client = appData.clients.find(c => c.id === clientId);
                if (client) {
                    clientName = client.name;
                }
            }

            if (!clientName || !phone || !service || !address || !date || !time) {
                alert('Te rog sƒÉ completezi toate c√¢mpurile obligatorii!');
                return;
            }

            const newAppointment = {
                id: Date.now(),
                clientId: clientId, // null pentru clien»õi noi, id pentru clien»õi existen»õi
                clientName: clientName,
                phone: phone,
                service: service,
                address: address,
                date: date,
                time: time,
                price: parseFloat(price) || 0,
                notes: notes,
                status: 'programat',
                createdAt: new Date().toISOString()
            };

            appData.appointments.push(newAppointment);
            
            // DacƒÉ este client nou »ôi nu existƒÉ deja √Æn baza de date, √Æl adƒÉugƒÉm
            if (clientId === null) {
                const existingClient = appData.clients.find(c => 
                    c.name.toLowerCase() === clientName.toLowerCase() && c.phone === phone
                );
                
                if (!existingClient) {
                    const newClient = {
                        id: Date.now() + 1, // +1 pentru a evita conflictul cu appointment id
                        name: clientName,
                        phone: phone,
                        email: '',
                        address: address,
                        createdAt: new Date().toISOString(),
                        totalServices: 0,
                        documents: []
                    };
                    appData.clients.push(newClient);
                }
            }
            
            saveData();
            updateUI();
            hideModal('addAppointmentModal');
        }

        function renderAppointments(appointmentsToRender = null) {
            const appointments = appointmentsToRender || appData.appointments;
            const container = document.getElementById('appointments-list');
            
            if (appointments.length === 0) {
                container.innerHTML = '<p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">Nu ave»õi programƒÉri √ÆncƒÉ</p>';
                return;
            }

            container.innerHTML = appointments.map(apt => `
                <div class="list-item">
                    <div class="avatar" style="background: ${getStatusColor(apt.status)};">${apt.clientName.charAt(0).toUpperCase()}</div>
                    <div class="list-content">
                        <div class="list-title">${apt.clientName} - ${apt.service}</div>
                        <div class="list-subtitle">
                            üìÖ ${new Date(apt.date).toLocaleDateString('ro-RO')} ‚Ä¢ ‚è∞ ${apt.time} ‚Ä¢ üìç ${apt.address}
                            ${apt.price ? ` ‚Ä¢ üí∞ ${apt.price} RON` : ''}
                        </div>
                        <div class="text-xs mt-2">
                            <span style="background: ${getStatusColor(apt.status)}; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">
                                ${getStatusText(apt.status)}
                            </span>
                        </div>
                    </div>
                    <div class="flex gap-1" style="flex-direction: column;">
                        <div class="flex gap-1">
                            ${apt.status === 'programat' ? `
                                <button class="btn btn-success" onclick="updateAppointmentStatus(${apt.id}, 'in-progres')" style="padding: 0.4rem; font-size: 0.75rem;">
                                    ‚ñ∂Ô∏è
                                </button>
                            ` : ''}
                            ${apt.status === 'in-progres' ? `
                                <button class="btn btn-success" onclick="updateAppointmentStatus(${apt.id}, 'finalizat')" style="padding: 0.4rem; font-size: 0.75rem;">
                                    ‚úÖ
                                </button>
                            ` : ''}
                            <button class="btn btn-primary" onclick="callClient('${apt.phone}')" style="padding: 0.4rem; font-size: 0.75rem;">
                                üìû
                            </button>
                        </div>
                        <div class="flex gap-1">
                            <button class="btn btn-success" onclick="sendAppointmentWhatsApp('${apt.phone}', '${apt.clientName}', '${apt.service}', '${apt.date}', '${apt.time}')" style="padding: 0.3rem; font-size: 0.7rem;">
                                üì±
                            </button>
                            <button class="btn btn-primary" onclick="sendAppointmentSMS('${apt.phone}', '${apt.clientName}', '${apt.service}', '${apt.date}', '${apt.time}')" style="padding: 0.3rem; font-size: 0.7rem;">
                                üí¨
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function searchAppointments(searchTerm) {
            if (!searchTerm.trim()) {
                renderAppointments();
                return;
            }

            const filtered = appData.appointments.filter(apt =>
                apt.clientName.toLowerCase().includes(searchTerm.toLowerCase()) ||
                apt.service.toLowerCase().includes(searchTerm.toLowerCase()) ||
                apt.address.toLowerCase().includes(searchTerm.toLowerCase())
            );

            renderAppointments(filtered);
        }

        function updateAppointmentStatus(id, newStatus) {
            const appointment = appData.appointments.find(apt => apt.id === id);
            if (appointment) {
                appointment.status = newStatus;
                if (newStatus === 'finalizat') {
                    appointment.completedAt = new Date().toISOString();
                }
                saveData();
                updateUI();
            }
        }

        function getStatusColor(status) {
            switch (status) {
                case 'finalizat': return '#10b981';
                case 'in-progres': return '#f59e0b';
                default: return '#3b82f6';
            }
        }

        function getStatusText(status) {
            switch (status) {
                case 'finalizat': return 'Finalizat';
                case 'in-progres': return '√én Progres';
                default: return 'Programat';
            }
        }

        // Reminder functions
        function addReminder() {
            const clientDropdown = document.getElementById('reminder-client-select');
            const manualNameInput = document.getElementById('reminder-client-name');
            const phone = document.getElementById('reminder-phone').value.trim();
            const type = document.getElementById('reminder-type').value;
            const date = document.getElementById('reminder-date').value;
            const message = document.getElementById('reminder-message').value.trim();

            let clientName = '';
            let clientId = null;

            // DeterminƒÉ numele clientului
            if (clientDropdown.value === 'new-client') {
                clientName = manualNameInput.value.trim();
                if (!clientName) {
                    alert('Te rog sƒÉ introduci numele clientului!');
                    return;
                }
            } else if (clientDropdown.value === '') {
                alert('Te rog sƒÉ selectezi un client sau sƒÉ alegi "Client Nou"!');
                return;
            } else {
                // Client existent
                clientId = parseInt(clientDropdown.value);
                const client = appData.clients.find(c => c.id === clientId);
                if (client) {
                    clientName = client.name;
                }
            }

            if (!clientName || !phone || !type || !date || !message) {
                alert('Te rog sƒÉ completezi toate c√¢mpurile obligatorii!');
                return;
            }

            const newReminder = {
                id: Date.now(),
                clientId: clientId,
                clientName: clientName,
                phone: phone,
                type: type,
                reminderDate: date,
                message: message,
                sent: false,
                createdAt: new Date().toISOString()
            };

            appData.reminders.push(newReminder);
            saveData();
            updateUI();
            hideModal('addReminderModal');
        }

        function updateReminderMessage() {
            const type = document.getElementById('reminder-type').value;
            const messageField = document.getElementById('reminder-message');
            
            const templates = {
                'verificare-instalatii-gaz': 'BunƒÉ ziua! VƒÉ aducem aminte cƒÉ se apropie termenul pentru verificarea tehnicƒÉ a instala»õiilor de gaze. VƒÉ rugƒÉm sƒÉ ne contacta»õi pentru programare. Ad Instal Gaz SRL - 0762 614 401',
                'verificare-centrale-termice': 'BunƒÉ ziua! Este timpul pentru revizia/verificarea centralei termice. Contacta»õi-ne pentru programare. Ad Instal Gaz SRL - 0762 614 401',
                'urmƒÉrire-factura': 'BunƒÉ ziua! VƒÉ aducem aminte despre factura pentru serviciile prestate. Pentru detalii, contacta»õi-ne la 0762 614 401. Ad Instal Gaz SRL'
            };

            messageField.value = templates[type] || '';
        }

        function renderReminders() {
            const container = document.getElementById('active-reminders');
            const activeReminders = appData.reminders.filter(r => !r.sent);
            
            if (activeReminders.length === 0) {
                container.innerHTML = '<p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">Nu existƒÉ reminder-e active</p>';
                return;
            }

            container.innerHTML = activeReminders.map(reminder => `
                <div class="list-item">
                    <div class="avatar">üîî</div>
                    <div class="list-content">
                        <div class="list-title">${reminder.clientName}</div>
                        <div class="list-subtitle">${reminder.message.substring(0, 100)}...</div>
                        <div class="text-xs" style="color: #6b7280;">
                            Programat: ${new Date(reminder.reminderDate).toLocaleDateString('ro-RO')}
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <button class="btn btn-success" onclick="sendWhatsApp('${reminder.phone}', '${reminder.message}')" style="padding: 0.5rem;">
                            üì±
                        </button>
                        <button class="btn btn-primary" onclick="sendSMS('${reminder.phone}', '${reminder.message}')" style="padding: 0.5rem;">
                            üí¨
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function sendWhatsApp(phone, message) {
            const cleanPhone = phone.replace(/\D/g, '').slice(-9);
            const whatsappURL = `https://wa.me/40${cleanPhone}?text=${encodeURIComponent(message)}`;
            window.open(whatsappURL, '_blank');
        }

        function sendSMS(phone, message) {
            const cleanPhone = phone.replace(/\D/g, '').slice(-9);
            const smsURL = `sms:+40${cleanPhone}?body=${encodeURIComponent(message)}`;
            window.location.href = smsURL;
        }

        // WhatsApp/SMS for appointments
        function sendAppointmentWhatsApp(phone, clientName, service, date, time) {
            const formattedDate = new Date(date).toLocaleDateString('ro-RO');
            const message = `BunƒÉ ziua ${clientName}! VƒÉ reamintim despre programarea pentru ${service} pe data de ${formattedDate} la ora ${time}. Ad Instal Gaz SRL - 0762 614 401`;
            sendWhatsApp(phone, message);
        }

        function sendAppointmentSMS(phone, clientName, service, date, time) {
            const formattedDate = new Date(date).toLocaleDateString('ro-RO');
            const message = `BunƒÉ ziua ${clientName}! Programare ${service} pe ${formattedDate} la ${time}. Ad Instal Gaz SRL - 0762 614 401`;
            sendSMS(phone, message);
        }

        // Tomorrow work plan functions
        function renderTomorrowTasks() {
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            const tomorrowStr = tomorrow.toISOString().split('T')[0];
            
            // Tomorrow appointments
            const tomorrowAppointments = appData.appointments.filter(apt => apt.date === tomorrowStr);
            const appointmentsContainer = document.getElementById('tomorrow-appointments');
            
            if (tomorrowAppointments.length === 0) {
                appointmentsContainer.innerHTML = '<p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">Nu ave»õi programƒÉri m√¢ine</p>';
            } else {
                appointmentsContainer.innerHTML = tomorrowAppointments.map(apt => `
                    <div class="list-item">
                        <div class="avatar" style="background: ${getStatusColor(apt.status)};">${apt.clientName.charAt(0).toUpperCase()}</div>
                        <div class="list-content">
                            <div class="list-title">${apt.time} - ${apt.clientName}</div>
                            <div class="list-subtitle">${apt.service} ‚Ä¢ üìç ${apt.address}</div>
                            <div class="text-xs" style="color: #6b7280;">üìû ${apt.phone}</div>
                        </div>
                        <div class="flex gap-1">
                            <button class="btn btn-primary" onclick="callClient('${apt.phone}')" style="padding: 0.4rem; font-size: 0.75rem;">üìû</button>
                            <button class="btn btn-success" onclick="sendAppointmentWhatsApp('${apt.phone}', '${apt.clientName}', '${apt.service}', '${apt.date}', '${apt.time}')" style="padding: 0.4rem; font-size: 0.75rem;">üì±</button>
                        </div>
                    </div>
                `).join('');
            }
            
            // Tomorrow reminders
            const tomorrowReminders = appData.reminders.filter(r => r.reminderDate === tomorrowStr && !r.sent);
            const remindersContainer = document.getElementById('tomorrow-reminders');
            
            if (tomorrowReminders.length === 0) {
                remindersContainer.innerHTML = '<p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">Nu ave»õi reminder-e m√¢ine</p>';
            } else {
                remindersContainer.innerHTML = tomorrowReminders.map(reminder => `
                    <div class="list-item">
                        <div class="avatar">üîî</div>
                        <div class="list-content">
                            <div class="list-title">${reminder.clientName}</div>
                            <div class="list-subtitle">${reminder.message.substring(0, 50)}...</div>
                            <div class="text-xs" style="color: #6b7280;">üìû ${reminder.phone}</div>
                        </div>
                        <div class="flex gap-1">
                            <button class="btn btn-success" onclick="sendWhatsApp('${reminder.phone}', '${reminder.message}')" style="padding: 0.4rem; font-size: 0.75rem;">üì±</button>
                            <button class="btn btn-primary" onclick="sendSMS('${reminder.phone}', '${reminder.message}')" style="padding: 0.4rem; font-size: 0.75rem;">üí¨</button>
                        </div>
                    </div>
                `).join('');
            }
            
            // Update tomorrow stats
            if (document.getElementById('tomorrow-total-tasks')) {
                document.getElementById('tomorrow-total-tasks').textContent = tomorrowAppointments.length + tomorrowReminders.length;
                document.getElementById('tomorrow-appointments-count').textContent = tomorrowAppointments.length;
                document.getElementById('tomorrow-reminders-count').textContent = tomorrowReminders.length;
            }
        }

        function exportTomorrowWorkPlan() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            const tomorrowStr = tomorrow.toISOString().split('T')[0];
            const tomorrowFormatted = tomorrow.toLocaleDateString('ro-RO');
            
            // Title
            doc.setFontSize(20);
            doc.text('FI»òA DE LUCRU', 20, 20);
            doc.setFontSize(16);
            doc.text(`Ad Instal Gaz SRL - ${tomorrowFormatted}`, 20, 30);
            
            let yPosition = 50;
            
            // Appointments
            const tomorrowAppointments = appData.appointments.filter(apt => apt.date === tomorrowStr);
            if (tomorrowAppointments.length > 0) {
                doc.setFontSize(14);
                doc.text('PROGRAMƒÇRI:', 20, yPosition);
                yPosition += 10;
                
                const appointmentsData = tomorrowAppointments.map(apt => [
                    apt.time,
                    apt.clientName,
                    apt.service,
                    apt.address,
                    apt.phone
                ]);
                
                doc.autoTable({
                    startY: yPosition,
                    head: [['Ora', 'Client', 'Serviciu', 'Adresa', 'Telefon']],
                    body: appointmentsData,
                    margin: { left: 20 },
                    styles: { fontSize: 10 }
                });
                
                yPosition = doc.lastAutoTable.finalY + 20;
            }
            
            // Reminders
            const tomorrowReminders = appData.reminders.filter(r => r.reminderDate === tomorrowStr && !r.sent);
            if (tomorrowReminders.length > 0) {
                doc.setFontSize(14);
                doc.text('REMINDER-E DE TRIMIS:', 20, yPosition);
                yPosition += 10;
                
                const remindersData = tomorrowReminders.map(r => [
                    r.clientName,
                    r.phone,
                    r.type,
                    r.message.substring(0, 50) + '...'
                ]);
                
                doc.autoTable({
                    startY: yPosition,
                    head: [['Client', 'Telefon', 'Tip', 'Mesaj']],
                    body: remindersData,
                    margin: { left: 20 },
                    styles: { fontSize: 9 }
                });
            }
            
            doc.save(`Fisa-Lucru-${tomorrowFormatted}.pdf`);
        }

        // Reminder automation functions
        function sendTomorrowReminders() {
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            const tomorrowStr = tomorrow.toISOString().split('T')[0];
            
            const tomorrowReminders = appData.reminders.filter(r => r.reminderDate === tomorrowStr && !r.sent);
            
            if (tomorrowReminders.length === 0) {
                alert('Nu existƒÉ reminder-e programate pentru m√¢ine.');
                return;
            }
            
            if (confirm(`Vrei sƒÉ trimi»õi ${tomorrowReminders.length} reminder-e prin WhatsApp pentru m√¢ine?`)) {
                tomorrowReminders.forEach(reminder => {
                    sendWhatsApp(reminder.phone, reminder.message);
                    // Mark as sent
                    reminder.sent = true;
                });
                
                saveData();
                updateUI();
                alert(`‚úÖ ${tomorrowReminders.length} reminder-e trimise cu succes!`);
            }
        }

        function sendTodayReminders() {
            const today = new Date().toISOString().split('T')[0];
            const todayReminders = appData.reminders.filter(r => r.reminderDate === today && !r.sent);
            
            if (todayReminders.length === 0) {
                alert('Nu existƒÉ reminder-e programate pentru azi.');
                return;
            }
            
            if (confirm(`Vrei sƒÉ trimi»õi ${todayReminders.length} reminder-e prin WhatsApp pentru azi?`)) {
                todayReminders.forEach(reminder => {
                    sendWhatsApp(reminder.phone, reminder.message);
                    // Mark as sent
                    reminder.sent = true;
                });
                
                saveData();
                updateUI();
                alert(`‚úÖ ${todayReminders.length} reminder-e trimise cu succes!`);
            }
        }

        // Export functions
        function exportToExcel() {
            const wb = XLSX.utils.book_new();
            
            // Clients sheet
            const clientsData = appData.clients.map(client => ({
                'Nume': client.name,
                'Telefon': client.phone,
                'Email': client.email || '',
                'Adresa': client.address,
                'Documente': client.documents ? client.documents.length : 0,
                'Data AdƒÉugƒÉrii': new Date(client.createdAt).toLocaleDateString('ro-RO')
            }));
            const clientsWS = XLSX.utils.json_to_sheet(clientsData);
            XLSX.utils.book_append_sheet(wb, clientsWS, 'Clien»õi');
            
            // Appointments sheet
            const appointmentsData = appData.appointments.map(apt => ({
                'Client': apt.clientName,
                'Telefon': apt.phone,
                'Serviciu': apt.service,
                'Data': new Date(apt.date).toLocaleDateString('ro-RO'),
                'Ora': apt.time,
                'Adresa': apt.address,
                'Pre»õ (RON)': apt.price || 0,
                'Status': getStatusText(apt.status),
                'Observa»õii': apt.notes || '',
                'Data CreƒÉrii': new Date(apt.createdAt).toLocaleDateString('ro-RO')
            }));
            const appointmentsWS = XLSX.utils.json_to_sheet(appointmentsData);
            XLSX.utils.book_append_sheet(wb, appointmentsWS, 'ProgramƒÉri');
            
            // Reminders sheet
            const remindersData = appData.reminders.map(reminder => ({
                'Client': reminder.clientName,
                'Telefon': reminder.phone,
                'Tip': reminder.type,
                'Data Reminder': new Date(reminder.reminderDate).toLocaleDateString('ro-RO'),
                'Mesaj': reminder.message,
                'Trimis': reminder.sent ? 'Da' : 'Nu',
                'Data CreƒÉrii': new Date(reminder.createdAt).toLocaleDateString('ro-RO')
            }));
            const remindersWS = XLSX.utils.json_to_sheet(remindersData);
            XLSX.utils.book_append_sheet(wb, remindersWS, 'Reminder-uri');
            
            // Statistics sheet
            const stats = calculateStats();
            const statsData = [
                { 'Indicator': 'Total Clien»õi', 'Valoare': stats.totalClients },
                { 'Indicator': 'ProgramƒÉri Luna Aceasta', 'Valoare': stats.monthAppointments },
                { 'Indicator': 'ProgramƒÉri √Æn A»ôteptare', 'Valoare': stats.pendingAppointments },
                { 'Indicator': 'ProgramƒÉri Finalizate', 'Valoare': stats.completedAppointments },
                { 'Indicator': 'Venituri Luna (RON)', 'Valoare': stats.monthRevenue },
                { 'Indicator': 'ActivitƒÉ»õi M√¢ine', 'Valoare': stats.tomorrowTasks }
            ];
            const statsWS = XLSX.utils.json_to_sheet(statsData);
            XLSX.utils.book_append_sheet(wb, statsWS, 'Statistici');
            
            // Save file
            const today = new Date().toISOString().split('T')[0];
            XLSX.writeFile(wb, `AdInstalGaz-Raport-${today}.xlsx`);
        }

        function exportToPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Title
            doc.setFontSize(20);
            doc.text('Ad Instal Gaz SRL - Raport', 20, 20);
            
            doc.setFontSize(12);
            doc.text(`Data: ${new Date().toLocaleDateString('ro-RO')}`, 20, 30);
            
            let yPosition = 50;
            
            // Statistics
            doc.setFontSize(16);
            doc.text('Statistici Generale', 20, yPosition);
            yPosition += 10;
            
            const stats = calculateStats();
            const statsData = [
                ['Total Clien»õi', stats.totalClients],
                ['ProgramƒÉri Luna Aceasta', stats.monthAppointments],
                ['ProgramƒÉri √Æn A»ôteptare', stats.pendingAppointments],
                ['ProgramƒÉri Finalizate', stats.completedAppointments],
                ['Venituri Luna (RON)', stats.monthRevenue],
                ['ActivitƒÉ»õi M√¢ine', stats.tomorrowTasks]
            ];
            
            doc.autoTable({
                startY: yPosition,
                head: [['Indicator', 'Valoare']],
                body: statsData,
                margin: { left: 20 },
                styles: { fontSize: 10 }
            });
            
            yPosition = doc.lastAutoTable.finalY + 20;
            
            // Appointments
            if (appData.appointments.length > 0) {
                doc.setFontSize(16);
                doc.text('ProgramƒÉri', 20, yPosition);
                yPosition += 10;
                
                const appointmentsData = appData.appointments.slice(0, 20).map(apt => [
                    apt.clientName,
                    apt.service,
                    new Date(apt.date).toLocaleDateString('ro-RO'),
                    apt.time,
                    getStatusText(apt.status),
                    apt.price ? `${apt.price} RON` : '-'
                ]);
                
                doc.autoTable({
                    startY: yPosition,
                    head: [['Client', 'Serviciu', 'Data', 'Ora', 'Status', 'Pre»õ']],
                    body: appointmentsData,
                    margin: { left: 20 },
                    styles: { fontSize: 8 }
                });
            }
            
            // Save PDF
            const today = new Date().toISOString().split('T')[0];
            doc.save(`AdInstalGaz-Raport-${today}.pdf`);
        }

        // Backup and restore functions
        function backupData() {
            const backupData = {
                ...appData,
                backupInfo: {
                    version: '1.0',
                    timestamp: new Date().toISOString(),
                    totalClients: appData.clients.length,
                    totalAppointments: appData.appointments.length,
                    totalReminders: appData.reminders.length
                }
            };
            
            const blob = new Blob([JSON.stringify(backupData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `AdInstalGaz-Backup-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            alert('‚úÖ Backup realizat cu succes!');
        }

        function restoreData(input) {
            const file = input.files[0];
            if (!file) return;
            
            if (!file.name.endsWith('.json')) {
                alert('‚ùå Te rog sƒÉ selectezi un fi»ôier JSON valid!');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const backupData = JSON.parse(e.target.result);
                    
                    // Validate backup data
                    if (!backupData.clients || !backupData.appointments || !backupData.reminders) {
                        throw new Error('Fi»ôierul nu con»õine date valide!');
                    }
                    
                    if (confirm('ATEN»öIE!\nAceasta va √Ænlocui TOATE datele curente cu cele din backup.\nE»ôti sigur cƒÉ vrei sƒÉ continui?')) {
                        // Restore data
                        appData.clients = backupData.clients || [];
                        appData.appointments = backupData.appointments || [];
                        appData.reminders = backupData.reminders || [];
                        
                        // Ensure documents array exists for all clients
                        appData.clients.forEach(client => {
                            if (!client.documents) {
                                client.documents = [];
                            }
                        });
                        
                        saveData();
                        updateUI();
                        
                        const info = backupData.backupInfo;
                        if (info) {
                            alert(`‚úÖ Backup restaurat cu succes!\n\nInfo backup:\n- Data: ${new Date(info.timestamp).toLocaleDateString('ro-RO')}\n- Clien»õi: ${info.totalClients}\n- ProgramƒÉri: ${info.totalAppointments}\n- Reminder-uri: ${info.totalReminders}`);
                        } else {
                            alert('‚úÖ Date restaurate cu succes!');
                        }
                    }
                } catch (error) {
                    alert('‚ùå Eroare la citirea fi»ôierului backup!\n\n' + error.message);
                }
                
                // Reset file input
                input.value = '';
            };
            reader.readAsText(file);
        }

        // Delete all data function
        function deleteAllData() {
            const confirmation = document.getElementById('delete-confirmation').value;
            const checkbox = document.getElementById('delete-checkbox').checked;
            
            if (confirmation !== 'STERGE TOTUL') {
                alert('Trebuie sƒÉ scrii exact "STERGE TOTUL" pentru confirmare!');
                return;
            }
            
            if (!checkbox) {
                alert('Trebuie sƒÉ bifezi cƒÉsu»õa de confirmare!');
                return;
            }
            
            if (confirm('ULTIMA CONFIRMARE!\nE»ôti 100% sigur cƒÉ vrei sƒÉ »ôtergi TOATE datele?\nAceastƒÉ ac»õiune NU poate fi anulatƒÉ!')) {
                // Clear all data
                appData = {
                    clients: [],
                    appointments: [],
                    reminders: []
                };
                
                // Clear localStorage
                localStorage.removeItem('adinstalgaz_data');
                
                // Update UI
                updateUI();
                hideModal('deleteDataModal');
                
                alert('‚úÖ Toate datele au fost »ôterse cu succes!');
            }
        }

        // Statistics and reporting
        function calculateStats() {
            const now = new Date();
            const currentMonth = now.getMonth();
            const currentYear = now.getFullYear();

            return {
                totalClients: appData.clients.length,
                monthAppointments: appData.appointments.filter(apt => {
                    const aptDate = new Date(apt.date);
                    return aptDate.getMonth() === currentMonth && aptDate.getFullYear() === currentYear;
                }).length,
                pendingAppointments: appData.appointments.filter(apt => apt.status === 'programat').length,
                completedAppointments: appData.appointments.filter(apt => apt.status === 'finalizat').length,
                monthRevenue: appData.appointments
                    .filter(apt => {
                        if (apt.status !== 'finalizat' || !apt.completedAt) return false;
                        const completedDate = new Date(apt.completedAt);
                        return completedDate.getMonth() === currentMonth && completedDate.getFullYear() === currentYear;
                    })
                    .reduce((sum, apt) => sum + (apt.price || 0), 0),
                tomorrowTasks: getTomorrowTasks()
            };
        }

        function getTomorrowTasks() {
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            const tomorrowStr = tomorrow.toISOString().split('T')[0];
            
            const tomorrowAppointments = appData.appointments.filter(apt => apt.date === tomorrowStr);
            const tomorrowReminders = appData.reminders.filter(r => r.reminderDate === tomorrowStr && !r.sent);
            
            return tomorrowAppointments.length + tomorrowReminders.length;
        }

        function updateUI() {
            const stats = calculateStats();
            
            // Update stats
            document.getElementById('total-clients').textContent = stats.totalClients;
            document.getElementById('month-appointments').textContent = stats.monthAppointments;
            document.getElementById('pending-appointments').textContent = stats.pendingAppointments;
            document.getElementById('month-revenue').textContent = stats.monthRevenue + ' RON';
            document.getElementById('tomorrow-tasks').textContent = stats.tomorrowTasks;
            
            // Update counts
            document.getElementById('clients-count').textContent = stats.totalClients;
            document.getElementById('appointments-count').textContent = appData.appointments.length;
            
            // Update reports
            document.getElementById('report-appointments').textContent = stats.monthAppointments;
            document.getElementById('report-completed').textContent = stats.completedAppointments;
            document.getElementById('report-revenue').textContent = stats.monthRevenue + ' RON';
            
            // Render lists
            renderClients();
            renderAppointments();
            renderReminders();
            renderRecentActivity();
            renderTomorrowTasks();
        }

        function renderRecentActivity() {
            // Recent appointments
            const recentAppointments = appData.appointments
                .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
                .slice(0, 5);
            
            const appointmentsContainer = document.getElementById('recent-appointments');
            if (recentAppointments.length === 0) {
                appointmentsContainer.innerHTML = '<p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">Nu existƒÉ programƒÉri √ÆncƒÉ</p>';
            } else {
                appointmentsContainer.innerHTML = recentAppointments.map(apt => `
                    <div class="list-item" style="padding: 0.75rem 0;">
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: ${getStatusColor(apt.status)};"></div>
                        <div class="list-content">
                            <div class="list-title">${apt.clientName}</div>
                            <div class="list-subtitle">${apt.service}</div>
                        </div>
                        <div class="text-xs" style="color: #6b7280;">
                            ${new Date(apt.date).toLocaleDateString('ro-RO')}
                        </div>
                    </div>
                `).join('');
            }
            
            // Recent clients
            const recentClients = appData.clients
                .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
                .slice(0, 5);
            
            const clientsContainer = document.getElementById('recent-clients');
            if (recentClients.length === 0) {
                clientsContainer.innerHTML = '<p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">Nu existƒÉ clien»õi √ÆncƒÉ</p>';
            } else {
                clientsContainer.innerHTML = recentClients.map(client => `
                    <div class="list-item" style="padding: 0.75rem 0;">
                        <div class="avatar" style="width: 32px; height: 32px; font-size: 0.875rem;">${client.name.charAt(0).toUpperCase()}</div>
                        <div class="list-content">
                            <div class="list-title">${client.name}</div>
                            <div class="list-subtitle">${client.phone}</div>
                        </div>
                        <button class="btn btn-primary" onclick="callClient('${client.phone}')" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;">
                            üìû
                        </button>
                    </div>
                `).join('');
            }
        }

        // Set minimum date for date inputs
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date().toISOString().split('T')[0];
            const dateInputs = document.querySelectorAll('input[type="date"]');
            dateInputs.forEach(input => {
                input.min = today;
            });
        });
    </script>
</body>
</html>
