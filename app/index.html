<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ad Instal Gaz SRL - Management Business</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üî•</text></svg>">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="AdInstalGaz">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js';
        import { getFirestore, collection, addDoc, getDocs, doc, updateDoc, deleteDoc, onSnapshot, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js';
        import { getAuth, signInAnonymously, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js';
        
        // Firebase config - Configura»õia ta realƒÉ
        const firebaseConfig = {
            apiKey: "AIzaSyD9yoIQ__cK0zIPlvSRlu1h7O1MtmrfLXA",
            authDomain: "adinstalgaz-pwa.firebaseapp.com",
            projectId: "adinstalgaz-pwa",
            storageBucket: "adinstalgaz-pwa.firebasestorage.app",
            messagingSenderId: "623851795901",
            appId: "1:623851795901:web:63072fdef30693f4698ed4"
        };
        
        // Initialize Firebase
        window.firebaseApp = initializeApp(firebaseConfig);
        window.db = getFirestore(window.firebaseApp);
        window.auth = getAuth(window.firebaseApp);
        
        // Make Firebase functions available globally
        window.firebaseFunctions = {
            collection, addDoc, getDocs, doc, updateDoc, deleteDoc, onSnapshot, serverTimestamp,
            signInAnonymously, onAuthStateChanged
        };
    </script>
    
    <!-- Libraries for Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f3f4f6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Sync Status */
        .sync-status {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 1001;
            background: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.75rem;
        }

        .sync-status.online {
            border-color: #10b981;
            background: #f0fdf4;
        }

        .sync-status.offline {
            border-color: #ef4444;
            background: #fef2f2;
        }

        .sync-status.syncing {
            border-color: #f59e0b;
            background: #fffbeb;
        }

        .sync-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #6b7280;
        }

        .sync-dot.online {
            background: #10b981;
        }

        .sync-dot.offline {
            background: #ef4444;
        }

        .sync-dot.syncing {
            background: #f59e0b;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* PWA Install Banner */
        .install-banner {
            display: none;
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            color: white;
            padding: 1rem;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            z-index: 1002;
        }

        .install-banner.show {
            display: block;
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .install-content {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .install-text {
            flex: 1;
        }

        .install-text h4 {
            font-size: 1rem;
            margin-bottom: 0.25rem;
        }

        .install-text p {
            font-size: 0.875rem;
            opacity: 0.9;
        }

        .install-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .install-btn {
            padding: 0.5rem 1rem;
            border-radius: 6px;
            border: none;
            font-size: 0.875rem;
            cursor: pointer;
            font-weight: 500;
        }

        .install-btn.primary {
            background: white;
            color: #3b82f6;
        }

        .install-btn.secondary {
            background: rgba(255,255,255,0.2);
            color: white;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #ffffff 0%, #f0f4f8 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid rgba(255,255,255,0.3);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .logo svg {
            width: 32px;
            height: 32px;
        }

        .header-text h1 {
            font-size: 1.5rem;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .header-text p {
            font-size: 0.9rem;
            color: #e2e8f0;
            font-weight: 500;
        }

        .header-date {
            text-align: right;
        }

        .header-date p:first-child {
            font-size: 0.9rem;
            color: #e2e8f0;
        }

        .header-date p:last-child {
            font-weight: 600;
        }

        /* Navigation */
        .nav {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 1rem 0;
        }

        .nav-container {
            display: flex;
            gap: 0.5rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
        }

        .nav-button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            border: none;
            background: #f3f4f6;
            color: #374151;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .nav-button:hover {
            background: #e5e7eb;
        }

        .nav-button.active {
            background: #2563eb;
            color: white;
        }

        .nav-button .icon {
            width: 18px;
            height: 18px;
        }

        /* Main Content */
        .main {
            padding: 2rem 0;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid #e5e7eb;
        }

        .card-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .card-content {
            padding: 1.5rem;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #111827;
            margin-bottom: 0.5rem;
        }

        /* Dashboard */
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .dashboard-title {
            font-size: 2rem;
            font-weight: bold;
            color: #111827;
        }

        .last-update {
            font-size: 0.875rem;
            color: #6b7280;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid #e5e7eb;
        }

        .stat-card.special {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            color: white;
        }

        .stat-header {
            display: flex;
            justify-content: between;
            align-items: center;
        }

        .stat-content {
            flex: 1;
        }

        .stat-label {
            font-size: 0.875rem;
            color: #6b7280;
            margin-bottom: 0.25rem;
        }

        .stat-card.special .stat-label {
            color: #bfdbfe;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #111827;
        }

        .stat-card.special .stat-value {
            color: white;
        }

        .stat-subtext {
            font-size: 0.75rem;
            color: #bfdbfe;
            margin-top: 0.25rem;
        }

        .stat-icon {
            width: 24px;
            height: 24px;
            margin-left: 1rem;
        }

        /* Forms */
        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            margin-bottom: 0.5rem;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 0.875rem;
            color: #111827;
            background: white;
            transition: border-color 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 0.875rem;
            color: #111827;
            background: white;
            cursor: pointer;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary {
            background: #3b82f6;
            color: white;
        }

        .btn-primary:hover {
            background: #2563eb;
        }

        .btn-success {
            background: #10b981;
            color: white;
        }

        .btn-success:hover {
            background: #059669;
        }

        .btn-secondary {
            background: #6b7280;
            color: white;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        .btn-warning {
            background: #f59e0b;
            color: white;
        }

        .btn-warning:hover {
            background: #d97706;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #111827;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #6b7280;
            cursor: pointer;
            padding: 0.25rem;
        }

        .modal-close:hover {
            color: #374151;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            padding: 1.5rem;
            border-top: 1px solid #e5e7eb;
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        /* Lists */
        .list-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-bottom: 1px solid #f3f4f6;
        }

        .list-item:last-child {
            border-bottom: none;
        }

        .avatar {
            width: 40px;
            height: 40px;
            background: #dbeafe;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #1d4ed8;
        }

        .list-content {
            flex: 1;
        }

        .list-title {
            font-weight: 500;
            color: #111827;
            margin-bottom: 0.25rem;
        }

        .list-subtitle {
            font-size: 0.875rem;
            color: #6b7280;
        }

        /* Document Management Styles */
        .document-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .document-card {
            background: #f8fafc;
            border: 2px dashed #cbd5e1;
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .document-card:hover {
            border-color: #3b82f6;
            background: #eff6ff;
        }

        .document-card.has-document {
            background: white;
            border: 1px solid #e5e7eb;
            border-left: 4px solid #10b981;
        }

        .document-category {
            background: #1e3c72;
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            margin-bottom: 0.5rem;
            display: inline-block;
        }

        .document-preview {
            width: 100%;
            height: 120px;
            background: #f3f4f6;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.5rem;
            overflow: hidden;
        }

        .document-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: cover;
        }

        .document-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
            justify-content: center;
        }

        /* Camera Styles */
        .camera-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
        }

        .camera-preview {
            width: 100%;
            height: 300px;
            background: #000;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }

        .camera-preview video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .camera-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border: 2px dashed rgba(255, 255, 255, 0.5);
            margin: 20px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.875rem;
            text-align: center;
            background: rgba(0, 0, 0, 0.3);
        }

        .camera-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 1rem;
        }

        .capture-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #ef4444;
            border: 4px solid white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            transition: all 0.2s;
        }

        .capture-btn:hover {
            background: #dc2626;
            transform: scale(1.05);
        }

        /* Notification System */
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background: white;
            border-radius: 8px;
            padding: 1rem 1.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            border-left: 4px solid #3b82f6;
            z-index: 1003;
            max-width: 400px;
            transform: translateX(450px);
            transition: transform 0.3s ease-out;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            border-left-color: #10b981;
        }

        .notification.warning {
            border-left-color: #f59e0b;
        }

        .notification.error {
            border-left-color: #ef4444;
        }

        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .notification-title {
            font-weight: 600;
            color: #111827;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .notification-close {
            background: none;
            border: none;
            font-size: 1.2rem;
            color: #6b7280;
            cursor: pointer;
            padding: 0.25rem;
        }

        .notification-close:hover {
            color: #374151;
        }

        .notification-body {
            color: #6b7280;
            font-size: 0.875rem;
            line-height: 1.4;
        }

        .notification-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .notification-btn {
            padding: 0.5rem 1rem;
            border-radius: 4px;
            border: none;
            font-size: 0.875rem;
            cursor: pointer;
            font-weight: 500;
        }

        .notification-btn.primary {
            background: #3b82f6;
            color: white;
        }

        .notification-btn.secondary {
            background: #f3f4f6;
            color: #374151;
        }

        .notification-btn:hover {
            opacity: 0.9;
        }

        /* Modal Enhancements */
        .modal-content.large {
            max-width: 600px;
        }

        .info-modal .modal-body {
            max-height: 60vh;
            overflow-y: auto;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .notification {
                top: 70px;
                left: 10px;
                right: 10px;
                max-width: none;
                transform: translateY(-200px);
            }

            .notification.show {
                transform: translateY(0);
            }
        }
            .header-content {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .dashboard-header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .modal-content {
                margin: 1rem;
            }

            .install-banner {
                bottom: 10px;
                left: 10px;
                right: 10px;
            }

            .install-content {
                flex-direction: column;
                text-align: center;
            }

            .install-buttons {
                justify-content: center;
            }

            .document-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }

        /* Utility Classes */
        .hidden { display: none !important; }
        .text-center { text-align: center; }
        .text-sm { font-size: 0.875rem; }
        .text-xs { font-size: 0.75rem; }
        .font-medium { font-weight: 500; }
        .font-bold { font-weight: bold; }
        .mb-4 { margin-bottom: 1rem; }
        .mt-4 { margin-top: 1rem; }
        .gap-4 { gap: 1rem; }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
    </style>
</head>
<body>
    <!-- Sync Status -->
    <div id="sync-status" class="sync-status offline">
        <div class="sync-dot offline" id="sync-dot"></div>
        <span id="sync-text">Offline</span>
    </div>

    <!-- PWA Install Banner -->
    <div id="install-banner" class="install-banner">
        <div class="install-content">
            <div class="install-text">
                <h4>üì± InstaleazƒÉ aplica»õia</h4>
                <p>Folose»ôte Ad Instal Gaz ca aplica»õie nativƒÉ pe telefon sau desktop!</p>
            </div>
            <div class="install-buttons">
                <button class="install-btn primary" onclick="installPWA()">InstaleazƒÉ</button>
                <button class="install-btn secondary" onclick="dismissInstallBanner()">Mai t√¢rziu</button>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo-container">
                    <div class="logo">
                        <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <path d="M50 15 C60 25, 65 35, 65 45 C65 55, 60 65, 50 65 C40 65, 35 55, 35 45 C35 35, 40 25, 50 15 Z" fill="url(#flameGradient)"/>
                            <rect x="20" y="70" width="60" height="8" rx="4" fill="#2a5298"/>
                            <rect x="15" y="78" width="70" height="6" rx="3" fill="#1e3c72"/>
                            <path d="M25 50 L35 50 L35 45 L40 45 L40 55 L35 55 L35 50 L30 50 L30 60 L25 60 Z" fill="#ff6b35"/>
                            <defs>
                                <linearGradient id="flameGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#ff6b35;stop-opacity:1" />
                                    <stop offset="50%" style="stop-color:#ff8c42;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#ffa726;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                        </svg>
                    </div>
                    <div class="header-text">
                        <h1>Ad Instal Gaz SRL</h1>
                        <p>Management Business ‚Ä¢ PWA</p>
                    </div>
                </div>
                <div class="header-date">
                    <p>AstƒÉzi</p>
                    <p id="current-date"></p>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav">
        <div class="container">
            <div class="nav-container">
                <button class="nav-button active" onclick="showSection('dashboard')" id="nav-dashboard">
                    <span class="icon">üìä</span>
                    Dashboard
                </button>
                <button class="nav-button" onclick="showSection('clients')" id="nav-clients">
                    <span class="icon">üë•</span>
                    Clien»õi
                </button>
                <button class="nav-button" onclick="showSection('appointments')" id="nav-appointments">
                    <span class="icon">üìÖ</span>
                    ProgramƒÉri
                </button>
                <button class="nav-button" onclick="showSection('documents')" id="nav-documents">
                    <span class="icon">üìÅ</span>
                    Documente
                </button>
                <button class="nav-button" onclick="showSection('workplan')" id="nav-workplan">
                    <span class="icon">üìã</span>
                    Fi»ôa M√¢ine
                </button>
                <button class="nav-button" onclick="showSection('reminders')" id="nav-reminders">
                    <span class="icon">üîî</span>
                    Reminder-e
                </button>
                <button class="nav-button" onclick="showSection('website')" id="nav-website">
                    <span class="icon">üåê</span>
                    Site Sync
                </button>
                <button class="nav-button" onclick="showSection('reports')" id="nav-reports">
                    <span class="icon">üìÑ</span>
                    Rapoarte
                </button>
                <button class="nav-button" onclick="showSection('sync')" id="nav-sync">
                    <span class="icon">‚òÅÔ∏è</span>
                    Cloud Sync
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            <!-- Dashboard Section -->
            <section id="dashboard" class="section active">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Dashboard</h2>
                    <div class="last-update">
                        Ultima actualizare: <span id="last-update-time"></span>
                    </div>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-content">
                                <div class="stat-label">Total Clien»õi</div>
                                <div class="stat-value" id="total-clients">0</div>
                            </div>
                            <div class="stat-icon">üë•</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-content">
                                <div class="stat-label">ProgramƒÉri Luna</div>
                                <div class="stat-value" id="month-appointments">0</div>
                            </div>
                            <div class="stat-icon">üìÖ</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-content">
                                <div class="stat-label">√én A»ôteptare</div>
                                <div class="stat-value" id="pending-appointments">0</div>
                            </div>
                            <div class="stat-icon">‚è≥</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-content">
                                <div class="stat-label">Documente</div>
                                <div class="stat-value" id="total-documents">0</div>
                            </div>
                            <div class="stat-icon">üìÅ</div>
                        </div>
                    </div>

                    <div class="stat-card special">
                        <div class="stat-header">
                            <div class="stat-content">
                                <div class="stat-label">M√¢ine</div>
                                <div class="stat-value" id="tomorrow-tasks">0</div>
                                <div class="stat-subtext">activitƒÉ»õi</div>
                            </div>
                            <div class="stat-icon">üîî</div>
                        </div>
                    </div>
                </div>

                <!-- Activity Cards -->
                <div class="stats-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">ProgramƒÉri Recente</h3>
                        </div>
                        <div class="card-content">
                            <div id="recent-appointments">
                                <p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">
                                    Nu existƒÉ programƒÉri √ÆncƒÉ
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Clien»õi Noi</h3>
                        </div>
                        <div class="card-content">
                            <div id="recent-clients">
                                <p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">
                                    Nu existƒÉ clien»õi √ÆncƒÉ
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Clients Section -->
            <section id="clients" class="section">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Clien»õi (<span id="clients-count">0</span>)</h2>
                    <button class="btn btn-primary" onclick="showModal('addClientModal')">
                        <span>‚ûï</span>
                        AdaugƒÉ Client
                    </button>
                </div>

                <!-- Search -->
                <div class="card mb-4">
                    <div class="card-content">
                        <input type="text" class="form-input" placeholder="CautƒÉ clien»õi..." 
                               onkeyup="searchClients(this.value)" id="client-search">
                    </div>
                </div>

                <!-- Clients List -->
                <div class="card">
                    <div class="card-content">
                        <div id="clients-list">
                            <p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">
                                Nu ave»õi clien»õi √ÆncƒÉ
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Appointments Section -->
            <section id="appointments" class="section">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">ProgramƒÉri (<span id="appointments-count">0</span>)</h2>
                    <button class="btn btn-primary" onclick="showModal('addAppointmentModal')">
                        <span>‚ûï</span>
                        Programare NouƒÉ
                    </button>
                </div>

                <!-- Search -->
                <div class="card mb-4">
                    <div class="card-content">
                        <input type="text" class="form-input" placeholder="CautƒÉ programƒÉri..." 
                               onkeyup="searchAppointments(this.value)" id="appointment-search">
                    </div>
                </div>

                <!-- Appointments List -->
                <div class="card">
                    <div class="card-content">
                        <div id="appointments-list">
                            <p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">
                                Nu ave»õi programƒÉri √ÆncƒÉ
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Documents Section -->
            <section id="documents" class="section">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">üìÅ Management Documente</h2>
                    <div class="flex gap-2">
                        <button class="btn btn-success" onclick="showModal('addDocumentModal')">
                            <span>üì∑</span>
                            Fotografie NouƒÉ
                        </button>
                        <button class="btn btn-primary" onclick="document.getElementById('upload-file').click()">
                            <span>üìÅ</span>
                            Upload Fi»ôier
                        </button>
                        <input type="file" id="upload-file" accept="image/*,.pdf,.doc,.docx" style="display: none;" onchange="uploadFile(this)">
                    </div>
                </div>

                <!-- Document Categories -->
                <div class="stats-grid mb-4">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">üìã PV VerificƒÉri</h3>
                        </div>
                        <div class="card-content">
                            <div class="text-center">
                                <div style="font-size: 2rem; font-weight: bold; color: #3b82f6;" id="pv-count">0</div>
                                <div style="color: #6b7280;">Procese Verbale</div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">üîß Fi»ôe Tehnice</h3>
                        </div>
                        <div class="card-content">
                            <div class="text-center">
                                <div style="font-size: 2rem; font-weight: bold; color: #10b981;" id="fise-count">0</div>
                                <div style="color: #6b7280;">Fi»ôe de Verificare</div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">üìÑ Alte Documente</h3>
                        </div>
                        <div class="card-content">
                            <div class="text-center">
                                <div style="font-size: 2rem; font-weight: bold; color: #f59e0b;" id="other-docs-count">0</div>
                                <div style="color: #6b7280;">Diverse</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Documents Grid -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Toate Documentele</h3>
                    </div>
                    <div class="card-content">
                        <div id="documents-grid" class="document-grid">
                            <!-- Documents will be rendered here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Work Plan Section -->
            <section id="workplan" class="section">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">üìã Fi»ôa de Lucru - M√¢ine</h2>
                    <div class="flex gap-2">
                        <button class="btn btn-success" onclick="exportTomorrowWorkPlan()">
                            <span>üìÑ</span>
                            Export PDF
                        </button>
                        <button class="btn btn-primary" onclick="sendTomorrowReminders()">
                            <span>üì±</span>
                            Trimite Reminder-e
                        </button>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">üìÖ ProgramƒÉri M√¢ine</h3>
                        </div>
                        <div class="card-content">
                            <div id="tomorrow-appointments">
                                <p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">
                                    Nu ave»õi programƒÉri m√¢ine
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">üîî Reminder-e de Trimis M√¢ine</h3>
                        </div>
                        <div class="card-content">
                            <div id="tomorrow-reminders">
                                <p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">
                                    Nu ave»õi reminder-e m√¢ine
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">üìä Rezumat Zilei</h3>
                    </div>
                    <div class="card-content">
                        <div class="stats-grid">
                            <div class="text-center">
                                <div style="font-size: 2rem; font-weight: bold; color: #3b82f6;" id="tomorrow-total-tasks">0</div>
                                <div style="color: #6b7280;">Total ActivitƒÉ»õi</div>
                            </div>
                            <div class="text-center">
                                <div style="font-size: 2rem; font-weight: bold; color: #10b981;" id="tomorrow-appointments-count">0</div>
                                <div style="color: #6b7280;">ProgramƒÉri</div>
                            </div>
                            <div class="text-center">
                                <div style="font-size: 2rem; font-weight: bold; color: #f59e0b;" id="tomorrow-reminders-count">0</div>
                                <div style="color: #6b7280;">Reminder-e</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Reminders Section -->
            <section id="reminders" class="section">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Reminder-e & NotificƒÉri</h2>
                    <div class="flex gap-2">
                        <button class="btn btn-success" onclick="showModal('addReminderModal')">
                            <span>‚ûï</span>
                            Reminder Nou
                        </button>
                        <button class="btn btn-primary" onclick="sendTodayReminders()">
                            <span>üì±</span>
                            Trimite Azi
                        </button>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">üîî Reminder-e Active</h3>
                        </div>
                        <div class="card-content">
                            <div id="active-reminders">
                                <p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">
                                    Nu existƒÉ reminder-e active
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">‚ö° Reminder-e Automate</h3>
                        </div>
                        <div class="card-content">
                            <div style="background: #dbeafe; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                                <h4 style="color: #1e40af; font-weight: 600; margin-bottom: 0.5rem;">VerificƒÉri Instala»õii Gaz</h4>
                                <p style="color: #1e40af; font-size: 0.875rem;">
                                    Reminder automat pentru verificƒÉrile periodice ale instala»õiilor de gaze
                                </p>
                            </div>
                            <div style="background: #dcfce7; padding: 1rem; border-radius: 8px;">
                                <h4 style="color: #166534; font-weight: 600; margin-bottom: 0.5rem;">VerificƒÉri Centrale Termice</h4>
                                <p style="color: #166534; font-size: 0.875rem;">
                                    Notificare clien»õi pentru reviziile periodice ale centralelor termice
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Website Sync Section -->
            <section id="website" class="section">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">üåê Sincronizare Site Web</h2>
                    <div class="flex gap-2">
                        <button class="btn btn-primary" onclick="importFromWebsite()">
                            <span>‚¨áÔ∏è</span>
                            Import ProgramƒÉri Site
                        </button>
                        <button class="btn btn-success" onclick="checkWebsiteRequests()">
                            <span>üîÑ</span>
                            VerificƒÉ Cereri Noi
                        </button>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">üìù Cereri de pe Site</h3>
                        </div>
                        <div class="card-content">
                            <div style="background: #f0f9ff; border: 1px solid #0ea5e9; border-radius: 8px; padding: 1rem; margin-bottom: 1rem;">
                                <h4 style="color: #0c4a6e; font-weight: 600; margin-bottom: 0.5rem;">üåê Link Site Web</h4>
                                <p style="color: #0c4a6e; font-size: 0.875rem; margin-bottom: 0.5rem;">
                                    Site-ul dvs. AdInstalGaz.ro prime»ôte cereri de programare care pot fi importate automat √Æn aplica»õie.
                                </p>
                                <a href="https://adinstalgaz.ro" target="_blank" style="color: #0ea5e9; text-decoration: none; font-weight: 500;">
                                    üîó ViziteazƒÉ Site-ul ‚Üí
                                </a>
                            </div>
                            
                            <div style="background: #fef2f2; border: 1px solid #fecaca; border-radius: 8px; padding: 1rem;">
                                <h4 style="color: #991b1b; font-weight: 600; margin-bottom: 0.5rem;">‚ö†Ô∏è Configurare NecesarƒÉ</h4>
                                <p style="color: #991b1b; font-size: 0.875rem;">
                                    Pentru sincronizare automatƒÉ, configura»õi webhook-uri sau API √Æntre site »ôi aplica»õie.
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">üìä Statistici Site</h3>
                        </div>
                        <div class="card-content">
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; text-align: center;">
                                <div>
                                    <div style="font-size: 1.5rem; font-weight: bold; color: #3b82f6;" id="website-requests">0</div>
                                    <div style="color: #6b7280; font-size: 0.875rem;">Cereri AstƒÉzi</div>
                                </div>
                                <div>
                                    <div style="font-size: 1.5rem; font-weight: bold; color: #10b981;" id="website-imported">0</div>
                                    <div style="color: #6b7280; font-size: 0.875rem;">Importate</div>
                                </div>
                            </div>
                            
                            <div style="margin-top: 1rem; padding: 1rem; background: #f9fafb; border-radius: 6px;">
                                <h5 style="color: #374151; margin-bottom: 0.5rem;">Func»õionalitƒÉ»õi Viitoare:</h5>
                                <ul style="color: #6b7280; font-size: 0.875rem; margin-left: 1rem;">
                                    <li>Import automat programƒÉri de pe site</li>
                                    <li>NotificƒÉri push pentru cereri noi</li>
                                    <li>Sincronizare bidirectionalƒÉ</li>
                                    <li>Widget chat pentru site</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Reports Section -->
            <section id="reports" class="section">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Rapoarte & Statistici</h2>
                    <div class="flex gap-2">
                        <button class="btn btn-warning" onclick="showStorageInfo()">
                            <span>üíæ</span>
                            Info Storage
                        </button>
                        <button class="btn btn-success" onclick="exportToExcel()">
                            <span>üìä</span>
                            Export Excel
                        </button>
                        <button class="btn btn-success" onclick="exportToPDF()">
                            <span>üìÑ</span>
                            Export PDF
                        </button>
                        <button class="btn btn-primary" onclick="backupData()">
                            <span>üíæ</span>
                            Backup
                        </button>
                        <button class="btn btn-primary" onclick="document.getElementById('restore-file').click()">
                            <span>üìÇ</span>
                            Restore
                        </button>
                        <input type="file" id="restore-file" accept=".json" style="display: none;" onchange="restoreData(this)">
                        <button class="btn btn-secondary" onclick="showModal('deleteDataModal')" style="background: #dc2626;">
                            <span>üóëÔ∏è</span>
                            »òterge Date Test
                        </button>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">üìä Raport Lunar</h3>
                        </div>
                        <div class="card-content">
                            <div class="stats-grid">
                                <div class="text-center">
                                    <div style="font-size: 2rem; font-weight: bold; color: #3b82f6;" id="report-appointments">0</div>
                                    <div style="color: #6b7280;">Servicii Luna Aceasta</div>
                                </div>
                                <div class="text-center">
                                    <div style="font-size: 2rem; font-weight: bold; color: #10b981;" id="report-completed">0</div>
                                    <div style="color: #6b7280;">Servicii Finalizate</div>
                                </div>
                                <div class="text-center">
                                    <div style="font-size: 2rem; font-weight: bold; color: #10b981;" id="report-revenue">0 RON</div>
                                    <div style="color: #6b7280;">Venituri Luna</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">üíæ Utilizare Storage</h3>
                        </div>
                        <div class="card-content">
                            <div id="storage-info" style="text-align: center; padding: 1rem;">
                                <div style="font-size: 1.5rem; font-weight: bold; color: #f59e0b;" id="storage-usage">Calculez...</div>
                                <div style="color: #6b7280; margin-bottom: 1rem;">Spa»õiu utilizat</div>
                                <button class="btn btn-warning" onclick="cleanupOldDocuments()" style="margin-right: 0.5rem;">
                                    üßπ CurƒÉ»õƒÉ Fotografii Vechi
                                </button>
                                <button class="btn btn-primary" onclick="optimizeStorageData()">
                                    üóúÔ∏è OptimizeazƒÉ Storage
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Cloud Sync Section -->
            <section id="sync" class="section">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">‚òÅÔ∏è Cloud Sync</h2>
                    <div class="flex gap-2">
                        <button class="btn btn-primary" onclick="forceSyncToCloud()">
                            <span>‚¨ÜÔ∏è</span>
                            Sync la Cloud
                        </button>
                        <button class="btn btn-success" onclick="forceSyncFromCloud()">
                            <span>‚¨áÔ∏è</span>
                            Sync din Cloud
                        </button>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">üìä Status Sincronizare</h3>
                        </div>
                        <div class="card-content">
                            <div style="background: #f9fafb; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                    <div>
                                        <div style="font-weight: 500; color: #374151;">Status Conexiune:</div>
                                        <div id="connection-status" style="color: #dc2626;">Offline</div>
                                    </div>
                                    <div>
                                        <div style="font-weight: 500; color: #374151;">Ultima Sincronizare:</div>
                                        <div id="last-sync" style="color: #6b7280;">NiciodatƒÉ</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; text-align: center;">
                                <div>
                                    <div style="font-size: 1.5rem; font-weight: bold; color: #3b82f6;" id="sync-clients-count">0</div>
                                    <div style="color: #6b7280; font-size: 0.875rem;">Clien»õi</div>
                                </div>
                                <div>
                                    <div style="font-size: 1.5rem; font-weight: bold; color: #10b981;" id="sync-appointments-count">0</div>
                                    <div style="color: #6b7280; font-size: 0.875rem;">ProgramƒÉri</div>
                                </div>
                                <div>
                                    <div style="font-size: 1.5rem; font-weight: bold; color: #f59e0b;" id="sync-reminders-count">0</div>
                                    <div style="color: #6b7280; font-size: 0.875rem;">Reminder-e</div>
                                </div>
                                <div>
                                    <div style="font-size: 1.5rem; font-weight: bold; color: #8b5cf6;" id="sync-documents-count">0</div>
                                    <div style="color: #6b7280; font-size: 0.875rem;">Documente</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">‚öôÔ∏è Cloud Sync Activ</h3>
                        </div>
                        <div class="card-content">
                            <div style="background: #f0fdf4; border: 1px solid #10b981; border-radius: 8px; padding: 1rem; margin-bottom: 1rem;">
                                <h4 style="color: #166534; font-weight: 600; margin-bottom: 0.5rem;">‚úÖ Firebase Configurat</h4>
                                <p style="color: #166534; font-size: 0.875rem; margin-bottom: 0.5rem;">
                                    Sincronizarea cloud este activƒÉ »ôi func»õionalƒÉ!
                                </p>
                                <ul style="color: #166534; font-size: 0.875rem; margin-left: 1rem;">
                                    <li>Firestore Database conectat</li>
                                    <li>Authentication activƒÉ</li>
                                    <li>Sincronizare √Æn timp real</li>
                                    <li>Backup automat documente</li>
                                </ul>
                            </div>
                            
                            <div style="background: #f0f9ff; border: 1px solid #0ea5e9; border-radius: 8px; padding: 1rem;">
                                <h4 style="color: #0c4a6e; font-weight: 600; margin-bottom: 0.5rem;">‚ú® Beneficii Active</h4>
                                <ul style="color: #0c4a6e; font-size: 0.875rem; margin-left: 1rem;">
                                    <li>‚úÖ Sincronizare automatƒÉ √Æntre dispozitive</li>
                                    <li>‚úÖ Backup automat al datelor »ôi documentelor</li>
                                    <li>‚úÖ Acces de pe orice dispozitiv</li>
                                    <li>‚úÖ Colaborare √Æn timp real</li>
                                    <li>‚úÖ Stocare securizatƒÉ documente PV »ôi fi»ôe</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Add Client Modal -->
    <div id="addClientModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">AdaugƒÉ Client Nou</h3>
                <button class="modal-close" onclick="hideModal('addClientModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Nume Complet *</label>
                    <input type="text" class="form-input" id="client-name" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Telefon *</label>
                    <input type="tel" class="form-input" id="client-phone" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" id="client-email">
                </div>
                <div class="form-group">
                    <label class="form-label">Adresa *</label>
                    <textarea class="form-input form-textarea" id="client-address" required></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('addClientModal')">AnuleazƒÉ</button>
                <button class="btn btn-primary" onclick="addClient()">SalveazƒÉ</button>
            </div>
        </div>
    </div>

    <!-- Add Appointment Modal -->
    <div id="addAppointmentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Programare NouƒÉ</h3>
                <button class="modal-close" onclick="hideModal('addAppointmentModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Client *</label>
                    <select class="form-select" id="appointment-client-select" onchange="selectClient()" required>
                        <option value="">SelecteazƒÉ clientul</option>
                        <option value="new-client">+ Client Nou (introdu manual)</option>
                    </select>
                </div>
                <div class="form-group" id="manual-client-group" style="display: none;">
                    <label class="form-label">Nume Client *</label>
                    <input type="text" class="form-input" id="appointment-client-name">
                </div>
                <div class="form-group">
                    <label class="form-label">Telefon *</label>
                    <input type="tel" class="form-input" id="appointment-phone" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Serviciu *</label>
                    <select class="form-select" id="appointment-service" required>
                        <option value="">SelecteazƒÉ serviciul</option>
                        <option value="Proiectare Bran»ôamente Gaz">Proiectare Bran»ôamente Gaz</option>
                        <option value="Execu»õie Bran»ôamente Gaz">Execu»õie Bran»ôamente Gaz</option>
                        <option value="Instala»õii de Utilizare Gaz">Instala»õii de Utilizare Gaz</option>
                        <option value="Verificare TehnicƒÉ PeriodicƒÉ">Verificare TehnicƒÉ PeriodicƒÉ</option>
                        <option value="Verificare la Racordare">Verificare la Racordare</option>
                        <option value="Verificare pentru Autoriza»õii">Verificare pentru Autoriza»õii</option>
                        <option value="Revizii Centrale Termice">Revizii Centrale Termice</option>
                        <option value="Verificare Post-Repara»õii">Verificare Post-Repara»õii</option>
                        <option value="Servicii de Urgen»õƒÉ">Servicii de Urgen»õƒÉ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Adresa *</label>
                    <input type="text" class="form-input" id="appointment-address" required>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label class="form-label">Data *</label>
                        <input type="date" class="form-input" id="appointment-date" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ora *</label>
                        <input type="time" class="form-input" id="appointment-time" required>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Pre»õ (RON)</label>
                    <input type="number" class="form-input" id="appointment-price">
                </div>
                <div class="form-group">
                    <label class="form-label">Observa»õii</label>
                    <textarea class="form-input form-textarea" id="appointment-notes"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('addAppointmentModal')">AnuleazƒÉ</button>
                <button class="btn btn-primary" onclick="addAppointment()">SalveazƒÉ</button>
            </div>
        </div>
    </div>

    <!-- Add Reminder Modal -->
    <div id="addReminderModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Reminder Nou</h3>
                <button class="modal-close" onclick="hideModal('addReminderModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Client *</label>
                    <select class="form-select" id="reminder-client-select" onchange="selectReminderClient()" required>
                        <option value="">SelecteazƒÉ clientul</option>
                        <option value="new-client">+ Client Nou (introdu manual)</option>
                    </select>
                </div>
                <div class="form-group" id="manual-reminder-client-group" style="display: none;">
                    <label class="form-label">Nume Client *</label>
                    <input type="text" class="form-input" id="reminder-client-name">
                </div>
                <div class="form-group">
                    <label class="form-label">Telefon Client *</label>
                    <input type="tel" class="form-input" id="reminder-phone" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Tipul Reminder-ului *</label>
                    <select class="form-select" id="reminder-type" onchange="updateReminderMessage()" required>
                        <option value="">SelecteazƒÉ tipul</option>
                        <option value="verificare-instalatii-gaz">VerificƒÉri »ôi Revizii Instala»õii Gaz</option>
                        <option value="verificare-centrale-termice">VerificƒÉri »ôi Revizii Centrale Termice</option>
                        <option value="urmƒÉrire-factura">UrmƒÉrire FacturƒÉ</option>
                        <option value="custom">Personalizat</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Data Reminder *</label>
                    <input type="date" class="form-input" id="reminder-date" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Mesajul pentru Client</label>
                    <textarea class="form-input form-textarea" id="reminder-message" rows="4"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('addReminderModal')">AnuleazƒÉ</button>
                <button class="btn btn-success" onclick="addReminder()">SalveazƒÉ</button>
            </div>
        </div>
    </div>

    <!-- Add Document Modal with Camera -->
    <div id="addDocumentModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3 class="modal-title">üì∑ Fotografie Document Nou</h3>
                <button class="modal-close" onclick="hideModal('addDocumentModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Client *</label>
                    <select class="form-select" id="document-client-select" required>
                        <option value="">SelecteazƒÉ clientul</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Tip Document *</label>
                    <select class="form-select" id="document-category" required>
                        <option value="">SelecteazƒÉ tipul</option>
                        <option value="pv-verificare">üìã PV Verificare</option>
                        <option value="fisa-tehnica">üîß Fi»ôƒÉ TehnicƒÉ</option>
                        <option value="certificat">üìú Certificat</option>
                        <option value="factura">üí∞ FacturƒÉ</option>
                        <option value="contract">üìÑ Contract</option>
                        <option value="altele">üìÅ Altele</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Nume Document</label>
                    <input type="text" class="form-input" id="document-name" placeholder="Ex: PV Verificare - Instala»õie Gaz">
                </div>
                
                <!-- Camera Section -->
                <div class="camera-container">
                    <div class="camera-preview" id="camera-preview">
                        <video id="camera-video" autoplay muted style="display: none;"></video>
                        <div class="camera-overlay" id="camera-overlay">
                            <div>
                                <div style="font-size: 3rem; margin-bottom: 1rem;">üì∑</div>
                                <div>ApƒÉsa»õi "Porne»ôte Camera" pentru a fotografia documentul</div>
                            </div>
                        </div>
                        <canvas id="camera-canvas" style="display: none;"></canvas>
                    </div>
                    
                    <div class="camera-controls">
                        <button type="button" class="btn btn-primary" id="start-camera-btn" onclick="startCamera()">
                            üì∑ Porne»ôte Camera
                        </button>
                        <button type="button" class="capture-btn" id="capture-btn" onclick="capturePhoto()" style="display: none;"></button>
                        <button type="button" class="btn btn-secondary" id="retake-btn" onclick="retakePhoto()" style="display: none;">
                            üîÑ RefƒÉ Poza
                        </button>
                    </div>
                </div>
                
                <div id="captured-photo" style="display: none; margin-top: 1rem;">
                    <h4>Fotografia CapturatƒÉ:</h4>
                    <img id="preview-image" style="max-width: 100%; border-radius: 8px; margin-top: 0.5rem;">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('addDocumentModal')">AnuleazƒÉ</button>
                <button class="btn btn-success" id="save-document-btn" onclick="saveDocument()" disabled>SalveazƒÉ Document</button>
            </div>
        </div>
    </div>

    <!-- Client Details Modal -->
    <div id="clientDetailsModal" class="modal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h3 class="modal-title">üë§ Detalii Client</h3>
                <button class="modal-close" onclick="hideModal('clientDetailsModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="client-details-content">
                    <!-- Content will be populated dynamically -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('clientDetailsModal')">√énchide</button>
            </div>
        </div>
    </div>

    <!-- Document Viewer Modal -->
    <div id="documentViewerModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3 class="modal-title" id="doc-viewer-title">üìÑ Vizualizare Document</h3>
                <button class="modal-close" onclick="hideModal('documentViewerModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="document-viewer-content" style="text-align: center;">
                    <!-- Document content will be loaded here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('documentViewerModal')">√énchide</button>
                <button class="btn btn-primary" id="download-doc-btn" onclick="downloadCurrentDocument()">
                    ‚¨áÔ∏è Download
                </button>
            </div>
        </div>
    </div>

    <!-- Delete Data Modal -->
    <div id="deleteDataModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" style="color: #dc2626;">‚ö†Ô∏è »òtergere Date Test</h3>
                <button class="modal-close" onclick="hideModal('deleteDataModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div style="background: #fef2f2; border: 1px solid #fecaca; border-radius: 6px; padding: 1rem; margin-bottom: 1rem;">
                    <p style="color: #dc2626; font-weight: 600; margin-bottom: 0.5rem;">ATEN»öIE!</p>
                    <p style="color: #dc2626; font-size: 0.875rem;">
                        AceastƒÉ ac»õiune va »ôterge TOATE datele (clien»õi, programƒÉri, reminder-uri, documente) »ôi nu poate fi anulatƒÉ!
                    </p>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Pentru confirmare, scrie: <strong>STERGE TOTUL</strong></label>
                    <input type="text" class="form-input" id="delete-confirmation" placeholder="Scrie exact: STERGE TOTUL">
                </div>
                
                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.875rem;">
                        <input type="checkbox" id="delete-checkbox">
                        Confirm cƒÉ vreau sƒÉ »ôterg toate datele
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('deleteDataModal')">AnuleazƒÉ</button>
                <button class="btn" onclick="deleteAllData()" style="background: #dc2626; color: white;">
                    üóëÔ∏è »òterge Totul
                </button>
            </div>
        </div>
    </div>

    <script>
        // Global data storage
        let appData = {
            clients: [],
            appointments: [],
            reminders: [],
            documents: []
        };

        let cameraStream = null;
        let currentPhotoData = null;
        let currentDocumentForDownload = null;
        let notificationQueue = [];
        let activeNotifications = 0;

        // Custom notification system to replace alert()
        function showNotification(message, type = 'info', options = {}) {
            const {
                title = getNotificationTitle(type),
                actions = [],
                duration = type === 'error' ? 8000 : 5000,
                persistent = false
            } = options;

            const notification = createNotificationElement(title, message, type, actions, persistent);
            document.body.appendChild(notification);

            // Animate in
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);

            activeNotifications++;

            // Auto-remove (unless persistent)
            if (!persistent) {
                setTimeout(() => {
                    removeNotification(notification);
                }, duration);
            }

            return notification;
        }

        function createNotificationElement(title, message, type, actions, persistent) {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.style.top = `${80 + activeNotifications * 10}px`;

            const icon = getNotificationIcon(type);
            
            notification.innerHTML = `
                <div class="notification-header">
                    <div class="notification-title">
                        ${icon} ${title}
                    </div>
                    <button class="notification-close" onclick="removeNotification(this.closest('.notification'))">&times;</button>
                </div>
                <div class="notification-body">${message}</div>
                ${actions.length > 0 ? `
                    <div class="notification-actions">
                        ${actions.map(action => `
                            <button class="notification-btn ${action.type || 'secondary'}" 
                                    onclick="${action.onClick}; removeNotification(this.closest('.notification'))">
                                ${action.text}
                            </button>
                        `).join('')}
                    </div>
                ` : ''}
            `;

            return notification;
        }

        function getNotificationTitle(type) {
            const titles = {
                'success': 'Succes',
                'error': 'Eroare',
                'warning': 'Aten»õie',
                'info': 'Informa»õie'
            };
            return titles[type] || 'Notificare';
        }

        function getNotificationIcon(type) {
            const icons = {
                'success': '‚úÖ',
                'error': '‚ùå',
                'warning': '‚ö†Ô∏è',
                'info': '‚ÑπÔ∏è'
            };
            return icons[type] || '‚ÑπÔ∏è';
        }

        function removeNotification(notification) {
            if (!notification) return;
            
            notification.classList.remove('show');
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
                activeNotifications = Math.max(0, activeNotifications - 1);
                
                // Reposition remaining notifications
                const remaining = document.querySelectorAll('.notification');
                remaining.forEach((notif, index) => {
                    notif.style.top = `${80 + index * 10}px`;
                });
            }, 300);
        }

        // Enhanced confirm dialog
        function showConfirm(message, title = 'Confirmare', options = {}) {
            return new Promise((resolve) => {
                const actions = [
                    {
                        text: options.confirmText || 'Da',
                        type: 'primary',
                        onClick: `resolveConfirm(${Date.now()}, true)`
                    },
                    {
                        text: options.cancelText || 'Nu',
                        type: 'secondary',
                        onClick: `resolveConfirm(${Date.now()}, false)`
                    }
                ];

                const timestamp = Date.now();
                window[`confirmResolve_${timestamp}`] = resolve;
                window[`resolveConfirm`] = function(ts, result) {
                    if (window[`confirmResolve_${ts}`]) {
                        window[`confirmResolve_${ts}`](result);
                        delete window[`confirmResolve_${ts}`];
                    }
                };

                showNotification(message, 'warning', {
                    title: title,
                    actions: actions,
                    persistent: true
                });
            });
        }

        // Info modal for large content
        function showInfoModal(title, content, type = 'info') {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content large info-modal">
                    <div class="modal-header">
                        <h3 class="modal-title">${getNotificationIcon(type)} ${title}</h3>
                        <button class="modal-close" onclick="this.closest('.modal').remove(); document.body.style.overflow='auto';">&times;</button>
                    </div>
                    <div class="modal-body">
                        <pre style="white-space: pre-wrap; font-family: inherit; line-height: 1.5;">${content}</pre>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-primary" onclick="this.closest('.modal').remove(); document.body.style.overflow='auto';">OK</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            document.body.style.overflow = 'hidden';
        }

        // PWA Installation
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            if (!installBannerDismissed) {
                document.getElementById('install-banner').classList.add('show');
            }
        });

        function installPWA() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((result) => {
                    if (result.outcome === 'accepted') {
                        console.log('PWA installatƒÉ cu succes');
                        dismissInstallBanner();
                    }
                    deferredPrompt = null;
                });
            }
        }

        function dismissInstallBanner() {
            document.getElementById('install-banner').classList.remove('show');
            localStorage.setItem('installBannerDismissed', 'true');
            installBannerDismissed = true;
        }

        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js')
                .then(registration => {
                    console.log('Service Worker √Ænregistrat cu succes:', registration);
                })
                .catch(error => {
                    console.log('Eroare la √Ænregistrarea Service Worker:', error);
                });
        }

        // Online/Offline Detection
        window.addEventListener('online', () => {
            isOnline = true;
            updateSyncStatus();
            syncToCloud();
        });

        window.addEventListener('offline', () => {
            isOnline = false;
            updateSyncStatus();
        });

        function updateSyncStatus() {
            const statusEl = document.getElementById('sync-status');
            const dotEl = document.getElementById('sync-dot');
            const textEl = document.getElementById('sync-text');
            const connectionStatusEl = document.getElementById('connection-status');

            if (isOnline) {
                statusEl.className = 'sync-status online';
                dotEl.className = 'sync-dot online';
                textEl.textContent = 'Online';
                if (connectionStatusEl) connectionStatusEl.textContent = 'Online';
            } else {
                statusEl.className = 'sync-status offline';
                dotEl.className = 'sync-dot offline';
                textEl.textContent = 'Offline';
                if (connectionStatusEl) connectionStatusEl.textContent = 'Offline';
            }
        }

        function setSyncingStatus() {
            const statusEl = document.getElementById('sync-status');
            const dotEl = document.getElementById('sync-dot');
            const textEl = document.getElementById('sync-text');

            statusEl.className = 'sync-status syncing';
            dotEl.className = 'sync-dot syncing';
            textEl.textContent = 'Sincronizare...';

            setTimeout(() => {
                updateSyncStatus();
            }, 2000);
        }

        // Firebase Authentication »ôi Real-time Sync
        async function initializeFirebase() {
            try {
                // Check if Firebase scripts are loaded
                if (typeof window.firebaseApp === 'undefined' || 
                    typeof window.firebaseFunctions === 'undefined' || 
                    typeof window.auth === 'undefined' || 
                    typeof window.db === 'undefined') {
                    console.log('‚ö†Ô∏è Firebase SDK nu este √ÆncƒÉrcat complet');
                    return;
                }

                // Test Firebase functions
                if (!window.firebaseFunctions.signInAnonymously) {
                    console.log('‚ö†Ô∏è Firebase functions nu sunt disponibile');
                    return;
                }

                await window.firebaseFunctions.signInAnonymously(window.auth);
                console.log('‚úÖ Autentificare Firebase reu»ôitƒÉ');
                
                await syncFromCloud();
                
            } catch (error) {
                console.log('‚ö†Ô∏è Firebase nu este disponibil sau configurat incorect:', error.message);
                console.log('üì± Aplica»õia va func»õiona √Æn modul offline complet');
                // App will continue to work offline
            }
        }

        async function syncToCloud() {
            if (!isOnline || !window.db || !window.firebaseFunctions) {
                console.log('‚ö†Ô∏è Cloud sync nu este disponibil - salvez local');
                return;
            }
            
            setSyncingStatus();
            
            try {
                const { collection, addDoc, serverTimestamp } = window.firebaseFunctions;

                for (const client of appData.clients) {
                    if (!client.cloudId) {
                        const docRef = await addDoc(collection(window.db, 'clients'), {
                            ...client,
                            syncedAt: serverTimestamp()
                        });
                        client.cloudId = docRef.id;
                    }
                }

                for (const appointment of appData.appointments) {
                    if (!appointment.cloudId) {
                        const docRef = await addDoc(collection(window.db, 'appointments'), {
                            ...appointment,
                            syncedAt: serverTimestamp()
                        });
                        appointment.cloudId = docRef.id;
                    }
                }

                for (const reminder of appData.reminders) {
                    if (!reminder.cloudId) {
                        const docRef = await addDoc(collection(window.db, 'reminders'), {
                            ...reminder,
                            syncedAt: serverTimestamp()
                        });
                        reminder.cloudId = docRef.id;
                    }
                }

                for (const docItem of appData.documents) {
                    if (!docItem.cloudId) {
                        const docRef = await addDoc(collection(window.db, 'documents'), {
                            ...docItem,
                            syncedAt: serverTimestamp()
                        });
                        docItem.cloudId = docRef.id;
                    }
                }

                saveDataLocally();
                updateLastSyncTime();
                console.log('‚úÖ Sincronizare √Æn cloud reu»ôitƒÉ');

            } catch (error) {
                console.log('‚ö†Ô∏è Eroare sincronizare cloud:', error.message);
            }
        }

        async function syncFromCloud() {
            if (!isOnline || !window.db || !window.firebaseFunctions) {
                console.log('‚ö†Ô∏è Cloud sync nu este disponibil');
                return;
            }
            
            setSyncingStatus();
            
            try {
                const { collection, getDocs } = window.firebaseFunctions;

                const clientsSnapshot = await getDocs(collection(window.db, 'clients'));
                const cloudClients = [];
                clientsSnapshot.forEach((doc) => {
                    cloudClients.push({ cloudId: doc.id, ...doc.data() });
                });

                const appointmentsSnapshot = await getDocs(collection(window.db, 'appointments'));
                const cloudAppointments = [];
                appointmentsSnapshot.forEach((doc) => {
                    cloudAppointments.push({ cloudId: doc.id, ...doc.data() });
                });

                const remindersSnapshot = await getDocs(collection(window.db, 'reminders'));
                const cloudReminders = [];
                remindersSnapshot.forEach((doc) => {
                    cloudReminders.push({ cloudId: doc.id, ...doc.data() });
                });

                const documentsSnapshot = await getDocs(collection(window.db, 'documents'));
                const cloudDocuments = [];
                documentsSnapshot.forEach((doc) => {
                    cloudDocuments.push({ cloudId: doc.id, ...doc.data() });
                });

                if (cloudClients.length > 0) appData.clients = cloudClients;
                if (cloudAppointments.length > 0) appData.appointments = cloudAppointments;
                if (cloudReminders.length > 0) appData.reminders = cloudReminders;
                if (cloudDocuments.length > 0) appData.documents = cloudDocuments;

                saveDataLocally();
                updateUI();
                updateSyncCounts();
                updateLastSyncTime();
                console.log('‚úÖ Sincronizare din cloud reu»ôitƒÉ');

            } catch (error) {
                console.log('‚ö†Ô∏è Eroare sincronizare din cloud:', error.message);
            }
        }

        function updateSyncCounts() {
            if (document.getElementById('sync-clients-count')) {
                document.getElementById('sync-clients-count').textContent = appData.clients.length;
                document.getElementById('sync-appointments-count').textContent = appData.appointments.length;
                document.getElementById('sync-reminders-count').textContent = appData.reminders.length;
                document.getElementById('sync-documents-count').textContent = appData.documents.length;
            }
        }

        function updateLastSyncTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('ro-RO', {hour: '2-digit', minute: '2-digit'});
            if (document.getElementById('last-sync')) {
                document.getElementById('last-sync').textContent = timeStr;
            }
        }

        async function forceSyncToCloud() {
            if (!isOnline) {
                showNotification('Nu e»ôti conectat la internet!', 'error');
                return;
            }
            
            if (!window.firebaseFunctions || !window.db) {
                showNotification('Firebase nu este configurat. Aplica»õia func»õioneazƒÉ doar offline.', 'warning');
                return;
            }
            
            await syncToCloud();
            showNotification('Sincronizare √Æn cloud finalizatƒÉ!', 'success');
        }

        async function forceSyncFromCloud() {
            if (!isOnline) {
                showNotification('Nu e»ôti conectat la internet!', 'error');
                return;
            }
            
            if (!window.firebaseFunctions || !window.db) {
                showNotification('Firebase nu este configurat. Aplica»õia func»õioneazƒÉ doar offline.', 'warning');
                return;
            }
            
            await syncFromCloud();
            showNotification('Sincronizare din cloud finalizatƒÉ!', 'success');
        }

        // Data persistence functions
        function saveDataLocally() {
            try {
                const dataString = JSON.stringify(appData);
                const sizeInMB = (dataString.length / (1024 * 1024)).toFixed(2);
                
                console.log(`üíæ √éncerc sƒÉ salvez ${sizeInMB} MB √Æn localStorage`);
                
                // Check localStorage space before saving
                if (sizeInMB > 8) {
                    showNotification('Datele sunt prea mari (peste 8MB). Se va √Æncerca optimizarea...', 'warning');
                    optimizeStorageData();
                    return;
                }
                
                localStorage.setItem('adinstalgaz_data', dataString);
                console.log(`‚úÖ Date salvate local (${sizeInMB} MB)`);
                
            } catch (error) {
                if (error.name === 'QuotaExceededError') {
                    console.error('‚ùå LocalStorage plin!', error);
                    handleQuotaExceeded();
                } else {
                    console.error('‚ùå Eroare salvare:', error);
                    showNotification(`Eroare la salvarea datelor: ${error.message}`, 'error');
                }
            }
        }

        function handleQuotaExceeded() {
            showConfirm(
                'Fotografiile au umplut memoria dispozitivului.\n\nVrei sƒÉ »ôtergi fotografiile mai vechi de 30 de zile pentru a face spa»õiu?',
                'Spa»õiu Insuficient',
                {
                    confirmText: '»òterge fotografii vechi',
                    cancelText: 'ExportƒÉ datele mai √Ænt√¢i'
                }
            ).then((result) => {
                if (result) {
                    cleanupOldDocuments();
                } else {
                    showNotification(
                        'Te rog sƒÉ exportezi datele (Rapoarte ‚Üí Export Excel) √Ænainte de a continua!',
                        'warning',
                        { title: 'Export Recomandat' }
                    );
                }
            });
        }

        function cleanupOldDocuments() {
            const thirtyDaysAgo = new Date();
            thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
            
            const initialCount = appData.documents.length;
            
            // Remove documents older than 30 days
            appData.documents = appData.documents.filter(doc => {
                const docDate = new Date(doc.uploadDate);
                return docDate > thirtyDaysAgo;
            });
            
            // Also clean up client documents for backward compatibility
            appData.clients.forEach(client => {
                if (client.documents) {
                    client.documents = client.documents.filter(doc => {
                        const docDate = new Date(doc.uploadDate);
                        return docDate > thirtyDaysAgo;
                    });
                }
            });
            
            const removedCount = initialCount - appData.documents.length;
            
            if (removedCount > 0) {
                try {
                    saveDataLocally();
                    showNotification(
                        `CurƒÉ»õare completƒÉ!\n\nAu fost »ôterse ${removedCount} fotografii vechi.\nSpa»õiul a fost eliberat cu succes.`,
                        'success',
                        { title: 'Storage Optimizat' }
                    );
                    updateUI();
                } catch (error) {
                    showNotification(
                        '√éncƒÉ nu este suficient spa»õiu. Te rog sƒÉ exportezi datele »ôi sƒÉ √Æncepi din nou.',
                        'error'
                    );
                }
            } else {
                showNotification(
                    'Nu s-au gƒÉsit fotografii vechi de »ôters.\nTe rog sƒÉ exportezi datele pentru backup.',
                    'warning',
                    { title: 'Nicio CurƒÉ»õare PosibilƒÉ' }
                );
            }
        }

        function optimizeStorageData() {
            // Try to compress images further
            let optimized = false;
            
            appData.documents.forEach(doc => {
                if (doc.type.startsWith('image/') && doc.data) {
                    // Re-compress images that are too large
                    if (doc.data.length > 500000) { // If larger than ~500KB in base64
                        try {
                            // Create a temporary canvas to re-compress
                            const canvas = document.createElement('canvas');
                            const ctx = canvas.getContext('2d');
                            const img = new Image();
                            
                            img.onload = function() {
                                // Scale down if too large
                                const maxSize = 800;
                                let { width, height } = this;
                                
                                if (width > maxSize || height > maxSize) {
                                    const scale = Math.min(maxSize / width, maxSize / height);
                                    width *= scale;
                                    height *= scale;
                                }
                                
                                canvas.width = width;
                                canvas.height = height;
                                ctx.drawImage(this, 0, 0, width, height);
                                
                                // Re-compress with lower quality
                                doc.data = canvas.toDataURL('image/jpeg', 0.3);
                                optimized = true;
                            };
                            
                            img.src = doc.data;
                        } catch (e) {
                            console.log('Nu pot comprima imaginea:', e);
                        }
                    }
                }
            });
            
            if (optimized) {
                setTimeout(() => {
                    try {
                        saveDataLocally();
                        showNotification('Optimizare completƒÉ! Imaginile au fost comprimate.', 'success');
                    } catch (error) {
                        handleQuotaExceeded();
                    }
                }, 1000);
            } else {
                handleQuotaExceeded();
            }
        }

        function saveData() {
            saveDataLocally();
            // Auto-sync to cloud if online
            if (isOnline) {
                syncToCloud();
            }
        }

        function loadData() {
            const saved = localStorage.getItem('adinstalgaz_data');
            if (saved) {
                try {
                    appData = JSON.parse(saved);
                    // Ensure all arrays exist
                    if (!appData.documents) appData.documents = [];
                    appData.clients.forEach(client => {
                        if (!client.documents) {
                            client.documents = [];
                        }
                    });
                    
                    // Check storage usage
                    const sizeInMB = (saved.length / (1024 * 1024)).toFixed(2);
                    console.log(`üìä Date √ÆncƒÉrcate: ${sizeInMB} MB din localStorage`);
                    
                    if (sizeInMB > 5) {
                        console.warn(`‚ö†Ô∏è Storage usage mare: ${sizeInMB} MB. Recomand curƒÉ»õarea documentelor vechi.`);
                    }
                    
                } catch (error) {
                    console.error('‚ùå Eroare √ÆncƒÉrcare date:', error);
                    appData = {
                        clients: [],
                        appointments: [],
                        reminders: [],
                        documents: []
                    };
                }
            }
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Ini»õializare aplica»õie Ad Instal Gaz SRL...');
            
            loadData();
            updateUI();
            updateDateTime();
            updateSyncStatus();
            setInterval(updateDateTime, 60000); // Update every minute
            
            // Set minimum date for date inputs
            const today = new Date().toISOString().split('T')[0];
            const dateInputs = document.querySelectorAll('input[type="date"]');
            dateInputs.forEach(input => {
                input.min = today;
            });
            
            // Check if Firebase CDN loaded
            setTimeout(() => {
                if (typeof window.firebaseApp === 'undefined') {
                    console.log('‚ö†Ô∏è Firebase CDN nu s-a √ÆncƒÉrcat - probabil restric»õii de re»õea');
                    console.log('üì± Aplica»õia func»õioneazƒÉ 100% offline - toate func»õiile disponibile local');
                } else {
                    console.log('‚ö° √éncercare ini»õializare Firebase...');
                    initializeFirebase();
                }
            }, 2000);
            
            // Show welcome message after everything loads
            setTimeout(() => {
                console.log('‚úÖ Aplica»õia Ad Instal Gaz SRL s-a √ÆncƒÉrcat complet!');
                console.log('üì± Func»õionalitƒÉ»õi disponibile:');
                console.log('   ‚Ä¢ Management clien»õi »ôi programƒÉri');
                console.log('   ‚Ä¢ Camera pentru fotografiat documente'); 
                console.log('   ‚Ä¢ Upload fi»ôiere PDF/DOC');
                console.log('   ‚Ä¢ Export Excel/PDF');
                console.log('   ‚Ä¢ Backup/Restore complet');
                console.log('   ‚Ä¢ PWA - instalabil pe telefon');
                console.log('   ‚Ä¢ Func»õionare offline');
                
                // Show storage info if high usage
                updateStorageDisplay();
                const storageElement = document.getElementById('storage-usage');
                if (storageElement && parseFloat(storageElement.textContent) > 5) {
                    console.warn('‚ö†Ô∏è Utilizare mare de storage - vezi sec»õiunea Rapoarte pentru optimizare');
                }
            }, 3000);
        });

        // Date and time functions
        function updateDateTime() {
            const now = new Date();
            const dateStr = now.toLocaleDateString('ro-RO');
            const timeStr = now.toLocaleTimeString('ro-RO', {hour: '2-digit', minute: '2-digit'});
            
            document.getElementById('current-date').textContent = dateStr;
            document.getElementById('last-update-time').textContent = timeStr;
        }

        // Navigation
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active from all nav buttons
            document.querySelectorAll('.nav-button').forEach(button => {
                button.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            document.getElementById('nav-' + sectionId).classList.add('active');
            
            // Update UI for the current section
            updateUI();
        }

        // Modal functions
        function showModal(modalId) {
            if (modalId === 'addAppointmentModal') {
                populateClientDropdown();
            } else if (modalId === 'addReminderModal') {
                populateReminderClientDropdown();
            } else if (modalId === 'addDocumentModal') {
                populateDocumentClientDropdown();
            }
            document.getElementById(modalId).classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function populateClientDropdown() {
            const dropdown = document.getElementById('appointment-client-select');
            const defaultOptions = `
                <option value="">SelecteazƒÉ clientul</option>
                <option value="new-client">+ Client Nou (introdu manual)</option>
            `;
            
            const clientOptions = appData.clients.map(client => 
                `<option value="${client.id}">${client.name} - ${client.phone}</option>`
            ).join('');
            
            dropdown.innerHTML = defaultOptions + clientOptions;
        }

        function populateReminderClientDropdown() {
            const dropdown = document.getElementById('reminder-client-select');
            const defaultOptions = `
                <option value="">SelecteazƒÉ clientul</option>
                <option value="new-client">+ Client Nou (introdu manual)</option>
            `;
            
            const clientOptions = appData.clients.map(client => 
                `<option value="${client.id}">${client.name} - ${client.phone}</option>`
            ).join('');
            
            dropdown.innerHTML = defaultOptions + clientOptions;
        }

        function populateDocumentClientDropdown() {
            const dropdown = document.getElementById('document-client-select');
            dropdown.innerHTML = `
                <option value="">SelecteazƒÉ clientul</option>
                ${appData.clients.map(client => 
                    `<option value="${client.id}">${client.name} - ${client.phone}</option>`
                ).join('')}
            `;
        }

        function selectClient() {
            const dropdown = document.getElementById('appointment-client-select');
            const manualGroup = document.getElementById('manual-client-group');
            const phoneInput = document.getElementById('appointment-phone');
            const addressInput = document.getElementById('appointment-address');
            const nameInput = document.getElementById('appointment-client-name');
            
            const selectedValue = dropdown.value;
            
            if (selectedValue === 'new-client') {
                manualGroup.style.display = 'block';
                nameInput.required = true;
                phoneInput.value = '';
                addressInput.value = '';
                nameInput.value = '';
            } else if (selectedValue === '') {
                manualGroup.style.display = 'none';
                nameInput.required = false;
                phoneInput.value = '';
                addressInput.value = '';
                nameInput.value = '';
            } else {
                manualGroup.style.display = 'none';
                nameInput.required = false;
                
                const client = appData.clients.find(c => c.id == selectedValue);
                if (client) {
                    phoneInput.value = client.phone;
                    addressInput.value = client.address;
                    nameInput.value = client.name;
                }
            }
        }

        function selectReminderClient() {
            const dropdown = document.getElementById('reminder-client-select');
            const manualGroup = document.getElementById('manual-reminder-client-group');
            const phoneInput = document.getElementById('reminder-phone');
            const nameInput = document.getElementById('reminder-client-name');
            
            const selectedValue = dropdown.value;
            
            if (selectedValue === 'new-client') {
                manualGroup.style.display = 'block';
                nameInput.required = true;
                phoneInput.value = '';
                nameInput.value = '';
            } else if (selectedValue === '') {
                manualGroup.style.display = 'none';
                nameInput.required = false;
                phoneInput.value = '';
                nameInput.value = '';
            } else {
                manualGroup.style.display = 'none';
                nameInput.required = false;
                
                const client = appData.clients.find(c => c.id == selectedValue);
                if (client) {
                    phoneInput.value = client.phone;
                    nameInput.value = client.name;
                }
            }
        }

        function hideModal(modalId) {
            const modal = document.getElementById(modalId);
            if (!modal) return;
            
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
            
            // Clean up camera if needed
            if (modalId === 'addDocumentModal') {
                stopCamera();
            }
            
            // Remove dynamic modals
            if (modalId === 'uploadFileModal') {
                modal.remove();
                // Clean up temp data
                if (window.tempFileData) {
                    delete window.tempFileData;
                }
                // Reset file input
                const fileInput = document.getElementById('upload-file');
                if (fileInput) fileInput.value = '';
            } else {
                // Clear regular modal inputs
                clearModalInputs(modalId);
            }
        }

        function clearModalInputs(modalId) {
            const modal = document.getElementById(modalId);
            const inputs = modal.querySelectorAll('input, textarea, select');
            inputs.forEach(input => {
                if (input.type === 'checkbox' || input.type === 'radio') {
                    input.checked = false;
                } else {
                    input.value = '';
                }
            });
            
            // Reset specific modal elements
            if (modalId === 'addAppointmentModal') {
                const manualGroup = document.getElementById('manual-client-group');
                const nameInput = document.getElementById('appointment-client-name');
                manualGroup.style.display = 'none';
                nameInput.required = false;
            }
            
            if (modalId === 'addReminderModal') {
                const manualGroup = document.getElementById('manual-reminder-client-group');
                const nameInput = document.getElementById('reminder-client-name');
                manualGroup.style.display = 'none';
                nameInput.required = false;
            }

            if (modalId === 'addDocumentModal') {
                resetCameraModal();
            }
        }

        // Camera Functions
        async function startCamera() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({
                    video: { 
                        width: { ideal: 1280 },
                        height: { ideal: 720 },
                        facingMode: 'environment' // Use back camera on mobile
                    }
                });
                
                cameraStream = stream;
                const video = document.getElementById('camera-video');
                const overlay = document.getElementById('camera-overlay');
                const startBtn = document.getElementById('start-camera-btn');
                const captureBtn = document.getElementById('capture-btn');
                
                video.srcObject = stream;
                video.style.display = 'block';
                overlay.style.display = 'none';
                startBtn.style.display = 'none';
                captureBtn.style.display = 'block';
                
                console.log('Camera started successfully');
            } catch (error) {
                console.error('Error accessing camera:', error);
                showNotification('Nu pot accesa camera. Verifica»õi permisiunile »ôi √Æncerca»õi din nou.', 'error', {
                    title: 'Eroare CamerƒÉ'
                });
            }
        }

        function stopCamera() {
            if (cameraStream) {
                cameraStream.getTracks().forEach(track => track.stop());
                cameraStream = null;
            }
        }

        function capturePhoto() {
            const video = document.getElementById('camera-video');
            const canvas = document.getElementById('camera-canvas');
            const context = canvas.getContext('2d');
            
            // Set canvas dimensions to match video (but limit max size)
            const maxWidth = 1200;
            const maxHeight = 800;
            
            let { videoWidth, videoHeight } = video;
            
            // Calculate scaling to fit within max dimensions
            const scale = Math.min(maxWidth / videoWidth, maxHeight / videoHeight, 1);
            
            canvas.width = videoWidth * scale;
            canvas.height = videoHeight * scale;
            
            // Draw video frame to canvas with scaling
            context.drawImage(video, 0, 0, canvas.width, canvas.height);
            
            // Convert to base64 with compression (0.6 quality for smaller file)
            currentPhotoData = canvas.toDataURL('image/jpeg', 0.6);
            
            // Check size and compress more if needed
            const sizeInMB = (currentPhotoData.length * 0.75) / (1024 * 1024);
            console.log(`üì∏ MƒÉrime fotografie: ${sizeInMB.toFixed(2)} MB`);
            
            if (sizeInMB > 1) {
                // If still too large, compress more
                currentPhotoData = canvas.toDataURL('image/jpeg', 0.4);
                console.log(`üì∏ Fotografie compresatƒÉ la: ${((currentPhotoData.length * 0.75) / (1024 * 1024)).toFixed(2)} MB`);
            }
            
            // Stop camera
            stopCamera();
            
            // Update UI
            showCapturedPhoto();
        }

        function showCapturedPhoto() {
            const video = document.getElementById('camera-video');
            const overlay = document.getElementById('camera-overlay');
            const captureBtn = document.getElementById('capture-btn');
            const retakeBtn = document.getElementById('retake-btn');
            const capturedSection = document.getElementById('captured-photo');
            const previewImage = document.getElementById('preview-image');
            const saveBtn = document.getElementById('save-document-btn');
            
            // Hide video elements
            video.style.display = 'none';
            captureBtn.style.display = 'none';
            
            // Show retake button and preview
            retakeBtn.style.display = 'block';
            capturedSection.style.display = 'block';
            previewImage.src = currentPhotoData;
            
            // Enable save button
            saveBtn.disabled = false;
            
            overlay.style.display = 'flex';
            overlay.innerHTML = '<div style="color: #10b981;"><div style="font-size: 3rem; margin-bottom: 1rem;">‚úÖ</div><div>Fotografia a fost capturatƒÉ cu succes!</div></div>';
        }

        function retakePhoto() {
            resetCameraModal();
            startCamera();
        }

        function resetCameraModal() {
            stopCamera();
            currentPhotoData = null;
            
            const video = document.getElementById('camera-video');
            const overlay = document.getElementById('camera-overlay');
            const startBtn = document.getElementById('start-camera-btn');
            const captureBtn = document.getElementById('capture-btn');
            const retakeBtn = document.getElementById('retake-btn');
            const capturedSection = document.getElementById('captured-photo');
            const saveBtn = document.getElementById('save-document-btn');
            
            video.style.display = 'none';
            overlay.style.display = 'flex';
            overlay.innerHTML = '<div><div style="font-size: 3rem; margin-bottom: 1rem;">üì∑</div><div>ApƒÉsa»õi "Porne»ôte Camera" pentru a fotografia documentul</div></div>';
            
            startBtn.style.display = 'block';
            captureBtn.style.display = 'none';
            retakeBtn.style.display = 'none';
            capturedSection.style.display = 'none';
            saveBtn.disabled = true;
        }

        // Document Management Functions
        function saveDocument() {
            const clientId = document.getElementById('document-client-select').value;
            const category = document.getElementById('document-category').value;
            const documentName = document.getElementById('document-name').value;
            
            if (!clientId || !category || !currentPhotoData) {
                showNotification('Te rog sƒÉ completezi toate c√¢mpurile »ôi sƒÉ faci o fotografie!', 'warning');
                return;
            }
            
            const client = appData.clients.find(c => c.id == clientId);
            if (!client) {
                showNotification('Clientul selectat nu a fost gƒÉsit!', 'error');
                return;
            }
            
            const newDocument = {
                id: Date.now(),
                clientId: parseInt(clientId),
                clientName: client.name,
                category: category,
                name: documentName || `${getCategoryName(category)} - ${client.name}`,
                type: 'image/jpeg',
                data: currentPhotoData,
                size: Math.round(currentPhotoData.length * 0.75), // Approximate size
                uploadDate: new Date().toISOString(),
                source: 'camera'
            };
            
            // Add to global documents array
            appData.documents.push(newDocument);
            
            // Also add to client's documents for backward compatibility
            if (!client.documents) client.documents = [];
            client.documents.push(newDocument);
            
            saveData();
            updateUI();
            hideModal('addDocumentModal');
            
            showNotification('Document salvat cu succes!', 'success');
        }

        function getCategoryName(category) {
            const categories = {
                'pv-verificare': 'PV Verificare',
                'fisa-tehnica': 'Fi»ôƒÉ TehnicƒÉ',
                'certificat': 'Certificat',
                'factura': 'FacturƒÉ',
                'contract': 'Contract',
                'altele': 'Document'
            };
            return categories[category] || 'Document';
        }

        function uploadFile(input) {
            const file = input.files[0];
            if (!file) return;
            
            // Check file size
            const fileSizeInMB = file.size / (1024 * 1024);
            
            if (fileSizeInMB > 3) {
                showNotification(
                    `Fi»ôierul este prea mare (${fileSizeInMB.toFixed(1)} MB).\n\nMƒÉrimea maximƒÉ acceptatƒÉ: 3 MB\n\nPentru fotografii, folosi»õi camera din aplica»õie care optimizeazƒÉ automat mƒÉrimea.`,
                    'error',
                    { title: 'Fi»ôier Prea Mare' }
                );
                input.value = '';
                return;
            }
            
            // Show client selection modal
            showDocumentUploadModal(file);
        }

        function showDocumentUploadModal(file) {
            // Create a temporary modal for file upload
            const modalHTML = `
                <div id="uploadFileModal" class="modal active">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="modal-title">üìÅ Upload Document</h3>
                            <button class="modal-close" onclick="hideModal('uploadFileModal')">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label class="form-label">Client *</label>
                                <select class="form-select" id="upload-client-select" required>
                                    <option value="">SelecteazƒÉ clientul</option>
                                    ${appData.clients.map(client => 
                                        `<option value="${client.id}">${client.name} - ${client.phone}</option>`
                                    ).join('')}
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Tip Document *</label>
                                <select class="form-select" id="upload-category" required>
                                    <option value="">SelecteazƒÉ tipul</option>
                                    <option value="pv-verificare">üìã PV Verificare</option>
                                    <option value="fisa-tehnica">üîß Fi»ôƒÉ TehnicƒÉ</option>
                                    <option value="certificat">üìú Certificat</option>
                                    <option value="factura">üí∞ FacturƒÉ</option>
                                    <option value="contract">üìÑ Contract</option>
                                    <option value="altele">üìÅ Altele</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Fi»ôier Selectat:</label>
                                <div style="background: #f3f4f6; padding: 1rem; border-radius: 6px;">
                                    <strong>${file.name}</strong><br>
                                    <span style="color: #6b7280;">${(file.size / 1024).toFixed(1)} KB</span>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-secondary" onclick="hideModal('uploadFileModal')">AnuleazƒÉ</button>
                            <button class="btn btn-success" onclick="processFileUpload('${file.name}', ${file.size}, '${file.type}')">SalveazƒÉ</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            document.body.style.overflow = 'hidden';
            
            // Store file data with compression for images
            const reader = new FileReader();
            reader.onload = function(e) {
                if (file.type.startsWith('image/')) {
                    // Compress image before storing
                    compressImage(e.target.result, (compressedData) => {
                        window.tempFileData = compressedData;
                        console.log(`üìÅ Imagine compresatƒÉ de la ${(file.size / 1024).toFixed(1)} KB la ${((compressedData.length * 0.75) / 1024).toFixed(1)} KB`);
                    });
                } else {
                    window.tempFileData = e.target.result;
                }
            };
            reader.readAsDataURL(file);
        }

        function compressImage(dataUrl, callback) {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const img = new Image();
            
            img.onload = function() {
                // Limit image size
                const maxWidth = 1000;
                const maxHeight = 800;
                
                let { width, height } = this;
                const scale = Math.min(maxWidth / width, maxHeight / height, 1);
                
                canvas.width = width * scale;
                canvas.height = height * scale;
                
                ctx.drawImage(this, 0, 0, canvas.width, canvas.height);
                
                // Compress with medium quality
                const compressedData = canvas.toDataURL('image/jpeg', 0.5);
                callback(compressedData);
            };
            
            img.src = dataUrl;
        }

        function processFileUpload(fileName, fileSize, fileType) {
            const clientId = document.getElementById('upload-client-select').value;
            const category = document.getElementById('upload-category').value;
            
            if (!clientId || !category) {
                showNotification('Te rog sƒÉ completezi toate c√¢mpurile!', 'warning');
                return;
            }
            
            const client = appData.clients.find(c => c.id == clientId);
            if (!client) {
                showNotification('Clientul selectat nu a fost gƒÉsit!', 'error');
                return;
            }
            
            const newDocument = {
                id: Date.now(),
                clientId: parseInt(clientId),
                clientName: client.name,
                category: category,
                name: fileName,
                type: fileType,
                data: window.tempFileData,
                size: fileSize,
                uploadDate: new Date().toISOString(),
                source: 'upload'
            };
            
            // Add to global documents array
            appData.documents.push(newDocument);
            
            // Also add to client's documents for backward compatibility
            if (!client.documents) client.documents = [];
            client.documents.push(newDocument);
            
            saveData();
            updateUI();
            hideModal('uploadFileModal');
            
            // Clean up
            delete window.tempFileData;
            document.getElementById('upload-file').value = '';
            
            showNotification('Document uplodat cu succes!', 'success');
        }

        function renderDocuments() {
            const container = document.getElementById('documents-grid');
            
            if (appData.documents.length === 0) {
                container.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 3rem; color: #6b7280;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üìÅ</div>
                        <p>Nu ave»õi documente √ÆncƒÉ</p>
                        <p style="font-size: 0.875rem; margin-top: 0.5rem;">
                            Folosi»õi camera pentru a fotografia PV-uri »ôi fi»ôe tehnice
                        </p>
                    </div>
                `;
                return;
            }

            // Group documents by client
            const documentsByClient = {};
            appData.documents.forEach(doc => {
                if (!documentsByClient[doc.clientId]) {
                    documentsByClient[doc.clientId] = [];
                }
                documentsByClient[doc.clientId].push(doc);
            });

            container.innerHTML = Object.keys(documentsByClient).map(clientId => {
                const client = appData.clients.find(c => c.id == clientId);
                const clientDocs = documentsByClient[clientId];
                
                return `
                    <div style="grid-column: 1 / -1; margin-bottom: 2rem;">
                        <h4 style="color: #1e3c72; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            üë§ ${client ? client.name : 'Client Necunoscut'} 
                            <span style="background: #e5e7eb; color: #6b7280; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.75rem;">
                                ${clientDocs.length} doc${clientDocs.length > 1 ? 'umente' : 'ument'}
                            </span>
                        </h4>
                        <div class="document-grid">
                            ${clientDocs.map(doc => `
                                <div class="document-card has-document" onclick="viewDocument(${doc.id})">
                                    <div class="document-category">${getCategoryIcon(doc.category)} ${getCategoryName(doc.category)}</div>
                                    <div class="document-preview">
                                        ${doc.type.startsWith('image/') ? 
                                            `<img src="${doc.data}" alt="${doc.name}">` :
                                            `<div style="color: #6b7280; font-size: 2rem;">üìÑ</div>`
                                        }
                                    </div>
                                    <div style="font-weight: 500; font-size: 0.875rem; margin-bottom: 0.25rem;">${doc.name}</div>
                                    <div style="font-size: 0.75rem; color: #6b7280;">
                                        ${new Date(doc.uploadDate).toLocaleDateString('ro-RO')}
                                    </div>
                                    <div class="document-actions">
                                        <button class="btn btn-primary" onclick="event.stopPropagation(); viewDocument(${doc.id})" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;">
                                            üëÅÔ∏è
                                        </button>
                                        <button class="btn btn-success" onclick="event.stopPropagation(); downloadDocument(${doc.id})" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;">
                                            ‚¨áÔ∏è
                                        </button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function getCategoryIcon(category) {
            const icons = {
                'pv-verificare': 'üìã',
                'fisa-tehnica': 'üîß',
                'certificat': 'üìú',
                'factura': 'üí∞',
                'contract': 'üìÑ',
                'altele': 'üìÅ'
            };
            return icons[category] || 'üìÑ';
        }

        function viewDocument(docId) {
            const docItem = appData.documents.find(d => d.id === docId);
            if (!docItem) return;
            
            currentDocumentForDownload = docItem;
            
            const content = docItem.type.startsWith('image/') ?
                `<img src="${docItem.data}" style="max-width: 100%; max-height: 70vh; object-fit: contain; border-radius: 8px;">` :
                `<div style="text-align: center; padding: 3rem; color: #6b7280;">
                    <div style="font-size: 4rem; margin-bottom: 1rem;">üìÑ</div>
                    <p>Preview nu este disponibil pentru acest tip de fi»ôier</p>
                    <p style="font-size: 0.875rem; margin-top: 0.5rem;">Folosi»õi butonul Download pentru a vizualiza</p>
                </div>`;
            
            document.getElementById('doc-viewer-title').textContent = `üìÑ ${docItem.name}`;
            document.getElementById('document-viewer-content').innerHTML = content;
            showModal('documentViewerModal');
        }

        function downloadDocument(docId) {
            const docItem = appData.documents.find(d => d.id === docId);
            if (!docItem) return;
            
            const link = document.createElement('a');
            link.href = docItem.data;
            link.download = docItem.name;
            link.click();
        }

        function downloadCurrentDocument() {
            if (currentDocumentForDownload) {
                downloadDocument(currentDocumentForDownload.id);
            }
        }

        // Website Sync Functions
        function importFromWebsite() {
            // Simulate importing data from website
            const mockWebsiteData = [
                {
                    name: "Ion Popescu",
                    phone: "0721234567",
                    email: "ion@example.com",
                    service: "Verificare TehnicƒÉ PeriodicƒÉ",
                    address: "Str. LibertƒÉ»õii 15, Rosiori de Vede",
                    preferredDate: new Date(Date.now() + 2 * 24 * 60 * 60 * 1000).toISOString().split('T')[0], // 2 days from now
                    message: "Doresc programare pentru verificarea instala»õiei de gaz."
                },
                {
                    name: "Maria Ionescu",
                    phone: "0734567890",
                    service: "Revizii Centrale Termice",
                    address: "Str. Mihai Viteazu 22, Rosiori de Vede",
                    preferredDate: new Date(Date.now() + 3 * 24 * 60 * 60 * 1000).toISOString().split('T')[0], // 3 days from now
                    message: "Centrala face zgomote ciudate, a»ô vrea o verificare."
                }
            ];
            
            showConfirm(
                `GƒÉsite ${mockWebsiteData.length} cereri noi de pe site. Vrei sƒÉ le impor»õi ca programƒÉri?`,
                'Import de pe Site',
                {
                    confirmText: 'ImportƒÉ toate',
                    cancelText: 'AnuleazƒÉ'
                }
            ).then((confirmed) => {
                if (confirmed) {
                    mockWebsiteData.forEach(data => {
                        // Check if client exists
                        let client = appData.clients.find(c => c.phone === data.phone);
                        
                        if (!client) {
                            // Create new client
                            client = {
                                id: Date.now() + Math.random(),
                                name: data.name,
                                phone: data.phone,
                                email: data.email || '',
                                address: data.address,
                                createdAt: new Date().toISOString(),
                                totalServices: 0,
                                documents: []
                            };
                            appData.clients.push(client);
                        }
                        
                        // Create appointment
                        const appointment = {
                            id: Date.now() + Math.random(),
                            clientId: client.id,
                            clientName: client.name,
                            phone: client.phone,
                            service: data.service,
                            address: data.address,
                            date: data.preferredDate,
                            time: "09:00", // Default time
                            price: 0,
                            notes: `Import din site: ${data.message}`,
                            status: 'programat',
                            createdAt: new Date().toISOString(),
                            source: 'website'
                        };
                        appData.appointments.push(appointment);
                    });
                    
                    saveData();
                    updateUI();
                    showNotification(`${mockWebsiteData.length} programƒÉri importate cu succes din site!`, 'success');
                }
            });
        }

        function checkWebsiteRequests() {
            // Simulate checking for new website requests
            const randomRequests = Math.floor(Math.random() * 5);
            document.getElementById('website-requests').textContent = randomRequests;
            
            if (randomRequests > 0) {
                showConfirm(
                    `GƒÉsite ${randomRequests} cereri noi pe site! Vrei sƒÉ le impor»õi?`,
                    'Cereri Noi pe Site',
                    {
                        confirmText: 'ImportƒÉ',
                        cancelText: 'Mai t√¢rziu'
                    }
                ).then((confirmed) => {
                    if (confirmed) {
                        importFromWebsite();
                    }
                });
            } else {
                showNotification('Nu sunt cereri noi pe site √Æn acest moment.', 'info');
            }
        }

        // Client functions
        function addClient() {
            const name = document.getElementById('client-name').value.trim();
            const phone = document.getElementById('client-phone').value.trim();
            const email = document.getElementById('client-email').value.trim();
            const address = document.getElementById('client-address').value.trim();

            if (!name || !phone || !address) {
                showNotification('Te rog sƒÉ completezi toate c√¢mpurile obligatorii!', 'warning');
                return;
            }

            const newClient = {
                id: Date.now(),
                name: name,
                phone: phone,
                email: email,
                address: address,
                createdAt: new Date().toISOString(),
                totalServices: 0,
                documents: []
            };

            appData.clients.push(newClient);
            saveData();
            updateUI();
            hideModal('addClientModal');
            
            showNotification(`Client "${name}" adƒÉugat cu succes!`, 'success');
        }

        function showClientDetails(clientId) {
            const client = appData.clients.find(c => c.id === clientId);
            if (!client) return;
            
            const clientAppointments = appData.appointments.filter(apt => apt.clientId === clientId || apt.clientName === client.name);
            const clientReminders = appData.reminders.filter(r => r.clientId === clientId || r.clientName === client.name);
            const clientDocuments = appData.documents.filter(d => d.clientId === clientId);
            
            const content = `
                <div style="margin-bottom: 2rem;">
                    <h4 style="color: #111827; margin-bottom: 1rem;">üìã Informa»õii Client</h4>
                    <div style="background: #f9fafb; padding: 1rem; border-radius: 8px;">
                        <p><strong>Nume:</strong> ${client.name}</p>
                        <p><strong>Telefon:</strong> ${client.phone}</p>
                        <p><strong>Email:</strong> ${client.email || 'Nu este specificat'}</p>
                        <p><strong>Adresa:</strong> ${client.address}</p>
                        <p><strong>Client din:</strong> ${new Date(client.createdAt).toLocaleDateString('ro-RO')}</p>
                    </div>
                </div>
                
                ${clientDocuments.length > 0 ? `
                <div style="margin-bottom: 2rem;">
                    <h4 style="color: #111827; margin-bottom: 1rem;">üìé Documente (${clientDocuments.length})</h4>
                    <div style="display: grid; gap: 0.5rem;">
                        ${clientDocuments.map(doc => `
                            <div style="display: flex; justify-content: space-between; align-items: center; background: #f3f4f6; padding: 0.75rem; border-radius: 6px;">
                                <div>
                                    <div style="font-weight: 500;">${getCategoryIcon(doc.category)} ${doc.name}</div>
                                    <div style="font-size: 0.875rem; color: #6b7280;">
                                        ${new Date(doc.uploadDate).toLocaleDateString('ro-RO')} ‚Ä¢ ${(doc.size / 1024).toFixed(1)} KB
                                    </div>
                                </div>
                                <button class="btn btn-primary" onclick="viewDocument(${doc.id})" style="padding: 0.5rem;">
                                    üëÅÔ∏è
                                </button>
                            </div>
                        `).join('')}
                    </div>
                </div>
                ` : ''}
                
                ${clientAppointments.length > 0 ? `
                <div style="margin-bottom: 2rem;">
                    <h4 style="color: #111827; margin-bottom: 1rem;">üìÖ Istoric ProgramƒÉri (${clientAppointments.length})</h4>
                    <div style="display: grid; gap: 0.5rem;">
                        ${clientAppointments.slice(0, 5).map(apt => `
                            <div style="background: #f3f4f6; padding: 0.75rem; border-radius: 6px;">
                                <div style="font-weight: 500;">${apt.service}</div>
                                <div style="font-size: 0.875rem; color: #6b7280;">
                                    ${new Date(apt.date).toLocaleDateString('ro-RO')} ‚Ä¢ ${apt.time} ‚Ä¢ ${getStatusText(apt.status)}
                                </div>
                            </div>
                        `).join('')}
                        ${clientAppointments.length > 5 ? `<div style="text-align: center; color: #6b7280; font-size: 0.875rem;">... »ôi √ÆncƒÉ ${clientAppointments.length - 5} programƒÉri</div>` : ''}
                    </div>
                </div>
                ` : ''}
            `;
            
            document.getElementById('client-details-content').innerHTML = content;
            showModal('clientDetailsModal');
        }

        function renderClients(clientsToRender = null) {
            const clients = clientsToRender || appData.clients;
            const container = document.getElementById('clients-list');
            
            if (clients.length === 0) {
                container.innerHTML = '<p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">Nu ave»õi clien»õi √ÆncƒÉ</p>';
                return;
            }

            container.innerHTML = clients.map(client => {
                const clientDocuments = appData.documents.filter(d => d.clientId === client.id);
                
                return `
                    <div class="list-item">
                        <div class="avatar">${client.name.charAt(0).toUpperCase()}</div>
                        <div class="list-content">
                            <div class="list-title">${client.name}</div>
                            <div class="list-subtitle">üìû ${client.phone} ‚Ä¢ üìç ${client.address}</div>
                            ${clientDocuments.length > 0 ? `
                                <div class="text-xs" style="color: #10b981; margin-top: 0.25rem;">
                                    üìé ${clientDocuments.length} document${clientDocuments.length > 1 ? 'e' : ''}
                                </div>
                            ` : ''}
                        </div>
                        <div class="flex gap-1" style="flex-direction: column;">
                            <div class="flex gap-1">
                                <button class="btn btn-primary" onclick="callClient('${client.phone}')" style="padding: 0.4rem; font-size: 0.75rem;">
                                    üìû
                                </button>
                                <button class="btn btn-success" onclick="showClientDetails(${client.id})" style="padding: 0.4rem; font-size: 0.75rem;">
                                    üëÅÔ∏è
                                </button>
                            </div>
                            <button class="btn btn-warning" onclick="showModal('addDocumentModal'); populateDocumentClientDropdown(); document.getElementById('document-client-select').value='${client.id}'" style="padding: 0.3rem; font-size: 0.7rem;">
                                üì∑ Foto
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function searchClients(searchTerm) {
            if (!searchTerm.trim()) {
                renderClients();
                return;
            }

            const filtered = appData.clients.filter(client =>
                client.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                client.phone.includes(searchTerm) ||
                client.address.toLowerCase().includes(searchTerm.toLowerCase())
            );

            renderClients(filtered);
        }

        function callClient(phone) {
            window.open(`tel:${phone}`);
        }

        // Appointment functions
        function addAppointment() {
            const clientDropdown = document.getElementById('appointment-client-select');
            const manualNameInput = document.getElementById('appointment-client-name');
            const phone = document.getElementById('appointment-phone').value.trim();
            const service = document.getElementById('appointment-service').value;
            const address = document.getElementById('appointment-address').value.trim();
            const date = document.getElementById('appointment-date').value;
            const time = document.getElementById('appointment-time').value;
            const price = document.getElementById('appointment-price').value;
            const notes = document.getElementById('appointment-notes').value.trim();

            let clientName = '';
            let clientId = null;

            if (clientDropdown.value === 'new-client') {
                clientName = manualNameInput.value.trim();
                if (!clientName) {
                    showNotification('Te rog sƒÉ introduci numele clientului!', 'warning');
                    return;
                }
            } else if (clientDropdown.value === '') {
                showNotification('Te rog sƒÉ selectezi un client sau sƒÉ alegi "Client Nou"!', 'warning');
                return;
            } else {
                clientId = parseInt(clientDropdown.value);
                const client = appData.clients.find(c => c.id === clientId);
                if (client) {
                    clientName = client.name;
                }
            }

            if (!clientName || !phone || !service || !address || !date || !time) {
                showNotification('Te rog sƒÉ completezi toate c√¢mpurile obligatorii!', 'warning');
                return;
            }

            const newAppointment = {
                id: Date.now(),
                clientId: clientId,
                clientName: clientName,
                phone: phone,
                service: service,
                address: address,
                date: date,
                time: time,
                price: parseFloat(price) || 0,
                notes: notes,
                status: 'programat',
                createdAt: new Date().toISOString()
            };

            appData.appointments.push(newAppointment);
            
            if (clientId === null) {
                const existingClient = appData.clients.find(c => 
                    c.name.toLowerCase() === clientName.toLowerCase() && c.phone === phone
                );
                
                if (!existingClient) {
                    const newClient = {
                        id: Date.now() + 1,
                        name: clientName,
                        phone: phone,
                        email: '',
                        address: address,
                        createdAt: new Date().toISOString(),
                        totalServices: 0,
                        documents: []
                    };
                    appData.clients.push(newClient);
                }
            }
            
            saveData();
            updateUI();
            hideModal('addAppointmentModal');
            
            showNotification(`Programare pentru "${clientName}" adƒÉugatƒÉ cu succes!`, 'success');
        }

        function renderAppointments(appointmentsToRender = null) {
            const appointments = appointmentsToRender || appData.appointments;
            const container = document.getElementById('appointments-list');
            
            if (appointments.length === 0) {
                container.innerHTML = '<p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">Nu ave»õi programƒÉri √ÆncƒÉ</p>';
                return;
            }

            container.innerHTML = appointments.map(apt => `
                <div class="list-item">
                    <div class="avatar" style="background: ${getStatusColor(apt.status)};">${apt.clientName.charAt(0).toUpperCase()}</div>
                    <div class="list-content">
                        <div class="list-title">${apt.clientName} - ${apt.service}</div>
                        <div class="list-subtitle">
                            üìÖ ${new Date(apt.date).toLocaleDateString('ro-RO')} ‚Ä¢ ‚è∞ ${apt.time} ‚Ä¢ üìç ${apt.address}
                            ${apt.price ? ` ‚Ä¢ üí∞ ${apt.price} RON` : ''}
                        </div>
                        <div class="text-xs mt-2">
                            <span style="background: ${getStatusColor(apt.status)}; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">
                                ${getStatusText(apt.status)}
                            </span>
                        </div>
                    </div>
                    <div class="flex gap-1" style="flex-direction: column;">
                        <div class="flex gap-1">
                            ${apt.status === 'programat' ? `
                                <button class="btn btn-success" onclick="updateAppointmentStatus(${apt.id}, 'in-progres')" style="padding: 0.4rem; font-size: 0.75rem;">
                                    ‚ñ∂Ô∏è
                                </button>
                            ` : ''}
                            ${apt.status === 'in-progres' ? `
                                <button class="btn btn-success" onclick="updateAppointmentStatus(${apt.id}, 'finalizat')" style="padding: 0.4rem; font-size: 0.75rem;">
                                    ‚úÖ
                                </button>
                            ` : ''}
                            <button class="btn btn-primary" onclick="callClient('${apt.phone}')" style="padding: 0.4rem; font-size: 0.75rem;">
                                üìû
                            </button>
                        </div>
                        <div class="flex gap-1">
                            <button class="btn btn-success" onclick="sendAppointmentWhatsApp('${apt.phone}', '${apt.clientName}', '${apt.service}', '${apt.date}', '${apt.time}')" style="padding: 0.3rem; font-size: 0.7rem;">
                                üì±
                            </button>
                            <button class="btn btn-primary" onclick="sendAppointmentSMS('${apt.phone}', '${apt.clientName}', '${apt.service}', '${apt.date}', '${apt.time}')" style="padding: 0.3rem; font-size: 0.7rem;">
                                üí¨
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function searchAppointments(searchTerm) {
            if (!searchTerm.trim()) {
                renderAppointments();
                return;
            }

            const filtered = appData.appointments.filter(apt =>
                apt.clientName.toLowerCase().includes(searchTerm.toLowerCase()) ||
                apt.service.toLowerCase().includes(searchTerm.toLowerCase()) ||
                apt.address.toLowerCase().includes(searchTerm.toLowerCase())
            );

            renderAppointments(filtered);
        }

        function updateAppointmentStatus(id, newStatus) {
            const appointment = appData.appointments.find(apt => apt.id === id);
            if (appointment) {
                appointment.status = newStatus;
                if (newStatus === 'finalizat') {
                    appointment.completedAt = new Date().toISOString();
                }
                saveData();
                updateUI();
            }
        }

        function getStatusColor(status) {
            switch (status) {
                case 'finalizat': return '#10b981';
                case 'in-progres': return '#f59e0b';
                default: return '#3b82f6';
            }
        }

        function getStatusText(status) {
            switch (status) {
                case 'finalizat': return 'Finalizat';
                case 'in-progres': return '√én Progres';
                default: return 'Programat';
            }
        }

        // Reminder functions
        function addReminder() {
            const clientDropdown = document.getElementById('reminder-client-select');
            const manualNameInput = document.getElementById('reminder-client-name');
            const phone = document.getElementById('reminder-phone').value.trim();
            const type = document.getElementById('reminder-type').value;
            const date = document.getElementById('reminder-date').value;
            const message = document.getElementById('reminder-message').value.trim();

            let clientName = '';
            let clientId = null;

            if (clientDropdown.value === 'new-client') {
                clientName = manualNameInput.value.trim();
                if (!clientName) {
                    showNotification('Te rog sƒÉ introduci numele clientului!', 'warning');
                    return;
                }
            } else if (clientDropdown.value === '') {
                showNotification('Te rog sƒÉ selectezi un client sau sƒÉ alegi "Client Nou"!', 'warning');
                return;
            } else {
                clientId = parseInt(clientDropdown.value);
                const client = appData.clients.find(c => c.id === clientId);
                if (client) {
                    clientName = client.name;
                }
            }

            if (!clientName || !phone || !type || !date || !message) {
                showNotification('Te rog sƒÉ completezi toate c√¢mpurile obligatorii!', 'warning');
                return;
            }

            const newReminder = {
                id: Date.now(),
                clientId: clientId,
                clientName: clientName,
                phone: phone,
                type: type,
                reminderDate: date,
                message: message,
                sent: false,
                createdAt: new Date().toISOString()
            };

            appData.reminders.push(newReminder);
            saveData();
            updateUI();
            hideModal('addReminderModal');
            
            showNotification(`Reminder pentru "${clientName}" adƒÉugat cu succes!`, 'success');
        }

        function updateReminderMessage() {
            const type = document.getElementById('reminder-type').value;
            const messageField = document.getElementById('reminder-message');
            
            const templates = {
                'verificare-instalatii-gaz': 'BunƒÉ ziua! VƒÉ aducem aminte cƒÉ se apropie termenul pentru verificarea tehnicƒÉ a instala»õiilor de gaze. VƒÉ rugƒÉm sƒÉ ne contacta»õi pentru programare. Ad Instal Gaz SRL - 0762 614 401',
                'verificare-centrale-termice': 'BunƒÉ ziua! Este timpul pentru revizia/verificarea centralei termice. Contacta»õi-ne pentru programare. Ad Instal Gaz SRL - 0762 614 401',
                'urmƒÉrire-factura': 'BunƒÉ ziua! VƒÉ aducem aminte despre factura pentru serviciile prestate. Pentru detalii, contacta»õi-ne la 0762 614 401. Ad Instal Gaz SRL'
            };

            messageField.value = templates[type] || '';
        }

        function renderReminders() {
            const container = document.getElementById('active-reminders');
            const activeReminders = appData.reminders.filter(r => !r.sent);
            
            if (activeReminders.length === 0) {
                container.innerHTML = '<p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">Nu existƒÉ reminder-e active</p>';
                return;
            }

            container.innerHTML = activeReminders.map(reminder => `
                <div class="list-item">
                    <div class="avatar">üîî</div>
                    <div class="list-content">
                        <div class="list-title">${reminder.clientName}</div>
                        <div class="list-subtitle">${reminder.message.substring(0, 100)}...</div>
                        <div class="text-xs" style="color: #6b7280;">
                            Programat: ${new Date(reminder.reminderDate).toLocaleDateString('ro-RO')}
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <button class="btn btn-success" onclick="sendWhatsApp('${reminder.phone}', '${reminder.message}')" style="padding: 0.5rem;">
                            üì±
                        </button>
                        <button class="btn btn-primary" onclick="sendSMS('${reminder.phone}', '${reminder.message}')" style="padding: 0.5rem;">
                            üí¨
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function sendWhatsApp(phone, message) {
            const cleanPhone = phone.replace(/\D/g, '').slice(-9);
            const whatsappURL = `https://wa.me/40${cleanPhone}?text=${encodeURIComponent(message)}`;
            window.open(whatsappURL, '_blank');
        }

        function sendSMS(phone, message) {
            const cleanPhone = phone.replace(/\D/g, '').slice(-9);
            const smsURL = `sms:+40${cleanPhone}?body=${encodeURIComponent(message)}`;
            window.location.href = smsURL;
        }

        // WhatsApp/SMS for appointments
        function sendAppointmentWhatsApp(phone, clientName, service, date, time) {
            const formattedDate = new Date(date).toLocaleDateString('ro-RO');
            const message = `BunƒÉ ziua ${clientName}! VƒÉ reamintim despre programarea pentru ${service} pe data de ${formattedDate} la ora ${time}. Ad Instal Gaz SRL - 0762 614 401`;
            sendWhatsApp(phone, message);
        }

        function sendAppointmentSMS(phone, clientName, service, date, time) {
            const formattedDate = new Date(date).toLocaleDateString('ro-RO');
            const message = `BunƒÉ ziua ${clientName}! Programare ${service} pe ${formattedDate} la ${time}. Ad Instal Gaz SRL - 0762 614 401`;
            sendSMS(phone, message);
        }

        // Tomorrow work plan functions
        function renderTomorrowTasks() {
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            const tomorrowStr = tomorrow.toISOString().split('T')[0];
            
            // Tomorrow appointments
            const tomorrowAppointments = appData.appointments.filter(apt => apt.date === tomorrowStr);
            const appointmentsContainer = document.getElementById('tomorrow-appointments');
            
            if (tomorrowAppointments.length === 0) {
                appointmentsContainer.innerHTML = '<p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">Nu ave»õi programƒÉri m√¢ine</p>';
            } else {
                appointmentsContainer.innerHTML = tomorrowAppointments.map(apt => `
                    <div class="list-item">
                        <div class="avatar" style="background: ${getStatusColor(apt.status)};">${apt.clientName.charAt(0).toUpperCase()}</div>
                        <div class="list-content">
                            <div class="list-title">${apt.time} - ${apt.clientName}</div>
                            <div class="list-subtitle">${apt.service} ‚Ä¢ üìç ${apt.address}</div>
                            <div class="text-xs" style="color: #6b7280;">üìû ${apt.phone}</div>
                        </div>
                        <div class="flex gap-1">
                            <button class="btn btn-primary" onclick="callClient('${apt.phone}')" style="padding: 0.4rem; font-size: 0.75rem;">üìû</button>
                            <button class="btn btn-success" onclick="sendAppointmentWhatsApp('${apt.phone}', '${apt.clientName}', '${apt.service}', '${apt.date}', '${apt.time}')" style="padding: 0.4rem; font-size: 0.75rem;">üì±</button>
                        </div>
                    </div>
                `).join('');
            }
            
            // Tomorrow reminders
            const tomorrowReminders = appData.reminders.filter(r => r.reminderDate === tomorrowStr && !r.sent);
            const remindersContainer = document.getElementById('tomorrow-reminders');
            
            if (tomorrowReminders.length === 0) {
                remindersContainer.innerHTML = '<p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">Nu ave»õi reminder-e m√¢ine</p>';
            } else {
                remindersContainer.innerHTML = tomorrowReminders.map(reminder => `
                    <div class="list-item">
                        <div class="avatar">üîî</div>
                        <div class="list-content">
                            <div class="list-title">${reminder.clientName}</div>
                            <div class="list-subtitle">${reminder.message.substring(0, 50)}...</div>
                            <div class="text-xs" style="color: #6b7280;">üìû ${reminder.phone}</div>
                        </div>
                        <div class="flex gap-1">
                            <button class="btn btn-success" onclick="sendWhatsApp('${reminder.phone}', '${reminder.message}')" style="padding: 0.4rem; font-size: 0.75rem;">üì±</button>
                            <button class="btn btn-primary" onclick="sendSMS('${reminder.phone}', '${reminder.message}')" style="padding: 0.4rem; font-size: 0.75rem;">üí¨</button>
                        </div>
                    </div>
                `).join('');
            }
            
            // Update tomorrow stats
            if (document.getElementById('tomorrow-total-tasks')) {
                document.getElementById('tomorrow-total-tasks').textContent = tomorrowAppointments.length + tomorrowReminders.length;
                document.getElementById('tomorrow-appointments-count').textContent = tomorrowAppointments.length;
                document.getElementById('tomorrow-reminders-count').textContent = tomorrowReminders.length;
            }
        }

        function exportTomorrowWorkPlan() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            const tomorrowStr = tomorrow.toISOString().split('T')[0];
            const tomorrowFormatted = tomorrow.toLocaleDateString('ro-RO');
            
            // Title
            doc.setFontSize(20);
            doc.text('FI»òA DE LUCRU', 20, 20);
            doc.setFontSize(16);
            doc.text(`Ad Instal Gaz SRL - ${tomorrowFormatted}`, 20, 30);
            
            let yPosition = 50;
            
            // Appointments
            const tomorrowAppointments = appData.appointments.filter(apt => apt.date === tomorrowStr);
            if (tomorrowAppointments.length > 0) {
                doc.setFontSize(14);
                doc.text('PROGRAMƒÇRI:', 20, yPosition);
                yPosition += 10;
                
                const appointmentsData = tomorrowAppointments.map(apt => [
                    apt.time,
                    apt.clientName,
                    apt.service,
                    apt.address,
                    apt.phone
                ]);
                
                doc.autoTable({
                    startY: yPosition,
                    head: [['Ora', 'Client', 'Serviciu', 'Adresa', 'Telefon']],
                    body: appointmentsData,
                    margin: { left: 20 },
                    styles: { fontSize: 10 }
                });
                
                yPosition = doc.lastAutoTable.finalY + 20;
            }
            
            // Reminders
            const tomorrowReminders = appData.reminders.filter(r => r.reminderDate === tomorrowStr && !r.sent);
            if (tomorrowReminders.length > 0) {
                doc.setFontSize(14);
                doc.text('REMINDER-E DE TRIMIS:', 20, yPosition);
                yPosition += 10;
                
                const remindersData = tomorrowReminders.map(r => [
                    r.clientName,
                    r.phone,
                    r.type,
                    r.message.substring(0, 50) + '...'
                ]);
                
                doc.autoTable({
                    startY: yPosition,
                    head: [['Client', 'Telefon', 'Tip', 'Mesaj']],
                    body: remindersData,
                    margin: { left: 20 },
                    styles: { fontSize: 9 }
                });
            }
            
            doc.save(`Fisa-Lucru-${tomorrowFormatted}.pdf`);
        }

        // Reminder automation functions
        function sendTomorrowReminders() {
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            const tomorrowStr = tomorrow.toISOString().split('T')[0];
            
            const tomorrowReminders = appData.reminders.filter(r => r.reminderDate === tomorrowStr && !r.sent);
            
            if (tomorrowReminders.length === 0) {
                showNotification('Nu existƒÉ reminder-e programate pentru m√¢ine.', 'info');
                return;
            }
            
            showConfirm(
                `Vrei sƒÉ trimi»õi ${tomorrowReminders.length} reminder-e prin WhatsApp pentru m√¢ine?`,
                'Trimite Reminder-e',
                {
                    confirmText: 'Trimite toate',
                    cancelText: 'AnuleazƒÉ'
                }
            ).then((confirmed) => {
                if (confirmed) {
                    tomorrowReminders.forEach(reminder => {
                        sendWhatsApp(reminder.phone, reminder.message);
                        reminder.sent = true;
                    });
                    
                    saveData();
                    updateUI();
                    showNotification(`${tomorrowReminders.length} reminder-e trimise cu succes!`, 'success');
                }
            });
        }

        function sendTodayReminders() {
            const today = new Date().toISOString().split('T')[0];
            const todayReminders = appData.reminders.filter(r => r.reminderDate === today && !r.sent);
            
            if (todayReminders.length === 0) {
                showNotification('Nu existƒÉ reminder-e programate pentru azi.', 'info');
                return;
            }
            
            showConfirm(
                `Vrei sƒÉ trimi»õi ${todayReminders.length} reminder-e prin WhatsApp pentru azi?`,
                'Trimite Reminder-e',
                {
                    confirmText: 'Trimite toate',
                    cancelText: 'AnuleazƒÉ'
                }
            ).then((confirmed) => {
                if (confirmed) {
                    todayReminders.forEach(reminder => {
                        sendWhatsApp(reminder.phone, reminder.message);
                        reminder.sent = true;
                    });
                    
                    saveData();
                    updateUI();
                    showNotification(`${todayReminders.length} reminder-e trimise cu succes!`, 'success');
                }
            });
        }

        // Export functions
        function exportToExcel() {
            const wb = XLSX.utils.book_new();
            
            // Clients sheet
            const clientsData = appData.clients.map(client => ({
                'Nume': client.name,
                'Telefon': client.phone,
                'Email': client.email || '',
                'Adresa': client.address,
                'Documente': appData.documents.filter(d => d.clientId === client.id).length,
                'Data AdƒÉugƒÉrii': new Date(client.createdAt).toLocaleDateString('ro-RO')
            }));
            const clientsWS = XLSX.utils.json_to_sheet(clientsData);
            XLSX.utils.book_append_sheet(wb, clientsWS, 'Clien»õi');
            
            // Appointments sheet
            const appointmentsData = appData.appointments.map(apt => ({
                'Client': apt.clientName,
                'Telefon': apt.phone,
                'Serviciu': apt.service,
                'Data': new Date(apt.date).toLocaleDateString('ro-RO'),
                'Ora': apt.time,
                'Adresa': apt.address,
                'Pre»õ (RON)': apt.price || 0,
                'Status': getStatusText(apt.status),
                'Observa»õii': apt.notes || '',
                'Data CreƒÉrii': new Date(apt.createdAt).toLocaleDateString('ro-RO')
            }));
            const appointmentsWS = XLSX.utils.json_to_sheet(appointmentsData);
            XLSX.utils.book_append_sheet(wb, appointmentsWS, 'ProgramƒÉri');
            
            // Reminders sheet
            const remindersData = appData.reminders.map(reminder => ({
                'Client': reminder.clientName,
                'Telefon': reminder.phone,
                'Tip': reminder.type,
                'Data Reminder': new Date(reminder.reminderDate).toLocaleDateString('ro-RO'),
                'Mesaj': reminder.message,
                'Trimis': reminder.sent ? 'Da' : 'Nu',
                'Data CreƒÉrii': new Date(reminder.createdAt).toLocaleDateString('ro-RO')
            }));
            const remindersWS = XLSX.utils.json_to_sheet(remindersData);
            XLSX.utils.book_append_sheet(wb, remindersWS, 'Reminder-uri');

            // Documents sheet
            const documentsData = appData.documents.map(doc => ({
                'Client': doc.clientName,
                'Tip Document': getCategoryName(doc.category),
                'Nume': doc.name,
                'MƒÉrime (KB)': Math.round(doc.size / 1024),
                'Data Upload': new Date(doc.uploadDate).toLocaleDateString('ro-RO'),
                'SursƒÉ': doc.source === 'camera' ? 'CamerƒÉ' : 'Upload'
            }));
            const documentsWS = XLSX.utils.json_to_sheet(documentsData);
            XLSX.utils.book_append_sheet(wb, documentsWS, 'Documente');
            
            // Statistics sheet
            const stats = calculateStats();
            const statsData = [
                { 'Indicator': 'Total Clien»õi', 'Valoare': stats.totalClients },
                { 'Indicator': 'ProgramƒÉri Luna Aceasta', 'Valoare': stats.monthAppointments },
                { 'Indicator': 'ProgramƒÉri √Æn A»ôteptare', 'Valoare': stats.pendingAppointments },
                { 'Indicator': 'ProgramƒÉri Finalizate', 'Valoare': stats.completedAppointments },
                { 'Indicator': 'Total Documente', 'Valoare': stats.totalDocuments },
                { 'Indicator': 'ActivitƒÉ»õi M√¢ine', 'Valoare': stats.tomorrowTasks }
            ];
            const statsWS = XLSX.utils.json_to_sheet(statsData);
            XLSX.utils.book_append_sheet(wb, statsWS, 'Statistici');
            
            // Save file
            const today = new Date().toISOString().split('T')[0];
            XLSX.writeFile(wb, `AdInstalGaz-Raport-${today}.xlsx`);
        }

        function exportToPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Title
            doc.setFontSize(20);
            doc.text('Ad Instal Gaz SRL - Raport', 20, 20);
            
            doc.setFontSize(12);
            doc.text(`Data: ${new Date().toLocaleDateString('ro-RO')}`, 20, 30);
            
            let yPosition = 50;
            
            // Statistics
            doc.setFontSize(16);
            doc.text('Statistici Generale', 20, yPosition);
            yPosition += 10;
            
            const stats = calculateStats();
            const statsData = [
                ['Total Clien»õi', stats.totalClients],
                ['ProgramƒÉri Luna Aceasta', stats.monthAppointments],
                ['ProgramƒÉri √Æn A»ôteptare', stats.pendingAppointments],
                ['ProgramƒÉri Finalizate', stats.completedAppointments],
                ['Total Documente', stats.totalDocuments],
                ['ActivitƒÉ»õi M√¢ine', stats.tomorrowTasks]
            ];
            
            doc.autoTable({
                startY: yPosition,
                head: [['Indicator', 'Valoare']],
                body: statsData,
                margin: { left: 20 },
                styles: { fontSize: 10 }
            });
            
            yPosition = doc.lastAutoTable.finalY + 20;
            
            // Appointments
            if (appData.appointments.length > 0) {
                doc.setFontSize(16);
                doc.text('ProgramƒÉri Recente', 20, yPosition);
                yPosition += 10;
                
                const appointmentsData = appData.appointments.slice(0, 15).map(apt => [
                    apt.clientName,
                    apt.service,
                    new Date(apt.date).toLocaleDateString('ro-RO'),
                    apt.time,
                    getStatusText(apt.status),
                    apt.price ? `${apt.price} RON` : '-'
                ]);
                
                doc.autoTable({
                    startY: yPosition,
                    head: [['Client', 'Serviciu', 'Data', 'Ora', 'Status', 'Pre»õ']],
                    body: appointmentsData,
                    margin: { left: 20 },
                    styles: { fontSize: 8 }
                });
            }
            
            // Save PDF
            const today = new Date().toISOString().split('T')[0];
            doc.save(`AdInstalGaz-Raport-${today}.pdf`);
        }

        // Backup and restore functions
        function backupData() {
            const backupData = {
                ...appData,
                backupInfo: {
                    version: '2.1-PWA-Enhanced',
                    timestamp: new Date().toISOString(),
                    totalClients: appData.clients.length,
                    totalAppointments: appData.appointments.length,
                    totalReminders: appData.reminders.length,
                    totalDocuments: appData.documents.length
                }
            };
            
            const blob = new Blob([JSON.stringify(backupData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `AdInstalGaz-Backup-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            showNotification('Backup realizat cu succes!', 'success');
        }

        function restoreData(input) {
            const file = input.files[0];
            if (!file) return;
            
            if (!file.name.endsWith('.json')) {
                showNotification('Te rog sƒÉ selectezi un fi»ôier JSON valid!', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const backupData = JSON.parse(e.target.result);
                    
                    // Validate backup data
                    if (!backupData.clients || !backupData.appointments || !backupData.reminders) {
                        throw new Error('Fi»ôierul nu con»õine date valide!');
                    }
                    
                    showConfirm(
                        'ATEN»öIE!\nAceasta va √Ænlocui TOATE datele curente cu cele din backup.\nE»ôti sigur cƒÉ vrei sƒÉ continui?',
                        'Confirmare Restore',
                        {
                            confirmText: 'Da, restaureazƒÉ',
                            cancelText: 'AnuleazƒÉ'
                        }
                    ).then((confirmed) => {
                        if (confirmed) {
                            // Restore data
                            appData.clients = backupData.clients || [];
                            appData.appointments = backupData.appointments || [];
                            appData.reminders = backupData.reminders || [];
                            appData.documents = backupData.documents || [];
                            
                            // Ensure documents array exists for all clients (backward compatibility)
                            appData.clients.forEach(client => {
                                if (!client.documents) {
                                    client.documents = [];
                                }
                            });
                            
                            saveData();
                            updateUI();
                            
                            const info = backupData.backupInfo;
                            if (info) {
                                showNotification(
                                    `Backup restaurat cu succes!\n\nInfo backup:\n- Data: ${new Date(info.timestamp).toLocaleDateString('ro-RO')}\n- Clien»õi: ${info.totalClients}\n- ProgramƒÉri: ${info.totalAppointments}\n- Reminder-uri: ${info.totalReminders}\n- Documente: ${info.totalDocuments || 0}`,
                                    'success',
                                    { title: 'Restore Complet' }
                                );
                            } else {
                                showNotification('Date restaurate cu succes!', 'success');
                            }
                        }
                    });
                } catch (error) {
                    showNotification(`Eroare la citirea fi»ôierului backup!\n\n${error.message}`, 'error');
                }
                
                // Reset file input
                input.value = '';
            };
            reader.readAsText(file);
        }

        // Delete all data function
        function deleteAllData() {
            const confirmation = document.getElementById('delete-confirmation').value;
            const checkbox = document.getElementById('delete-checkbox').checked;
            
            if (confirmation !== 'STERGE TOTUL') {
                showNotification('Trebuie sƒÉ scrii exact "STERGE TOTUL" pentru confirmare!', 'warning');
                return;
            }
            
            if (!checkbox) {
                showNotification('Trebuie sƒÉ bifezi cƒÉsu»õa de confirmare!', 'warning');
                return;
            }
            
            showConfirm(
                'ULTIMA CONFIRMARE!\nE»ôti 100% sigur cƒÉ vrei sƒÉ »ôtergi TOATE datele?\nAceastƒÉ ac»õiune NU poate fi anulatƒÉ!',
                'Confirmare FinalƒÉ',
                {
                    confirmText: 'DA, »òTERGE TOTUL',
                    cancelText: 'NU, AnuleazƒÉ'
                }
            ).then((confirmed) => {
                if (confirmed) {
                    // Clear all data
                    appData = {
                        clients: [],
                        appointments: [],
                        reminders: [],
                        documents: []
                    };
                    
                    // Clear localStorage
                    localStorage.removeItem('adinstalgaz_data');
                    
                    // Update UI
                    updateUI();
                    hideModal('deleteDataModal');
                    
                    showNotification('Toate datele au fost »ôterse cu succes!', 'success', {
                        title: '»òtergere CompletƒÉ'
                    });
                }
            });
        }

        // Statistics and reporting
        function calculateStats() {
            const now = new Date();
            const currentMonth = now.getMonth();
            const currentYear = now.getFullYear();

            return {
                totalClients: appData.clients.length,
                monthAppointments: appData.appointments.filter(apt => {
                    const aptDate = new Date(apt.date);
                    return aptDate.getMonth() === currentMonth && aptDate.getFullYear() === currentYear;
                }).length,
                pendingAppointments: appData.appointments.filter(apt => apt.status === 'programat').length,
                completedAppointments: appData.appointments.filter(apt => apt.status === 'finalizat').length,
                totalDocuments: appData.documents.length,
                tomorrowTasks: getTomorrowTasks()
            };
        }

        function getTomorrowTasks() {
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            const tomorrowStr = tomorrow.toISOString().split('T')[0];
            
            const tomorrowAppointments = appData.appointments.filter(apt => apt.date === tomorrowStr);
            const tomorrowReminders = appData.reminders.filter(r => r.reminderDate === tomorrowStr && !r.sent);
            
            return tomorrowAppointments.length + tomorrowReminders.length;
        }

        function showStorageInfo() {
            const dataString = JSON.stringify(appData);
            const totalSize = dataString.length;
            const sizeInMB = (totalSize / (1024 * 1024)).toFixed(2);
            
            // Calculate breakdown
            const clientsSize = JSON.stringify(appData.clients).length;
            const appointmentsSize = JSON.stringify(appData.appointments).length;
            const remindersSize = JSON.stringify(appData.reminders).length;
            const documentsSize = JSON.stringify(appData.documents).length;
            
            const breakdown = `UTILIZARE STORAGE DETALIATƒÇ:

üíæ Total: ${sizeInMB} MB
üë• Clien»õi: ${(clientsSize / (1024 * 1024)).toFixed(2)} MB
üìÖ ProgramƒÉri: ${(appointmentsSize / (1024 * 1024)).toFixed(2)} MB
üîî Reminder-e: ${(remindersSize / (1024 * 1024)).toFixed(2)} MB
üìÅ Documente: ${(documentsSize / (1024 * 1024)).toFixed(2)} MB

üìà LIMITE:
‚úÖ Bun: sub 5 MB
‚ö†Ô∏è Aten»õie: 5-8 MB  
‚ùå Critic: peste 8 MB

${sizeInMB > 8 ? '‚ùå URGENT: Storage critic! »òterge»õi fotografii vechi.' : 
  sizeInMB > 5 ? '‚ö†Ô∏è Storage mare. Recomand curƒÉ»õarea documentelor.' : 
  '‚úÖ Storage √Æn parametri normali.'}

üìÅ Total fotografii: ${appData.documents.length}
üóìÔ∏è Ultima fotografiere: ${appData.documents.length > 0 ? 
    new Date(Math.max(...appData.documents.map(d => new Date(d.uploadDate)))).toLocaleDateString('ro-RO') : 
    'Niciuna'}`;

            showInfoModal('Informa»õii Storage', breakdown, sizeInMB > 8 ? 'error' : sizeInMB > 5 ? 'warning' : 'info');
        }

        function updateUI() {
            const stats = calculateStats();
            
            // Update stats
            document.getElementById('total-clients').textContent = stats.totalClients;
            document.getElementById('month-appointments').textContent = stats.monthAppointments;
            document.getElementById('pending-appointments').textContent = stats.pendingAppointments;
            document.getElementById('total-documents').textContent = stats.totalDocuments;
            document.getElementById('tomorrow-tasks').textContent = stats.tomorrowTasks;
            
            // Update storage info
            updateStorageDisplay();
            
            // Update counts
            document.getElementById('clients-count').textContent = stats.totalClients;
            document.getElementById('appointments-count').textContent = appData.appointments.length;
            
            // Update reports
            document.getElementById('report-appointments').textContent = stats.monthAppointments;
            document.getElementById('report-completed').textContent = stats.completedAppointments;
            
            // Update document categories
            updateDocumentCategoryCounts();
            
            // Render lists
            renderClients();
            renderAppointments();
            renderReminders();
            renderRecentActivity();
            renderTomorrowTasks();
            renderDocuments();
        }

        function updateStorageDisplay() {
            const storageElement = document.getElementById('storage-usage');
            if (!storageElement) return;
            
            try {
                const dataString = JSON.stringify(appData);
                const sizeInMB = (dataString.length / (1024 * 1024)).toFixed(2);
                
                storageElement.textContent = `${sizeInMB} MB`;
                
                // Color code based on usage
                if (sizeInMB > 8) {
                    storageElement.style.color = '#dc2626'; // Red
                } else if (sizeInMB > 5) {
                    storageElement.style.color = '#f59e0b'; // Orange
                } else {
                    storageElement.style.color = '#10b981'; // Green
                }
            } catch (error) {
                storageElement.textContent = 'Eroare calcul';
                storageElement.style.color = '#6b7280';
            }
        }

        function updateDocumentCategoryCounts() {
            const pvCount = appData.documents.filter(d => d.category === 'pv-verificare').length;
            const fiseCount = appData.documents.filter(d => d.category === 'fisa-tehnica').length;
            const otherCount = appData.documents.filter(d => !['pv-verificare', 'fisa-tehnica'].includes(d.category)).length;
            
            if (document.getElementById('pv-count')) {
                document.getElementById('pv-count').textContent = pvCount;
                document.getElementById('fise-count').textContent = fiseCount;
                document.getElementById('other-docs-count').textContent = otherCount;
            }
        }

        function renderRecentActivity() {
            // Recent appointments
            const recentAppointments = appData.appointments
                .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
                .slice(0, 5);
            
            const appointmentsContainer = document.getElementById('recent-appointments');
            if (recentAppointments.length === 0) {
                appointmentsContainer.innerHTML = '<p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">Nu existƒÉ programƒÉri √ÆncƒÉ</p>';
            } else {
                appointmentsContainer.innerHTML = recentAppointments.map(apt => `
                    <div class="list-item" style="padding: 0.75rem 0;">
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: ${getStatusColor(apt.status)};"></div>
                        <div class="list-content">
                            <div class="list-title">${apt.clientName}</div>
                            <div class="list-subtitle">${apt.service}</div>
                        </div>
                        <div class="text-xs" style="color: #6b7280;">
                            ${new Date(apt.date).toLocaleDateString('ro-RO')}
                        </div>
                    </div>
                `).join('');
            }
            
            // Recent clients
            const recentClients = appData.clients
                .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
                .slice(0, 5);
            
            const clientsContainer = document.getElementById('recent-clients');
            if (recentClients.length === 0) {
                clientsContainer.innerHTML = '<p class="text-center text-sm" style="color: #6b7280; padding: 2rem;">Nu existƒÉ clien»õi √ÆncƒÉ</p>';
            } else {
                clientsContainer.innerHTML = recentClients.map(client => `
                    <div class="list-item" style="padding: 0.75rem 0;">
                        <div class="avatar" style="width: 32px; height: 32px; font-size: 0.875rem;">${client.name.charAt(0).toUpperCase()}</div>
                        <div class="list-content">
                            <div class="list-title">${client.name}</div>
                            <div class="list-subtitle">${client.phone}</div>
                        </div>
                        <button class="btn btn-primary" onclick="callClient('${client.phone}')" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;">
                            üìû
                        </button>
                    </div>
                `).join('');
            }
        }

    </script>
</body>
</html>
