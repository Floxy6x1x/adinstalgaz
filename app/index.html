<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdInstalGaz - Sistem Management</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè¢</text></svg>">
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAdgAAAHYBTnsmCAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANCSURBVFiFtZdNaBNBFMd/M5tsNk2bpqlWq1YreCiIBy9e9OBBwYMXwYPgwYMHL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL148ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL148ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHixYsXL168ePHiwAAAABJRU5ErkJggg==">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .loading-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 16px 24px;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease-in-out;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .dark {
            background-color: #111827;
            color: #f9fafb;
        }
        
        .dark .bg-white {
            background-color: #1f2937;
        }
        
        .dark .bg-gray-50 {
            background-color: #111827;
        }
        
        .dark .bg-gray-100 {
            background-color: #374151;
        }
        
        .dark .text-gray-800 {
            color: #f9fafb;
        }
        
        .dark .text-gray-600 {
            color: #d1d5db;
        }
        
        .dark .text-gray-500 {
            color: #9ca3af;
        }
        
        .dark .border-gray-200 {
            border-color: #374151;
        }
        
        .dark .border-gray-300 {
            border-color: #4b5563;
        }
        
        .hover-scale {
            transition: transform 0.2s ease-in-out;
        }
        
        .hover-scale:hover {
            transform: scale(1.02);
        }
        
        .card-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .card-shadow:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="app"></div>

    <script>
        // Global state management
        const AppState = {
            // Authentication
            isAuthenticated: false,
            currentUser: null,
            
            // UI State
            isDarkMode: false,
            activeTab: 'dashboard',
            
            // Form states
            showClientForm: false,
            showUserForm: false,
            selectedClient: null,
            
            // Data
            clients: [
                {
                    id: 1,
                    nume: 'Popescu',
                    prenume: 'Ion',
                    email: 'ion.popescu@email.com',
                    telefon: '0723456789',
                    strada: 'Str. LibertƒÉ»õii',
                    numar: '15',
                    bloc: 'A',
                    scara: '1',
                    apartament: '12',
                    oras: 'Ro»ôiorii de Vede',
                    dataCreare: '2024-01-15'
                },
                {
                    id: 2,
                    nume: 'Ionescu',
                    prenume: 'Maria',
                    email: 'maria.ionescu@email.com',
                    telefon: '0734567890',
                    strada: 'Str. Mihai Viteazu',
                    numar: '23',
                    bloc: '',
                    scara: '',
                    apartament: '',
                    oras: 'Alexandria',
                    dataCreare: '2024-02-10'
                }
            ],
            
            servicii: [
                {
                    id: 1,
                    clientId: 1,
                    tipServiciu: 'Bran»ôament gaz',
                    dataEfectuare: '2023-07-15',
                    dataExpirare: '2025-07-15',
                    status: 'activ',
                    descriere: 'Bran»ôament nou gaz natural'
                },
                {
                    id: 2,
                    clientId: 2,
                    tipServiciu: 'Verificare tehnicƒÉ',
                    dataEfectuare: '2024-12-01',
                    dataExpirare: '2026-12-01',
                    status: 'activ',
                    descriere: 'Verificare anualƒÉ instala»õie'
                }
            ],
            
            lucrari: [
                {
                    id: 1,
                    clientId: 1,
                    tipServiciu: 'Instala»õie gaz',
                    descriere: 'Instalare centralƒÉ termicƒÉ nouƒÉ',
                    status: 'programata',
                    dataProgramata: '2025-07-10',
                    angajat: 'ion@adinstalgaz.ro',
                    observatii: '',
                    dataFinalizare: null
                },
                {
                    id: 2,
                    clientId: 2,
                    tipServiciu: 'Revizie instala»õie',
                    descriere: 'Revizie anualƒÉ sistem gaz',
                    status: 'in_lucru',
                    dataProgramata: '2025-07-08',
                    angajat: 'ion@adinstalgaz.ro',
                    observatii: '√én progres',
                    dataFinalizare: null
                }
            ],
            
            utilizatori: [
                {
                    id: 1,
                    nume: 'Florin Gavrila',
                    email: 'florin.gavrila@adinstalgaz.ro',
                    telefon: '0762614401',
                    rol: 'administrator',
                    password: '123456'
                },
                {
                    id: 2,
                    nume: 'Ion LucrƒÉtor',
                    email: 'ion@adinstalgaz.ro',
                    telefon: '0723456789',
                    rol: 'lucrator',
                    password: '123456'
                }
            ],
            
            // Form data
            loginData: { email: '', password: '' },
            clientForm: {
                nume: '',
                prenume: '',
                email: '',
                telefon: '',
                strada: '',
                numar: '',
                bloc: '',
                scara: '',
                apartament: '',
                oras: 'Ro»ôiorii de Vede',
                areServiciuExistent: false,
                tipServiciu: '',
                dataEfectuare: ''
            },
            userForm: {
                nume: '',
                email: '',
                telefon: '',
                rol: 'lucrator',
                password: ''
            }
        };

        // Constants
        const TIPURI_SERVICIU = [
            'Bran»ôament gaz',
            'Instala»õie gaz',
            'Verificare tehnicƒÉ',
            'Revizie instala»õie',
            'Repara»õie urgentƒÉ',
            'Mentenan»õƒÉ'
        ];

        const ORASE = [
            'Ro»ôiorii de Vede',
            'Alexandria',
            'Turnu MƒÉgurele',
            'Videle',
            'Zimnicea',
            'GƒÉe»ôti',
            'Giurgiu'
        ];

        // Utility functions
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type === 'error' ? 'bg-red-500' : 'bg-green-500'}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => notification.classList.add('show'), 100);
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => document.body.removeChild(notification), 300);
            }, 3000);
        }

        function formatDate(dateString) {
            return new Date(dateString).toLocaleDateString('ro-RO');
        }

        function getServiciuStatus(dataExpirare) {
            const azi = new Date();
            const expirare = new Date(dataExpirare);
            const diferentaZile = Math.ceil((expirare - azi) / (1000 * 60 * 60 * 24));
            
            if (diferentaZile < 0) return 'expirat';
            if (diferentaZile <= 30) return 'expira_curand';
            return 'activ';
        }

        function getServiciiActive() {
            return AppState.servicii.filter(s => getServiciuStatus(s.dataExpirare) === 'activ');
        }

        function getServiciiExpiraCurand() {
            return AppState.servicii.filter(s => getServiciuStatus(s.dataExpirare) === 'expira_curand');
        }

        function getServiciiExpirate() {
            return AppState.servicii.filter(s => getServiciuStatus(s.dataExpirare) === 'expirat');
        }

        // Authentication functions
        function handleLogin() {
            const user = AppState.utilizatori.find(u => 
                u.email === AppState.loginData.email && u.password === AppState.loginData.password
            );
            
            if (user) {
                AppState.currentUser = user;
                AppState.isAuthenticated = true;
                AppState.loginData = { email: '', password: '' };
                showNotification(`Bun venit, ${user.nume}!`);
                renderApp();
            } else {
                showNotification('Date de autentificare incorecte!', 'error');
            }
        }

        function handleLogout() {
            AppState.isAuthenticated = false;
            AppState.currentUser = null;
            AppState.activeTab = 'dashboard';
            showNotification('A»õi fost deconectat cu succes!');
            renderApp();
        }

        function resetDemoData() {
            if (confirm('Sigur dori»õi sƒÉ reseta»õi toate datele demo?')) {
                AppState.clients = [];
                AppState.servicii = [];
                AppState.lucrari = [];
                showNotification('Datele demo au fost resetate!');
                renderApp();
            }
        }

        function toggleDarkMode() {
            AppState.isDarkMode = !AppState.isDarkMode;
            document.body.classList.toggle('dark', AppState.isDarkMode);
            renderApp();
        }

        // Client management functions
        function handleClientSubmit() {
            const newClient = {
                id: Date.now(),
                ...AppState.clientForm,
                dataCreare: new Date().toISOString().split('T')[0]
            };

            if (AppState.selectedClient) {
                const index = AppState.clients.findIndex(c => c.id === AppState.selectedClient.id);
                AppState.clients[index] = { ...newClient, id: AppState.selectedClient.id };
                showNotification('Client actualizat cu succes!');
            } else {
                AppState.clients.push(newClient);
                showNotification('Client adƒÉugat cu succes!');
                
                // DacƒÉ are serviciu existent, creeazƒÉ serviciul
                if (AppState.clientForm.areServiciuExistent && AppState.clientForm.tipServiciu && AppState.clientForm.dataEfectuare) {
                    const dataExpirare = new Date(AppState.clientForm.dataEfectuare);
                    dataExpirare.setFullYear(dataExpirare.getFullYear() + 2);
                    
                    const newServiciu = {
                        id: Date.now() + 1,
                        clientId: newClient.id,
                        tipServiciu: AppState.clientForm.tipServiciu,
                        dataEfectuare: AppState.clientForm.dataEfectuare,
                        dataExpirare: dataExpirare.toISOString().split('T')[0],
                        status: 'activ',
                        descriere: `Serviciu ${AppState.clientForm.tipServiciu} existent`
                    };
                    
                    AppState.servicii.push(newServiciu);
                }
            }

            AppState.showClientForm = false;
            AppState.selectedClient = null;
            AppState.clientForm = {
                nume: '',
                prenume: '',
                email: '',
                telefon: '',
                strada: '',
                numar: '',
                bloc: '',
                scara: '',
                apartament: '',
                oras: 'Ro»ôiorii de Vede',
                areServiciuExistent: false,
                tipServiciu: '',
                dataEfectuare: ''
            };
            
            renderApp();
        }

        function deleteClient(clientId) {
            if (confirm('Sigur dori»õi sƒÉ »ôterge»õi acest client? Se vor »ôterge »ôi serviciile asociate.')) {
                AppState.clients = AppState.clients.filter(c => c.id !== clientId);
                AppState.servicii = AppState.servicii.filter(s => s.clientId !== clientId);
                AppState.lucrari = AppState.lucrari.filter(l => l.clientId !== clientId);
                autoSave(); // Auto-save
                showNotification('Client »ôters cu succes!');
                renderApp();
            }
        }

        function finalizareLucrare(lucrareId) {
            const lucrare = AppState.lucrari.find(l => l.id === lucrareId);
            if (!lucrare) return;

            const dataFinalizare = new Date();
            const index = AppState.lucrari.findIndex(l => l.id === lucrareId);
            
            AppState.lucrari[index] = {
                ...lucrare,
                status: 'finalizata',
                dataFinalizare: dataFinalizare.toISOString().split('T')[0],
                oraFinalizare: dataFinalizare.toTimeString().split(' ')[0]
            };

            // CreeazƒÉ serviciu nou automat
            const client = AppState.clients.find(c => c.id === lucrare.clientId);
            const dataExpirare = new Date(dataFinalizare);
            dataExpirare.setFullYear(dataExpirare.getFullYear() + 2);

            const newServiciu = {
                id: Date.now(),
                clientId: lucrare.clientId,
                tipServiciu: lucrare.tipServiciu,
                dataEfectuare: AppState.lucrari[index].dataFinalizare,
                dataExpirare: dataExpirare.toISOString().split('T')[0],
                status: 'activ',
                descriere: lucrare.descriere
            };

            AppState.servicii.push(newServiciu);
            autoSave(); // Auto-save

            // Simulare trimitere email
            simulareEmailFinalizare(client, AppState.lucrari[index]);
            showNotification('Lucrare finalizatƒÉ cu succes! Email trimis automat.');
            renderApp();
        }

        function simulareEmailFinalizare(client, lucrare) {
            const angajat = AppState.utilizatori.find(u => u.email === lucrare.angajat);
            
            console.log(`
üìß EMAIL TRIMIS AUTOMAT LA: office@adinstalgaz.ro

Subiect: [AdInstalGaz] Lucrare FinalizatƒÉ - ${lucrare.tipServiciu} - ${client.nume} ${client.prenume}

BunƒÉ ziua,

O lucrare a fost finalizatƒÉ cu succes:

DETALII LUCRARE:
- Client: ${client.nume} ${client.prenume}
- Telefon: ${client.telefon}
- AdresƒÉ: ${client.strada} ${client.numar}, ${client.bloc}, ${client.scara}, ${client.apartament}, ${client.oras}
- Tip serviciu: ${lucrare.tipServiciu}
- Descriere: ${lucrare.descriere}

EXECUTARE:
- Angajat: ${angajat?.nume || 'N/A'}
- Data finalizare: ${lucrare.dataFinalizare}
- Ora finalizare: ${lucrare.oraFinalizare}
- Observa»õii: ${lucrare.observatii}

URMƒÇRIRE SERVICIU:
- UrmƒÉtoarea verificare: ${new Date(new Date(lucrare.dataFinalizare).setFullYear(new Date(lucrare.dataFinalizare).getFullYear() + 2)).toISOString().split('T')[0]} (peste 2 ani)
- Reminder automat: ${new Date(new Date(lucrare.dataFinalizare).setFullYear(new Date(lucrare.dataFinalizare).getFullYear() + 2) - 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]} (cu 7 zile √Ænainte)

---
Generat automat de AdInstalGaz Management System
Pentru detalii complete, accesa»õi aplica»õia.
            `);
        }

        // Render functions
        function renderLoginForm() {
            return `
                <div class="min-h-screen flex items-center justify-center gradient-bg">
                    <div class="max-w-md w-full mx-4 p-8 rounded-2xl shadow-2xl bg-white glass-effect animate-fade-in">
                        <div class="text-center mb-8">
                            <div class="w-16 h-16 mx-auto mb-4 text-blue-600">
                                <i data-lucide="building-2" class="w-full h-full"></i>
                            </div>
                            <h1 class="text-3xl font-bold text-gray-800">AdInstalGaz</h1>
                            <p class="text-sm mt-2 text-gray-600">Sistem Management</p>
                        </div>

                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium mb-2 text-gray-700">Email</label>
                                <input
                                    type="email"
                                    id="login-email"
                                    value="${AppState.loginData.email}"
                                    class="w-full px-4 py-3 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                    placeholder="exemplu@adinstalgaz.ro"
                                    required
                                />
                            </div>

                            <div>
                                <label class="block text-sm font-medium mb-2 text-gray-700">ParolƒÉ</label>
                                <input
                                    type="password"
                                    id="login-password"
                                    value="${AppState.loginData.password}"
                                    class="w-full px-4 py-3 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                    placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                                    required
                                />
                            </div>

                            <button
                                onclick="performLogin()"
                                class="w-full py-3 px-4 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-medium rounded-lg transition-all duration-200 transform hover:scale-105 shadow-lg"
                            >
                                Autentificare
                            </button>
                        </div>

                        <div class="mt-6 p-4 rounded-lg bg-gray-50">
                            <p class="text-xs text-gray-600 mb-2">Date demo:</p>
                            <p class="text-xs text-gray-500">
                                Admin: florin.gavrila@adinstalgaz.ro / 123456<br/>
                                LucrƒÉtor: ion@adinstalgaz.ro / 123456
                            </p>
                        </div>

                        <div class="flex justify-center mt-6">
                            <button
                                onclick="toggleDarkMode()"
                                class="p-2 rounded-full bg-gray-200 text-gray-600 hover:scale-110 transition-all"
                            >
                                <i data-lucide="moon" class="w-5 h-5"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderSidebar() {
            const menuItems = [
                { id: 'dashboard', label: 'Dashboard', icon: 'home' },
                { id: 'clienti', label: 'Clien»õi', icon: 'users' },
                { id: 'servicii', label: 'Baza Date Servicii', icon: 'database' },
                { id: 'lucrari', label: 'LucrƒÉri', icon: 'briefcase' },
                { id: 'program', label: 'Program Zilnic', icon: 'calendar' },
                { id: 'documente', label: 'Documente', icon: 'file-text' }
            ];

            if (AppState.currentUser?.rol === 'administrator') {
                menuItems.push({ id: 'utilizatori', label: 'Utilizatori', icon: 'settings' });
            }

            return `
                <div class="w-64 h-screen bg-white border-r border-gray-200 flex flex-col">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 text-blue-600">
                                <i data-lucide="building-2" class="w-full h-full"></i>
                            </div>
                            <div>
                                <h1 class="text-lg font-bold text-gray-800">AdInstalGaz</h1>
                                <p class="text-xs text-gray-500">Management System</p>
                            </div>
                        </div>
                    </div>

                    <nav class="flex-1 p-4 space-y-2">
                        ${menuItems.map(item => `
                            <button
                                onclick="setActiveTab('${item.id}')"
                                class="w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-all ${
                                    AppState.activeTab === item.id
                                        ? 'bg-blue-600 text-white shadow-lg'
                                        : 'text-gray-600 hover:bg-gray-100 hover:text-gray-900'
                                }"
                            >
                                <i data-lucide="${item.icon}" class="w-5 h-5"></i>
                                <span class="font-medium">${item.label}</span>
                            </button>
                        `).join('')}
                    </nav>

                    <div class="p-4 border-t border-gray-200">
                        <div class="mb-4 p-3 rounded-lg bg-gray-50">
                            <p class="text-sm font-medium text-gray-800">${AppState.currentUser?.nume}</p>
                            <p class="text-xs text-gray-500 capitalize">${AppState.currentUser?.rol}</p>
                        </div>
                        
                        <div class="space-y-2">
                            <button
                                onclick="toggleDarkMode()"
                                class="w-full flex items-center space-x-3 px-4 py-2 rounded-lg transition-all text-gray-600 hover:bg-gray-100"
                            >
                                <i data-lucide="${AppState.isDarkMode ? 'sun' : 'moon'}" class="w-4 h-4"></i>
                                <span class="text-sm">${AppState.isDarkMode ? 'Light Mode' : 'Dark Mode'}</span>
                            </button>
                            
                            ${AppState.currentUser?.rol === 'administrator' ? `
                                <button
                                    onclick="resetDemoData()"
                                    class="w-full flex items-center space-x-3 px-4 py-2 rounded-lg transition-all text-yellow-600 hover:bg-gray-100"
                                >
                                    <i data-lucide="settings" class="w-4 h-4"></i>
                                    <span class="text-sm">Reset Date Demo</span>
                                </button>
                            ` : ''}
                            
                            <button
                                onclick="handleLogout()"
                                class="w-full flex items-center space-x-3 px-4 py-2 rounded-lg transition-all text-red-600 hover:bg-gray-100"
                            >
                                <i data-lucide="log-out" class="w-4 h-4"></i>
                                <span class="text-sm">Logout</span>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderDashboard() {
            const serviciiExpiraCurand = getServiciiExpiraCurand();
            const serviciiExpirate = getServiciiExpirate();
            const lucrariProgramate = AppState.lucrari.filter(l => l.status === 'programata');
            const lucrariInLucru = AppState.lucrari.filter(l => l.status === 'in_lucru');

            return `
                <div class="space-y-6">
                    <div class="flex justify-between items-center">
                        <h1 class="text-3xl font-bold text-gray-800">Dashboard</h1>
                        <div class="flex space-x-4">
                            <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all flex items-center space-x-2">
                                <i data-lucide="download" class="w-4 h-4"></i>
                                <span>Export Raport</span>
                            </button>
                        </div>
                    </div>

                    <!-- Statistici principale -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="p-6 rounded-xl shadow-lg bg-white card-shadow hover-scale">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Total Clien»õi</p>
                                    <p class="text-3xl font-bold text-gray-800">${AppState.clients.length}</p>
                                </div>
                                <i data-lucide="users" class="w-12 h-12 text-blue-500"></i>
                            </div>
                        </div>

                        <div class="p-6 rounded-xl shadow-lg bg-white card-shadow hover-scale">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Servicii Active</p>
                                    <p class="text-3xl font-bold text-gray-800">${getServiciiActive().length}</p>
                                </div>
                                <i data-lucide="check-circle" class="w-12 h-12 text-green-500"></i>
                            </div>
                        </div>

                        <div class="p-6 rounded-xl shadow-lg bg-white card-shadow hover-scale">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">LucrƒÉri Programate</p>
                                    <p class="text-3xl font-bold text-gray-800">${lucrariProgramate.length}</p>
                                </div>
                                <i data-lucide="calendar" class="w-12 h-12 text-orange-500"></i>
                            </div>
                        </div>

                        <div class="p-6 rounded-xl shadow-lg bg-white card-shadow hover-scale">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Servicii ExpirƒÉ Cur√¢nd</p>
                                    <p class="text-3xl font-bold text-gray-800">${serviciiExpiraCurand.length}</p>
                                </div>
                                <i data-lucide="alert-circle" class="w-12 h-12 text-yellow-500"></i>
                            </div>
                        </div>
                    </div>

                    ${serviciiExpiraCurand.length > 0 || serviciiExpirate.length > 0 ? `
                        <div class="p-6 rounded-xl shadow-lg bg-red-50 border border-red-200">
                            <div class="flex items-center space-x-3 mb-4">
                                <i data-lucide="bell" class="w-6 h-6 text-red-500"></i>
                                <h3 class="text-lg font-semibold text-red-800">NotificƒÉri Urgente</h3>
                            </div>
                            
                            ${serviciiExpirate.length > 0 ? `
                                <div class="mb-4">
                                    <h4 class="font-medium mb-2 text-red-700">Servicii Expirate (${serviciiExpirate.length})</h4>
                                    <div class="space-y-2">
                                        ${serviciiExpirate.slice(0, 3).map(serviciu => {
                                            const client = AppState.clients.find(c => c.id === serviciu.clientId);
                                            return `
                                                <div class="p-3 rounded-lg bg-red-100">
                                                    <p class="font-medium text-red-800">
                                                        ${client?.nume} ${client?.prenume} - ${serviciu.tipServiciu}
                                                    </p>
                                                    <p class="text-sm text-red-600">
                                                        Expirat la: ${serviciu.dataExpirare}
                                                    </p>
                                                </div>
                                            `;
                                        }).join('')}
                                    </div>
                                </div>
                            ` : ''}

                            ${serviciiExpiraCurand.length > 0 ? `
                                <div>
                                    <h4 class="font-medium mb-2 text-yellow-700">Servicii ce ExpirƒÉ √Æn 30 zile (${serviciiExpiraCurand.length})</h4>
                                    <div class="space-y-2">
                                        ${serviciiExpiraCurand.slice(0, 3).map(serviciu => {
                                            const client = AppState.clients.find(c => c.id === serviciu.clientId);
                                            return `
                                                <div class="p-3 rounded-lg bg-yellow-100">
                                                    <p class="font-medium text-yellow-800">
                                                        ${client?.nume} ${client?.prenume} - ${serviciu.tipServiciu}
                                                    </p>
                                                    <p class="text-sm text-yellow-600">
                                                        ExpirƒÉ la: ${serviciu.dataExpirare}
                                                    </p>
                                                </div>
                                            `;
                                        }).join('')}
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                    ` : ''}

                    <!-- LucrƒÉri √Æn progres -->
                    <div class="p-6 rounded-xl shadow-lg bg-white">
                        <h3 class="text-lg font-semibold mb-4 text-gray-800">LucrƒÉri √Æn Progres</h3>
                        
                        ${lucrariInLucru.length === 0 ? `
                            <p class="text-sm text-gray-600">Nu existƒÉ lucrƒÉri √Æn progres</p>
                        ` : `
                            <div class="space-y-3">
                                ${lucrariInLucru.map(lucrare => {
                                    const client = AppState.clients.find(c => c.id === lucrare.clientId);
                                    const angajat = AppState.utilizatori.find(u => u.email === lucrare.angajat);
                                    
                                    return `
                                        <div class="p-4 rounded-lg border bg-gray-50 border-gray-200">
                                            <div class="flex justify-between items-start">
                                                <div>
                                                    <h4 class="font-medium text-gray-800">
                                                        ${client?.nume} ${client?.prenume} - ${lucrare.tipServiciu}
                                                    </h4>
                                                    <p class="text-sm text-gray-600">
                                                        Angajat: ${angajat?.nume || 'N/A'}
                                                    </p>
                                                    <p class="text-sm text-gray-600">
                                                        ProgramatƒÉ: ${lucrare.dataProgramata}
                                                    </p>
                                                </div>
                                                <span class="px-3 py-1 text-xs font-medium bg-orange-100 text-orange-800 rounded-full">
                                                    √én lucru
                                                </span>
                                            </div>
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        `}
                    </div>
                </div>
            `;
        }

        function renderClientiTab() {
            return `
                <div class="space-y-6">
                    <div class="flex justify-between items-center">
                        <h1 class="text-3xl font-bold text-gray-800">Clien»õi</h1>
                        <button
                            onclick="showClientForm()"
                            class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all flex items-center space-x-2"
                        >
                            <i data-lucide="plus" class="w-4 h-4"></i>
                            <span>Client Nou</span>
                        </button>
                    </div>

                    <!-- Lista clien»õi -->
                    <div class="grid gap-4">
                        ${AppState.clients.length === 0 ? `
                            <div class="text-center py-12 text-gray-600">
                                Nu existƒÉ clien»õi √Ænregistra»õi.
                            </div>
                        ` : AppState.clients.map(client => {
                            const clientServicii = AppState.servicii.filter(s => s.clientId === client.id);
                            const serviciiActive = clientServicii.filter(s => getServiciuStatus(s.dataExpirare) === 'activ');
                            const serviciiExpirate = clientServicii.filter(s => getServiciuStatus(s.dataExpirare) === 'expirat');
                            
                            return `
                                <div class="p-6 rounded-xl shadow-lg bg-white card-shadow hover-scale">
                                    <div class="flex justify-between items-start">
                                        <div class="flex-1">
                                            <div class="flex items-center space-x-4 mb-4">
                                                <div>
                                                    <h3 class="text-xl font-semibold text-gray-800">
                                                        ${client.nume} ${client.prenume}
                                                    </h3>
                                                    <p class="text-sm text-gray-600">
                                                        Client din ${formatDate(client.dataCreare)}
                                                    </p>
                                                </div>
                                                
                                                <div class="flex space-x-2">
                                                    ${serviciiActive.length > 0 ? `
                                                        <span class="px-3 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">
                                                            ${serviciiActive.length} servicii active
                                                        </span>
                                                    ` : ''}
                                                    ${serviciiExpirate.length > 0 ? `
                                                        <span class="px-3 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full">
                                                            ${serviciiExpirate.length} expirate
                                                        </span>
                                                    ` : ''}
                                                </div>
                                            </div>

                                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                                <div class="flex items-center space-x-2">
                                                    <i data-lucide="phone" class="w-4 h-4 text-gray-400"></i>
                                                    <span class="text-sm text-gray-600">${client.telefon}</span>
                                                </div>
                                                
                                                <div class="flex items-center space-x-2">
                                                    <i data-lucide="mail" class="w-4 h-4 text-gray-400"></i>
                                                    <span class="text-sm text-gray-600">${client.email}</span>
                                                </div>
                                                
                                                <div class="flex items-center space-x-2">
                                                    <i data-lucide="map-pin" class="w-4 h-4 text-gray-400"></i>
                                                    <span class="text-sm text-gray-600">
                                                        ${client.strada} ${client.numar}, ${client.oras}
                                                    </span>
                                                </div>
                                            </div>

                                            ${clientServicii.length > 0 ? `
                                                <div class="mt-4">
                                                    <h4 class="text-sm font-medium mb-2 text-gray-700">Servicii:</h4>
                                                    <div class="space-y-2">
                                                        ${clientServicii.slice(0, 2).map(serviciu => `
                                                            <div class="p-3 rounded-lg bg-gray-50">
                                                                <div class="flex justify-between items-center">
                                                                    <span class="text-sm font-medium text-gray-800">
                                                                        ${serviciu.tipServiciu}
                                                                    </span>
                                                                    <span class="text-xs px-2 py-1 rounded-full ${
                                                                        getServiciuStatus(serviciu.dataExpirare) === 'activ' 
                                                                            ? 'bg-green-100 text-green-800'
                                                                            : getServiciuStatus(serviciu.dataExpirare) === 'expira_curand'
                                                                            ? 'bg-yellow-100 text-yellow-800'
                                                                            : 'bg-red-100 text-red-800'
                                                                    }">
                                                                        ExpirƒÉ: ${serviciu.dataExpirare}
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        `).join('')}
                                                        ${clientServicii.length > 2 ? `
                                                            <p class="text-xs text-gray-500">
                                                                +${clientServicii.length - 2} servicii suplimentare
                                                            </p>
                                                        ` : ''}
                                                    </div>
                                                </div>
                                            ` : ''}
                                        </div>

                                        <div class="flex flex-col space-y-2">
                                            <button
                                                onclick="editClient(${client.id})"
                                                class="p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-all"
                                            >
                                                <i data-lucide="edit" class="w-4 h-4"></i>
                                            </button>
                                            
                                            <button
                                                onclick="setActiveTab('servicii')"
                                                class="p-2 text-green-600 hover:bg-green-100 rounded-lg transition-all"
                                            >
                                                <i data-lucide="eye" class="w-4 h-4"></i>
                                            </button>
                                            
                                            <button
                                                onclick="deleteClient(${client.id})"
                                                class="p-2 text-red-600 hover:bg-red-100 rounded-lg transition-all"
                                            >
                                                <i data-lucide="trash-2" class="w-4 h-4"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;
        }

        function renderServiciiTab() {
            const serviciiActive = getServiciiActive();
            const serviciiExpiraCurand = getServiciiExpiraCurand();
            const serviciiExpirate = getServiciiExpirate();
            
            return `
                <div class="space-y-6">
                    <div class="flex justify-between items-center">
                        <h1 class="text-3xl font-bold text-gray-800">Baza de Date Servicii</h1>
                        <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all flex items-center space-x-2">
                            <i data-lucide="download" class="w-4 h-4"></i>
                            <span>Export Servicii</span>
                        </button>
                    </div>

                    <!-- Sub-tabs -->
                    <div class="flex space-x-1 bg-gray-100 p-1 rounded-lg">
                        <button onclick="showServiciiTab('active')" class="flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all bg-white text-gray-900 shadow-sm">
                            Active <span class="ml-2 px-2 py-0.5 text-xs rounded-full bg-green-100 text-green-800">${serviciiActive.length}</span>
                        </button>
                        <button onclick="showServiciiTab('expiring')" class="flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all text-gray-600 hover:text-gray-900">
                            ExpirƒÉ √Æn 30 zile <span class="ml-2 px-2 py-0.5 text-xs rounded-full bg-yellow-100 text-yellow-800">${serviciiExpiraCurand.length}</span>
                        </button>
                        <button onclick="showServiciiTab('expired')" class="flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all text-gray-600 hover:text-gray-900">
                            Expirate <span class="ml-2 px-2 py-0.5 text-xs rounded-full bg-red-100 text-red-800">${serviciiExpirate.length}</span>
                        </button>
                    </div>

                    <!-- Lista servicii active -->
                    <div class="grid gap-4">
                        ${serviciiActive.length === 0 ? `
                            <div class="text-center py-12 text-gray-600">
                                Nu existƒÉ servicii active.
                            </div>
                        ` : serviciiActive.map(serviciu => {
                            const client = AppState.clients.find(c => c.id === serviciu.clientId);
                            const status = getServiciuStatus(serviciu.dataExpirare);
                            
                            return `
                                <div class="p-6 rounded-xl shadow-lg bg-white card-shadow hover-scale">
                                    <div class="flex justify-between items-start">
                                        <div class="flex-1">
                                            <div class="flex items-center justify-between mb-4">
                                                <h3 class="text-xl font-semibold text-gray-800">${serviciu.tipServiciu}</h3>
                                                <span class="px-3 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800">Activ</span>
                                            </div>

                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                                <div>
                                                    <p class="text-sm text-gray-600 mb-1">Client:</p>
                                                    <p class="font-medium text-gray-800">${client?.nume} ${client?.prenume}</p>
                                                </div>
                                                
                                                <div>
                                                    <p class="text-sm text-gray-600 mb-1">Telefon:</p>
                                                    <p class="font-medium text-gray-800">${client?.telefon}</p>
                                                </div>
                                                
                                                <div>
                                                    <p class="text-sm text-gray-600 mb-1">Data efectuƒÉrii:</p>
                                                    <p class="font-medium text-gray-800">${serviciu.dataEfectuare}</p>
                                                </div>
                                                
                                                <div>
                                                    <p class="text-sm text-gray-600 mb-1">Data expirƒÉrii:</p>
                                                    <p class="font-medium text-gray-800">${serviciu.dataExpirare}</p>
                                                </div>
                                            </div>

                                            <div class="flex items-center space-x-2 mb-4">
                                                <i data-lucide="map-pin" class="w-4 h-4 text-gray-400"></i>
                                                <span class="text-sm text-gray-600">
                                                    ${client?.strada} ${client?.numar}, ${client?.bloc ? `Bl. ${client.bloc}, ` : ''}
                                                    ${client?.scara ? `Sc. ${client.scara}, ` : ''}${client?.apartament ? `Ap. ${client.apartament}, ` : ''}
                                                    ${client?.oras}
                                                </span>
                                            </div>

                                            ${serviciu.descriere ? `
                                                <div>
                                                    <p class="text-sm text-gray-600 mb-1">Descriere:</p>
                                                    <p class="text-sm text-gray-700">${serviciu.descriere}</p>
                                                </div>
                                            ` : ''}
                                        </div>

                                        <div class="flex flex-col space-y-2 ml-4">
                                            <button
                                                onclick="contactClient(${client?.id})"
                                                class="p-2 text-green-600 hover:bg-green-100 rounded-lg transition-all"
                                            >
                                                <i data-lucide="phone" class="w-4 h-4"></i>
                                            </button>
                                            
                                            <button
                                                onclick="programareServiciu(${serviciu.id})"
                                                class="p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-all"
                                            >
                                                <i data-lucide="calendar" class="w-4 h-4"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;
        }

        function renderLucrariTab() {
            const lucrariProgramate = AppState.lucrari.filter(l => l.status === 'programata');
            const lucrariInLucru = AppState.lucrari.filter(l => l.status === 'in_lucru');
            const lucrariFinalizate = AppState.lucrari.filter(l => l.status === 'finalizata');

            return `
                <div class="space-y-6">
                    <div class="flex justify-between items-center">
                        <h1 class="text-3xl font-bold text-gray-800">LucrƒÉri</h1>
                        <button onclick="adaugaLucrareNoua()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all flex items-center space-x-2">
                            <i data-lucide="plus" class="w-4 h-4"></i>
                            <span>Lucrare NouƒÉ</span>
                        </button>
                    </div>

                    <!-- Status tabs -->
                    <div class="flex space-x-1 bg-gray-100 p-1 rounded-lg">
                        <button onclick="showLucrariTab('toate')" class="flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all bg-white text-gray-900 shadow-sm">
                            Toate (${AppState.lucrari.length})
                        </button>
                        <button onclick="showLucrariTab('programata')" class="flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all text-gray-600 hover:text-gray-900">
                            Programate (${lucrariProgramate.length})
                        </button>
                        <button onclick="showLucrariTab('in_lucru')" class="flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all text-gray-600 hover:text-gray-900">
                            √én lucru (${lucrariInLucru.length})
                        </button>
                        <button onclick="showLucrariTab('finalizata')" class="flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all text-gray-600 hover:text-gray-900">
                            Finalizate (${lucrariFinalizate.length})
                        </button>
                    </div>

                    <!-- Lista lucrƒÉri -->
                    <div class="grid gap-4">
                        ${AppState.lucrari.length === 0 ? `
                            <div class="text-center py-12 text-gray-600">
                                Nu existƒÉ lucrƒÉri √Ænregistrate.
                            </div>
                        ` : AppState.lucrari.map(lucrare => {
                            const client = AppState.clients.find(c => c.id === lucrare.clientId);
                            const angajat = AppState.utilizatori.find(u => u.email === lucrare.angajat);
                            
                            const statusColors = {
                                'programata': 'bg-blue-100 text-blue-800',
                                'in_lucru': 'bg-orange-100 text-orange-800',
                                'finalizata': 'bg-green-100 text-green-800'
                            };

                            const statusLabels = {
                                'programata': 'ProgramatƒÉ',
                                'in_lucru': '√én lucru',
                                'finalizata': 'FinalizatƒÉ'
                            };
                            
                            return `
                                <div class="p-6 rounded-xl shadow-lg bg-white card-shadow hover-scale">
                                    <div class="flex justify-between items-start">
                                        <div class="flex-1">
                                            <div class="flex items-center justify-between mb-4">
                                                <h3 class="text-xl font-semibold text-gray-800">${lucrare.tipServiciu}</h3>
                                                <span class="px-3 py-1 text-xs font-medium rounded-full ${statusColors[lucrare.status]}">${statusLabels[lucrare.status]}</span>
                                            </div>

                                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                                <div>
                                                    <p class="text-sm text-gray-600 mb-1">Client:</p>
                                                    <p class="font-medium text-gray-800">${client?.nume} ${client?.prenume}</p>
                                                    <p class="text-sm text-gray-600">${client?.telefon}</p>
                                                </div>
                                                
                                                <div>
                                                    <p class="text-sm text-gray-600 mb-1">Data programatƒÉ:</p>
                                                    <p class="font-medium text-gray-800">${lucrare.dataProgramata}</p>
                                                </div>
                                                
                                                <div>
                                                    <p class="text-sm text-gray-600 mb-1">Angajat:</p>
                                                    <p class="font-medium text-gray-800">${angajat?.nume || 'Neatribuit'}</p>
                                                </div>
                                            </div>

                                            <div class="mb-4">
                                                <p class="text-sm text-gray-600 mb-1">AdresƒÉ:</p>
                                                <p class="text-sm text-gray-700">
                                                    ${client?.strada} ${client?.numar}, ${client?.bloc ? `Bl. ${client.bloc}, ` : ''}
                                                    ${client?.scara ? `Sc. ${client.scara}, ` : ''}${client?.apartament ? `Ap. ${client.apartament}, ` : ''}
                                                    ${client?.oras}
                                                </p>
                                            </div>

                                            <div class="mb-4">
                                                <p class="text-sm text-gray-600 mb-1">Descriere:</p>
                                                <p class="text-sm text-gray-700">${lucrare.descriere}</p>
                                            </div>

                                            ${lucrare.observatii ? `
                                                <div class="mb-4">
                                                    <p class="text-sm text-gray-600 mb-1">Observa»õii:</p>
                                                    <p class="text-sm text-gray-700">${lucrare.observatii}</p>
                                                </div>
                                            ` : ''}

                                            ${lucrare.status === 'finalizata' && lucrare.dataFinalizare ? `
                                                <div class="mt-4 p-3 rounded-lg bg-green-50">
                                                    <div class="flex items-center space-x-2">
                                                        <i data-lucide="check-circle" class="w-4 h-4 text-green-600"></i>
                                                        <span class="text-sm font-medium text-green-800">
                                                            FinalizatƒÉ pe ${lucrare.dataFinalizare} la ${lucrare.oraFinalizare}
                                                        </span>
                                                    </div>
                                                </div>
                                            ` : ''}
                                        </div>

                                        <div class="flex flex-col space-y-2 ml-4">
                                            ${lucrare.status !== 'finalizata' ? `
                                                <div class="space-y-2">
                                                    ${lucrare.status === 'programata' ? `
                                                        <button
                                                            onclick="incepeeLucrarea(${lucrare.id})"
                                                            class="px-3 py-1 text-xs bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-all"
                                                        >
                                                            √éncepe
                                                        </button>
                                                    ` : ''}
                                                    
                                                    ${lucrare.status === 'in_lucru' ? `
                                                        <button
                                                            onclick="finalizareLucrare(${lucrare.id})"
                                                            class="px-3 py-1 text-xs bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all"
                                                        >
                                                            FinalizeazƒÉ
                                                        </button>
                                                    ` : ''}
                                                </div>
                                            ` : ''}
                                            
                                            <button onclick="editLucrare(${lucrare.id})" class="p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-all">
                                                <i data-lucide="edit" class="w-4 h-4"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;
        }

        function renderProgramTab() {
            const today = new Date().toISOString().split('T')[0];
            const lucrariAzi = AppState.lucrari.filter(l => l.dataProgramata === today && l.status !== 'finalizata');

            return `
                <div class="space-y-6">
                    <div class="flex justify-between items-center">
                        <h1 class="text-3xl font-bold text-gray-800">Program Zilnic</h1>
                        <button onclick="exportProgram()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all flex items-center space-x-2">
                            <i data-lucide="download" class="w-4 h-4"></i>
                            <span>Export Program PDF</span>
                        </button>
                    </div>

                    <!-- Filtre data -->
                    <div class="p-4 rounded-xl bg-white shadow-lg">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-2 text-gray-700">Data</label>
                                <input
                                    type="date"
                                    id="program-date"
                                    value="${today}"
                                    onchange="schimbaDataProgram()"
                                    class="w-full px-4 py-2 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                />
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2 text-gray-700">Angajat</label>
                                <select id="program-angajat" onchange="schimbaAngajatProgram()" class="w-full px-4 py-2 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">To»õi angaja»õii</option>
                                    ${AppState.utilizatori.filter(u => u.rol === 'lucrator').map(angajat => `
                                        <option value="${angajat.email}">${angajat.nume}</option>
                                    `).join('')}
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Program zilnic -->
                    <div class="p-6 rounded-xl shadow-lg bg-white">
                        <h3 class="text-lg font-semibold mb-4 text-gray-800">
                            Program pentru ${new Date(today).toLocaleDateString('ro-RO', { 
                                weekday: 'long', 
                                year: 'numeric', 
                                month: 'long', 
                                day: 'numeric' 
                            })}
                        </h3>
                        
                        ${lucrariAzi.length === 0 ? `
                            <div class="text-center py-8 text-gray-600">
                                <i data-lucide="calendar" class="w-12 h-12 mx-auto mb-4 opacity-50"></i>
                                <p>Nu existƒÉ lucrƒÉri programate pentru aceastƒÉ datƒÉ.</p>
                            </div>
                        ` : `
                            <div class="space-y-4">
                                ${lucrariAzi.map((lucrare, index) => {
                                    const client = AppState.clients.find(c => c.id === lucrare.clientId);
                                    const angajat = AppState.utilizatori.find(u => u.email === lucrare.angajat);
                                    
                                    return `
                                        <div class="p-4 rounded-lg border-l-4 ${
                                            lucrare.status === 'programata' ? 'border-blue-500 bg-blue-50' : 'border-orange-500 bg-orange-50'
                                        }">
                                            <div class="flex justify-between items-start">
                                                <div class="flex-1">
                                                    <div class="flex items-center space-x-4 mb-2">
                                                        <h4 class="font-semibold text-gray-800">
                                                            #${index + 1} - ${lucrare.tipServiciu}
                                                        </h4>
                                                        <span class="px-2 py-1 text-xs font-medium rounded-full ${
                                                            lucrare.status === 'programata' ? 'bg-blue-100 text-blue-800' : 'bg-orange-100 text-orange-800'
                                                        }">
                                                            ${lucrare.status === 'programata' ? 'ProgramatƒÉ' : '√én lucru'}
                                                        </span>
                                                    </div>
                                                    
                                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                        <div>
                                                            <p class="text-sm text-gray-700">
                                                                <span class="font-medium">Client:</span> ${client?.nume} ${client?.prenume}
                                                            </p>
                                                            <p class="text-sm text-gray-700">
                                                                <span class="font-medium">Telefon:</span> ${client?.telefon}
                                                            </p>
                                                        </div>
                                                        
                                                        <div>
                                                            <p class="text-sm text-gray-700">
                                                                <span class="font-medium">Angajat:</span> ${angajat?.nume || 'Neatribuit'}
                                                            </p>
                                                            <p class="text-sm text-gray-700">
                                                                <span class="font-medium">AdresƒÉ:</span> ${client?.strada} ${client?.numar}, ${client?.oras}
                                                            </p>
                                                        </div>
                                                    </div>
                                                    
                                                    <p class="text-sm mt-2 text-gray-600">${lucrare.descriere}</p>
                                                </div>
                                                
                                                <div class="flex space-x-2 ml-4">
                                                    <button
                                                        onclick="window.open('tel:${client?.telefon}')"
                                                        class="p-2 text-green-600 hover:bg-green-100 rounded-lg transition-all"
                                                    >
                                                        <i data-lucide="phone" class="w-4 h-4"></i>
                                                    </button>
                                                    
                                                    <button
                                                        onclick="window.open('https://maps.google.com/?q=${client?.strada} ${client?.numar}, ${client?.oras}')"
                                                        class="p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-all"
                                                    >
                                                        <i data-lucide="map-pin" class="w-4 h-4"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        `}
                    </div>

                    <!-- Rezumat zi -->
                    <div class="p-6 rounded-xl shadow-lg bg-white">
                        <h3 class="text-lg font-semibold mb-4 text-gray-800">Rezumat</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="p-4 rounded-lg bg-gray-50">
                                <p class="text-sm text-gray-600">Total lucrƒÉri</p>
                                <p class="text-2xl font-bold text-gray-800">${lucrariAzi.length}</p>
                            </div>
                            
                            <div class="p-4 rounded-lg bg-gray-50">
                                <p class="text-sm text-gray-600">Programate</p>
                                <p class="text-2xl font-bold text-blue-600">${lucrariAzi.filter(l => l.status === 'programata').length}</p>
                            </div>
                            
                            <div class="p-4 rounded-lg bg-gray-50">
                                <p class="text-sm text-gray-600">√én lucru</p>
                                <p class="text-2xl font-bold text-orange-600">${lucrariAzi.filter(l => l.status === 'in_lucru').length}</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderMainContent() {
            switch (AppState.activeTab) {
                case 'dashboard':
                    return renderDashboard();
                case 'clienti':
                    return renderClientiTab();
                case 'servicii':
                    return renderServiciiTab();
                case 'lucrari':
                    return renderLucrariTab();
                case 'program':
                    return renderProgramTab();
                case 'documente':
                    return renderDocumenteTab();
                case 'utilizatori':
                    return AppState.currentUser?.rol === 'administrator' 
                        ? renderUtilizatoriTab() 
                        : renderDashboard();
                default:
                    return renderDashboard();
            }
        }

        function renderApp() {
            const app = document.getElementById('app');
            
            if (!AppState.isAuthenticated) {
                app.innerHTML = renderLoginForm();
            } else {
                app.innerHTML = `
                    <div class="min-h-screen bg-gray-50">
                        <div class="flex">
                            ${renderSidebar()}
                            <main class="flex-1 overflow-auto">
                                <div class="p-6">
                                    ${renderMainContent()}
                                </div>
                            </main>
                        </div>
                    </div>
                `;
            }

            // Initialize Lucide icons
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }

        // Event handlers suplimentare pentru toate func»õionalitƒÉ»õile
        function showServiciiTab(tip) {
            showNotification(`Filtrare servicii: ${tip}`);
            // Aici po»õi implementa filtrarea efectivƒÉ
        }

        function showLucrariTab(status) {
            showNotification(`Filtrare lucrƒÉri: ${status}`);
            // Aici po»õi implementa filtrarea efectivƒÉ
        }

        function contactClient(clientId) {
            const client = AppState.clients.find(c => c.id === clientId);
            if (client) {
                showNotification(`üì± Contactare automatƒÉ trimisƒÉ cƒÉtre ${client.nume} ${client.prenume}\nTelefon: ${client.telefon}\nEmail: ${client.email}`);
            }
        }

        function programareServiciu(serviciuId) {
            const serviciu = AppState.servicii.find(s => s.id === serviciuId);
            const client = AppState.clients.find(c => c.id === serviciu?.clientId);
            
            if (serviciu && client) {
                // CreeazƒÉ lucrare nouƒÉ automat
                const newLucrare = {
                    id: Date.now(),
                    clientId: serviciu.clientId,
                    tipServiciu: serviciu.tipServiciu,
                    descriere: `Re√Ænnoire ${serviciu.tipServiciu}`,
                    status: 'programata',
                    dataProgramata: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                    angajat: '',
                    observatii: 'Serviciu programat automat pentru re√Ænnoire',
                    dataFinalizare: null
                };
                
                AppState.lucrari.push(newLucrare);
                showNotification('‚úÖ Lucrare programatƒÉ automat pentru re√Ænnoirea serviciului!');
                renderApp();
            }
        }

        function adaugaLucrareNoua() {
            if (AppState.clients.length === 0) {
                showNotification('AdaugƒÉ mai √Ænt√¢i clien»õi pentru a putea crea lucrƒÉri!', 'error');
                return;
            }
            
            // CreeazƒÉ lucrare simplƒÉ demo
            const randomClient = AppState.clients[Math.floor(Math.random() * AppState.clients.length)];
            const tipuriServiciu = ['Bran»ôament gaz', 'Instala»õie gaz', 'Verificare tehnicƒÉ', 'Revizie instala»õie', 'Repara»õie urgentƒÉ', 'Mentenan»õƒÉ'];
            const tipAleatoriu = tipuriServiciu[Math.floor(Math.random() * tipuriServiciu.length)];
            
            const newLucrare = {
                id: Date.now(),
                clientId: randomClient.id,
                tipServiciu: tipAleatoriu,
                descriere: `Lucrare ${tipAleatoriu.toLowerCase()} programatƒÉ`,
                status: 'programata',
                dataProgramata: new Date(Date.now() + Math.floor(Math.random() * 7) * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                angajat: AppState.utilizatori.find(u => u.rol === 'lucrator')?.email || '',
                observatii: '',
                dataFinalizare: null
            };
            
            AppState.lucrari.push(newLucrare);
            autoSave(); // Auto-save
            showNotification(`‚úÖ Lucrare nouƒÉ adƒÉugatƒÉ pentru ${randomClient.nume} ${randomClient.prenume}!`);
            renderApp();
        }

        function incepeeLucrarea(lucrareId) {
            const index = AppState.lucrari.findIndex(l => l.id === lucrareId);
            if (index !== -1) {
                AppState.lucrari[index].status = 'in_lucru';
                AppState.lucrari[index].observatii = 'Lucrare √ÆnceputƒÉ';
                showNotification('üîß Lucrarea a fost √ÆnceputƒÉ!');
                renderApp();
            }
        }

        function editLucrare(lucrareId) {
            const lucrare = AppState.lucrari.find(l => l.id === lucrareId);
            if (lucrare) {
                showNotification(`üìù Editare lucrare: ${lucrare.tipServiciu} - Func»õia va fi implementatƒÉ √Æn cur√¢nd!`);
            }
        }

        function schimbaDataProgram() {
            const data = document.getElementById('program-date').value;
            showNotification(`üìÖ Program schimbat pentru data: ${data}`);
            renderApp();
        }

        function schimbaAngajatProgram() {
            const angajat = document.getElementById('program-angajat').value;
            const numeAngajat = AppState.utilizatori.find(u => u.email === angajat)?.nume || 'To»õi angaja»õii';
            showNotification(`üë§ Filtru angajat: ${numeAngajat}`);
            renderApp();
        }

        function exportProgram() {
            showNotification('üìÑ Export program PDF - Func»õia va fi implementatƒÉ √Æn cur√¢nd!');
        }

        // Event handlers
        function performLogin() {
            AppState.loginData.email = document.getElementById('login-email').value;
            AppState.loginData.password = document.getElementById('login-password').value;
            handleLogin();
        }

        function setActiveTab(tab) {
            AppState.activeTab = tab;
            renderApp();
        }

        function showClientForm() {
            AppState.showClientForm = true;
            AppState.selectedClient = null;
            AppState.clientForm = {
                nume: '',
                prenume: '',
                email: '',
                telefon: '',
                strada: '',
                numar: '',
                bloc: '',
                scara: '',
                apartament: '',
                oras: 'Ro»ôiorii de Vede',
                areServiciuExistent: false,
                tipServiciu: '',
                dataEfectuare: ''
            };
            renderClientModal();
        }

        function renderClientModal() {
            const modalHTML = `
                <div id="client-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                    <div class="max-w-2xl w-full max-h-[90vh] overflow-y-auto rounded-xl shadow-2xl bg-white">
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h2 class="text-2xl font-bold text-gray-800">
                                    ${AppState.selectedClient ? 'Editare Client' : 'Client Nou'}
                                </h2>
                                <button onclick="closeClientModal()" class="p-2 rounded-lg hover:bg-gray-100 transition-all">
                                    <i data-lucide="x-circle" class="w-6 h-6 text-gray-600"></i>
                                </button>
                            </div>

                            <div class="space-y-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium mb-2 text-gray-700">Nume *</label>
                                        <input type="text" id="client-nume" value="${AppState.clientForm.nume}" 
                                               class="w-full px-4 py-2 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent" required />
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2 text-gray-700">Prenume *</label>
                                        <input type="text" id="client-prenume" value="${AppState.clientForm.prenume}"
                                               class="w-full px-4 py-2 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent" required />
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2 text-gray-700">Email *</label>
                                        <input type="email" id="client-email" value="${AppState.clientForm.email}"
                                               class="w-full px-4 py-2 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent" required />
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2 text-gray-700">Telefon *</label>
                                        <input type="tel" id="client-telefon" value="${AppState.clientForm.telefon}"
                                               class="w-full px-4 py-2 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent" required />
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2 text-gray-700">Strada *</label>
                                        <input type="text" id="client-strada" value="${AppState.clientForm.strada}"
                                               class="w-full px-4 py-2 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent" required />
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2 text-gray-700">NumƒÉr *</label>
                                        <input type="text" id="client-numar" value="${AppState.clientForm.numar}"
                                               class="w-full px-4 py-2 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent" required />
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2 text-gray-700">Bloc</label>
                                        <input type="text" id="client-bloc" value="${AppState.clientForm.bloc}"
                                               class="w-full px-4 py-2 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent" />
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2 text-gray-700">ScarƒÉ</label>
                                        <input type="text" id="client-scara" value="${AppState.clientForm.scara}"
                                               class="w-full px-4 py-2 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent" />
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2 text-gray-700">Apartament</label>
                                        <input type="text" id="client-apartament" value="${AppState.clientForm.apartament}"
                                               class="w-full px-4 py-2 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent" />
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2 text-gray-700">Ora»ô *</label>
                                        <select id="client-oras" class="w-full px-4 py-2 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                            ${ORASE.map(oras => `<option value="${oras}" ${AppState.clientForm.oras === oras ? 'selected' : ''}>${oras}</option>`).join('')}
                                        </select>
                                    </div>
                                </div>

                                ${!AppState.selectedClient ? `
                                    <div class="p-4 rounded-lg border bg-gray-50 border-gray-200">
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" id="client-serviciu-existent" ${AppState.clientForm.areServiciuExistent ? 'checked' : ''} 
                                                   onchange="toggleServiciuExistent()" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" />
                                            <span class="text-sm font-medium text-gray-700">Are serviciu existent</span>
                                        </label>

                                        <div id="serviciu-existent-fields" style="display: ${AppState.clientForm.areServiciuExistent ? 'block' : 'none'};" class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <div>
                                                <label class="block text-sm font-medium mb-2 text-gray-700">Tip serviciu *</label>
                                                <select id="client-tip-serviciu" class="w-full px-4 py-2 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                                    <option value="">SelecteazƒÉ tipul</option>
                                                    ${TIPURI_SERVICIU.map(tip => `<option value="${tip}" ${AppState.clientForm.tipServiciu === tip ? 'selected' : ''}>${tip}</option>`).join('')}
                                                </select>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium mb-2 text-gray-700">Data efectuƒÉrii serviciului *</label>
                                                <input type="date" id="client-data-efectuare" value="${AppState.clientForm.dataEfectuare}"
                                                       class="w-full px-4 py-2 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent" />
                                            </div>
                                        </div>
                                    </div>
                                ` : ''}

                                <div class="flex justify-end space-x-4">
                                    <button onclick="closeClientModal()" class="px-6 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition-all">
                                        AnuleazƒÉ
                                    </button>
                                    <button onclick="saveClient()" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all">
                                        ${AppState.selectedClient ? 'SalveazƒÉ ModificƒÉrile' : 'AdaugƒÉ Client'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            document.body.insertAdjacentHTML('beforeend', modalHTML);
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }

        function closeClientModal() {
            const modal = document.getElementById('client-modal');
            if (modal) {
                modal.remove();
            }
            AppState.showClientForm = false;
            AppState.selectedClient = null;
        }

        function toggleServiciuExistent() {
            const checkbox = document.getElementById('client-serviciu-existent');
            const fields = document.getElementById('serviciu-existent-fields');
            
            if (checkbox.checked) {
                fields.style.display = 'block';
                AppState.clientForm.areServiciuExistent = true;
            } else {
                fields.style.display = 'none';
                AppState.clientForm.areServiciuExistent = false;
            }
        }

        function saveClient() {
            // ColecteazƒÉ datele din formular
            AppState.clientForm = {
                nume: document.getElementById('client-nume').value,
                prenume: document.getElementById('client-prenume').value,
                email: document.getElementById('client-email').value,
                telefon: document.getElementById('client-telefon').value,
                strada: document.getElementById('client-strada').value,
                numar: document.getElementById('client-numar').value,
                bloc: document.getElementById('client-bloc').value,
                scara: document.getElementById('client-scara').value,
                apartament: document.getElementById('client-apartament').value,
                oras: document.getElementById('client-oras').value,
                areServiciuExistent: document.getElementById('client-serviciu-existent')?.checked || false,
                tipServiciu: document.getElementById('client-tip-serviciu')?.value || '',
                dataEfectuare: document.getElementById('client-data-efectuare')?.value || ''
            };

            // Validare
            if (!AppState.clientForm.nume || !AppState.clientForm.prenume || !AppState.clientForm.email || 
                !AppState.clientForm.telefon || !AppState.clientForm.strada || !AppState.clientForm.numar || !AppState.clientForm.oras) {
                showNotification('CompleteazƒÉ toate c√¢mpurile obligatorii!', 'error');
                return;
            }

            // SalveazƒÉ clientul
            handleClientSubmit();
            closeClientModal();
        }

        function editClient(clientId) {
            const client = AppState.clients.find(c => c.id === clientId);
            if (client) {
                AppState.selectedClient = client;
                AppState.clientForm = {
                    nume: client.nume,
                    prenume: client.prenume,
                    email: client.email,
                    telefon: client.telefon,
                    strada: client.strada,
                    numar: client.numar,
                    bloc: client.bloc || '',
                    scara: client.scara || '',
                    apartament: client.apartament || '',
                    oras: client.oras,
                    areServiciuExistent: false,
                    tipServiciu: '',
                    dataEfectuare: ''
                };
                renderClientModal();
            }
        }

        function renderUtilizatoriTab() {
            if (AppState.currentUser?.rol !== 'administrator') {
                return renderDashboard();
            }

            return `
                <div class="space-y-6">
                    <div class="flex justify-between items-center">
                        <h1 class="text-3xl font-bold text-gray-800">Utilizatori</h1>
                        <button onclick="showUserForm()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all flex items-center space-x-2">
                            <i data-lucide="plus" class="w-4 h-4"></i>
                            <span>Utilizator Nou</span>
                        </button>
                    </div>

                    <!-- Lista utilizatori -->
                    <div class="grid gap-4">
                        ${AppState.utilizatori.map(user => `
                            <div class="p-6 rounded-xl shadow-lg bg-white card-shadow hover-scale">
                                <div class="flex justify-between items-start">
                                    <div class="flex items-center space-x-4">
                                        <div class="p-3 rounded-full ${user.rol === 'administrator' ? 'bg-purple-100' : 'bg-blue-100'}">
                                            <i data-lucide="users" class="w-6 h-6 ${user.rol === 'administrator' ? 'text-purple-600' : 'text-blue-600'}"></i>
                                        </div>
                                        
                                        <div>
                                            <h3 class="text-lg font-semibold text-gray-800">${user.nume}</h3>
                                            <p class="text-sm text-gray-600">${user.email}</p>
                                            <p class="text-sm text-gray-600">${user.telefon}</p>
                                            <span class="inline-block mt-2 px-3 py-1 text-xs font-medium rounded-full capitalize ${
                                                user.rol === 'administrator' 
                                                    ? 'bg-purple-100 text-purple-800' 
                                                    : 'bg-blue-100 text-blue-800'
                                            }">
                                                ${user.rol}
                                            </span>
                                        </div>
                                    </div>
                                    
                                    <div class="flex space-x-2">
                                        <button onclick="editUser(${user.id})" class="p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-all">
                                            <i data-lucide="edit" class="w-4 h-4"></i>
                                        </button>
                                        
                                        ${user.id !== AppState.currentUser.id ? `
                                            <button onclick="deleteUser(${user.id})" class="p-2 text-red-600 hover:bg-red-100 rounded-lg transition-all">
                                                <i data-lucide="trash-2" class="w-4 h-4"></i>
                                            </button>
                                        ` : ''}
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function showUserForm() {
            AppState.showUserForm = true;
            AppState.userForm = {
                nume: '',
                email: '',
                telefon: '',
                rol: 'lucrator',
                password: ''
            };
            renderUserModal();
        }

        function renderUserModal() {
            const modalHTML = `
                <div id="user-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                    <div class="max-w-md w-full rounded-xl shadow-2xl bg-white">
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h2 class="text-2xl font-bold text-gray-800">Utilizator Nou</h2>
                                <button onclick="closeUserModal()" class="p-2 rounded-lg hover:bg-gray-100 transition-all">
                                    <i data-lucide="x-circle" class="w-6 h-6 text-gray-600"></i>
                                </button>
                            </div>

                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium mb-2 text-gray-700">Nume complet *</label>
                                    <input type="text" id="user-nume" value="${AppState.userForm.nume}"
                                           class="w-full px-4 py-2 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent" required />
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2 text-gray-700">Email *</label>
                                    <input type="email" id="user-email" value="${AppState.userForm.email}"
                                           class="w-full px-4 py-2 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent" required />
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2 text-gray-700">Telefon *</label>
                                    <input type="tel" id="user-telefon" value="${AppState.userForm.telefon}"
                                           class="w-full px-4 py-2 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent" required />
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2 text-gray-700">Rol *</label>
                                    <select id="user-rol" class="w-full px-4 py-2 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                        <option value="lucrator" ${AppState.userForm.rol === 'lucrator' ? 'selected' : ''}>LucrƒÉtor</option>
                                        <option value="administrator" ${AppState.userForm.rol === 'administrator' ? 'selected' : ''}>Administrator</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2 text-gray-700">ParolƒÉ (op»õional - default: 123456)</label>
                                    <input type="password" id="user-password" value="${AppState.userForm.password}" placeholder="123456"
                                           class="w-full px-4 py-2 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent" />
                                </div>

                                <div class="flex justify-end space-x-4 mt-6">
                                    <button onclick="closeUserModal()" class="px-6 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition-all">
                                        AnuleazƒÉ
                                    </button>
                                    <button onclick="saveUser()" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all">
                                        AdaugƒÉ Utilizator
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            document.body.insertAdjacentHTML('beforeend', modalHTML);
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }

        function closeUserModal() {
            const modal = document.getElementById('user-modal');
            if (modal) {
                modal.remove();
            }
            AppState.showUserForm = false;
        }

        function saveUser() {
            AppState.userForm = {
                nume: document.getElementById('user-nume').value,
                email: document.getElementById('user-email').value,
                telefon: document.getElementById('user-telefon').value,
                rol: document.getElementById('user-rol').value,
                password: document.getElementById('user-password').value || '123456'
            };

            if (!AppState.userForm.nume || !AppState.userForm.email || !AppState.userForm.telefon) {
                showNotification('CompleteazƒÉ toate c√¢mpurile obligatorii!', 'error');
                return;
            }

            const newUser = {
                id: Date.now(),
                ...AppState.userForm
            };

            AppState.utilizatori.push(newUser);
            showNotification(`‚úÖ Utilizator ${newUser.nume} adƒÉugat cu succes!`);
            closeUserModal();
            renderApp();
        }

        function editUser(userId) {
            const user = AppState.utilizatori.find(u => u.id === userId);
            if (user) {
                showNotification(`üìù Editare utilizator: ${user.nume} - Func»õia va fi implementatƒÉ √Æn cur√¢nd!`);
            }
        }

        function renderDocumenteTab() {
            // Date demo pentru documente
            const documente = [
                { id: 1, nume: 'Contract_Popescu_Ion.pdf', clientId: 1, tip: 'contract', dataUpload: '2024-06-01' },
                { id: 2, nume: 'Certificat_Bransamemt_Popescu.pdf', clientId: 1, tip: 'certificat', dataUpload: '2024-06-15' },
                { id: 3, nume: 'Factura_Ionescu_Maria.pdf', clientId: 2, tip: 'factura', dataUpload: '2024-07-01' }
            ];

            return `
                <div class="space-y-6">
                    <div class="flex justify-between items-center">
                        <h1 class="text-3xl font-bold text-gray-800">Documente</h1>
                        <button onclick="uploadDocument()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all flex items-center space-x-2">
                            <i data-lucide="plus" class="w-4 h-4"></i>
                            <span>Upload Document</span>
                        </button>
                    </div>

                    <!-- Filtre -->
                    <div class="p-4 rounded-xl bg-white shadow-lg">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-2 text-gray-700">Client</label>
                                <select id="doc-client-filter" onchange="filterDocuments()" class="w-full px-4 py-2 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">To»õi clien»õii</option>
                                    ${AppState.clients.map(client => `
                                        <option value="${client.id}">${client.nume} ${client.prenume}</option>
                                    `).join('')}
                                </select>
                            </div>
                            
                            <div class="flex items-end">
                                <div onclick="simulateFileUpload()" class="w-full p-8 border-2 border-dashed border-gray-300 rounded-lg text-center cursor-pointer hover:border-blue-500 hover:bg-gray-50 transition-all">
                                    <i data-lucide="file-text" class="w-8 h-8 mx-auto mb-2 text-gray-500"></i>
                                    <p class="text-sm text-gray-600">Drag & drop sau click pentru upload</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Lista documente -->
                    <div class="grid gap-4">
                        ${documente.length === 0 ? `
                            <div class="text-center py-12 text-gray-600">
                                <i data-lucide="file-text" class="w-12 h-12 mx-auto mb-4 opacity-50"></i>
                                <p>Nu existƒÉ documente pentru aceastƒÉ selec»õie.</p>
                            </div>
                        ` : documente.map(document => {
                            const client = AppState.clients.find(c => c.id === document.clientId);
                            
                            return `
                                <div class="p-6 rounded-xl shadow-lg bg-white card-shadow hover-scale">
                                    <div class="flex justify-between items-start">
                                        <div class="flex items-center space-x-4">
                                            <div class="p-3 rounded-lg bg-gray-100">
                                                <i data-lucide="file-text" class="w-6 h-6 text-gray-600"></i>
                                            </div>
                                            
                                            <div>
                                                <h3 class="text-lg font-semibold text-gray-800">${document.nume}</h3>
                                                <p class="text-sm text-gray-600">Client: ${client?.nume} ${client?.prenume}</p>
                                                <p class="text-sm text-gray-600">Upload: ${formatDate(document.dataUpload)}</p>
                                            </div>
                                        </div>
                                        
                                        <div class="flex space-x-2">
                                            <button onclick="previewDocument(${document.id})" class="p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-all">
                                                <i data-lucide="eye" class="w-4 h-4"></i>
                                            </button>
                                            <button onclick="downloadDocument(${document.id})" class="p-2 text-green-600 hover:bg-green-100 rounded-lg transition-all">
                                                <i data-lucide="download" class="w-4 h-4"></i>
                                            </button>
                                            <button onclick="deleteDocument(${document.id})" class="p-2 text-red-600 hover:bg-red-100 rounded-lg transition-all">
                                                <i data-lucide="trash-2" class="w-4 h-4"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;
        }

        function uploadDocument() {
            if (AppState.clients.length === 0) {
                showNotification('AdaugƒÉ mai √Ænt√¢i clien»õi pentru a putea uploada documente!', 'error');
                return;
            }
            showNotification('üìÅ Selectare fi»ôier pentru upload - Func»õia va fi implementatƒÉ √Æn cur√¢nd!');
        }

        function simulateFileUpload() {
            showNotification('üìÅ Simulare upload fi»ôier - Drag & drop func»õionalitate!');
        }

        function filterDocuments() {
            const clientId = document.getElementById('doc-client-filter').value;
            if (clientId) {
                const client = AppState.clients.find(c => c.id === parseInt(clientId));
                showNotification(`üîç Filtrare documente pentru: ${client?.nume} ${client?.prenume}`);
            } else {
                showNotification('üîç Afi»ôare toate documentele');
            }
        }

        function previewDocument(docId) {
            showNotification(`üëÅÔ∏è Preview document ID: ${docId} - Func»õia va fi implementatƒÉ √Æn cur√¢nd!`);
        }

        function downloadDocument(docId) {
            showNotification(`‚¨áÔ∏è Download document ID: ${docId} - Func»õia va fi implementatƒÉ √Æn cur√¢nd!`);
        }

        function deleteDocument(docId) {
            if (confirm('Sigur dori»õi sƒÉ »ôterge»õi acest document?')) {
                showNotification(`üóëÔ∏è Document ID: ${docId} »ôters cu succes!`);
            }
        }

        // Func»õii pentru persisten»õa datelor √Æn localStorage
        function saveToStorage() {
            try {
                localStorage.setItem('adinstalgaz_data', JSON.stringify({
                    clients: AppState.clients,
                    servicii: AppState.servicii,
                    lucrari: AppState.lucrari,
                    utilizatori: AppState.utilizatori
                }));
            } catch (e) {
                console.log('Nu se poate salva √Æn localStorage');
            }
        }

        function loadFromStorage() {
            try {
                const saved = localStorage.getItem('adinstalgaz_data');
                if (saved) {
                    const data = JSON.parse(saved);
                    AppState.clients = data.clients || AppState.clients;
                    AppState.servicii = data.servicii || AppState.servicii;
                    AppState.lucrari = data.lucrari || AppState.lucrari;
                    AppState.utilizatori = data.utilizatori || AppState.utilizatori;
                }
            } catch (e) {
                console.log('Nu se poate √ÆncƒÉrca din localStorage');
            }
        }

        // Auto-save la fiecare modificare
        function autoSave() {
            saveToStorage();
        }

        // Event listeners
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !AppState.isAuthenticated) {
                performLogin();
            }
        });

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            loadFromStorage(); // √éncarcƒÉ datele salvate
            renderApp();
        });

        // Auto-save every 30 seconds »ôi auto-update
        setInterval(() => {
            if (AppState.isAuthenticated) {
                autoSave();
                renderApp();
            }
        }, 30000);
    </script>
</body>
</html>
