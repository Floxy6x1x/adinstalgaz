<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdInstalGaz - Sistem Management</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .loading-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 16px 24px;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease-in-out;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .dark {
            background-color: #111827;
            color: #f9fafb;
        }
        
        .dark .bg-white {
            background-color: #1f2937;
        }
        
        .dark .bg-gray-50 {
            background-color: #111827;
        }
        
        .dark .bg-gray-100 {
            background-color: #374151;
        }
        
        .dark .text-gray-800 {
            color: #f9fafb;
        }
        
        .dark .text-gray-600 {
            color: #d1d5db;
        }
        
        .dark .text-gray-500 {
            color: #9ca3af;
        }
        
        .dark .border-gray-200 {
            border-color: #374151;
        }
        
        .dark .border-gray-300 {
            border-color: #4b5563;
        }
        
        .hover-scale {
            transition: transform 0.2s ease-in-out;
        }
        
        .hover-scale:hover {
            transform: scale(1.02);
        }
        
        .card-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .card-shadow:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="app"></div>

    <script>
        // Global state management
        const AppState = {
            // Authentication
            isAuthenticated: false,
            currentUser: null,
            
            // UI State
            isDarkMode: false,
            activeTab: 'dashboard',
            
            // Form states
            showClientForm: false,
            showUserForm: false,
            selectedClient: null,
            
            // Data
            clients: [
                {
                    id: 1,
                    nume: 'Popescu',
                    prenume: 'Ion',
                    email: 'ion.popescu@email.com',
                    telefon: '0723456789',
                    strada: 'Str. LibertÄƒÈ›ii',
                    numar: '15',
                    bloc: 'A',
                    scara: '1',
                    apartament: '12',
                    oras: 'RoÈ™iorii de Vede',
                    dataCreare: '2024-01-15'
                },
                {
                    id: 2,
                    nume: 'Ionescu',
                    prenume: 'Maria',
                    email: 'maria.ionescu@email.com',
                    telefon: '0734567890',
                    strada: 'Str. Mihai Viteazu',
                    numar: '23',
                    bloc: '',
                    scara: '',
                    apartament: '',
                    oras: 'Alexandria',
                    dataCreare: '2024-02-10'
                }
            ],
            
            servicii: [
                {
                    id: 1,
                    clientId: 1,
                    tipServiciu: 'BranÈ™ament gaz',
                    dataEfectuare: '2023-07-15',
                    dataExpirare: '2025-07-15',
                    status: 'activ',
                    descriere: 'BranÈ™ament nou gaz natural'
                },
                {
                    id: 2,
                    clientId: 2,
                    tipServiciu: 'Verificare tehnicÄƒ',
                    dataEfectuare: '2024-12-01',
                    dataExpirare: '2026-12-01',
                    status: 'activ',
                    descriere: 'Verificare anualÄƒ instalaÈ›ie'
                }
            ],
            
            lucrari: [
                {
                    id: 1,
                    clientId: 1,
                    tipServiciu: 'InstalaÈ›ie gaz',
                    descriere: 'Instalare centralÄƒ termicÄƒ nouÄƒ',
                    status: 'programata',
                    dataProgramata: '2025-07-10',
                    angajat: 'ion@adinstalgaz.ro',
                    observatii: '',
                    dataFinalizare: null
                },
                {
                    id: 2,
                    clientId: 2,
                    tipServiciu: 'Revizie instalaÈ›ie',
                    descriere: 'Revizie anualÄƒ sistem gaz',
                    status: 'in_lucru',
                    dataProgramata: '2025-07-08',
                    angajat: 'ion@adinstalgaz.ro',
                    observatii: 'ÃŽn progres',
                    dataFinalizare: null
                }
            ],
            
            utilizatori: [
                {
                    id: 1,
                    nume: 'Florin Gavrila',
                    email: 'florin.gavrila@adinstalgaz.ro',
                    telefon: '0762614401',
                    rol: 'administrator',
                    password: '123456'
                },
                {
                    id: 2,
                    nume: 'Ion LucrÄƒtor',
                    email: 'ion@adinstalgaz.ro',
                    telefon: '0723456789',
                    rol: 'lucrator',
                    password: '123456'
                }
            ],
            
            // Form data
            loginData: { email: '', password: '' },
            clientForm: {
                nume: '',
                prenume: '',
                email: '',
                telefon: '',
                strada: '',
                numar: '',
                bloc: '',
                scara: '',
                apartament: '',
                oras: 'RoÈ™iorii de Vede',
                areServiciuExistent: false,
                tipServiciu: '',
                dataEfectuare: ''
            },
            userForm: {
                nume: '',
                email: '',
                telefon: '',
                rol: 'lucrator',
                password: ''
            }
        };

        // Constants
        const TIPURI_SERVICIU = [
            'BranÈ™ament gaz',
            'InstalaÈ›ie gaz',
            'Verificare tehnicÄƒ',
            'Revizie instalaÈ›ie',
            'ReparaÈ›ie urgentÄƒ',
            'MentenanÈ›Äƒ'
        ];

        const ORASE = [
            'RoÈ™iorii de Vede',
            'Alexandria',
            'Turnu MÄƒgurele',
            'Videle',
            'Zimnicea',
            'GÄƒeÈ™ti',
            'Giurgiu'
        ];

        // Utility functions
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type === 'error' ? 'bg-red-500' : 'bg-green-500'}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => notification.classList.add('show'), 100);
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => document.body.removeChild(notification), 300);
            }, 3000);
        }

        function formatDate(dateString) {
            return new Date(dateString).toLocaleDateString('ro-RO');
        }

        function getServiciuStatus(dataExpirare) {
            const azi = new Date();
            const expirare = new Date(dataExpirare);
            const diferentaZile = Math.ceil((expirare - azi) / (1000 * 60 * 60 * 24));
            
            if (diferentaZile < 0) return 'expirat';
            if (diferentaZile <= 30) return 'expira_curand';
            return 'activ';
        }

        function getServiciiActive() {
            return AppState.servicii.filter(s => getServiciuStatus(s.dataExpirare) === 'activ');
        }

        function getServiciiExpiraCurand() {
            return AppState.servicii.filter(s => getServiciuStatus(s.dataExpirare) === 'expira_curand');
        }

        function getServiciiExpirate() {
            return AppState.servicii.filter(s => getServiciuStatus(s.dataExpirare) === 'expirat');
        }

        // Authentication functions
        function handleLogin() {
            const user = AppState.utilizatori.find(u => 
                u.email === AppState.loginData.email && u.password === AppState.loginData.password
            );
            
            if (user) {
                AppState.currentUser = user;
                AppState.isAuthenticated = true;
                AppState.loginData = { email: '', password: '' };
                showNotification(`Bun venit, ${user.nume}!`);
                renderApp();
            } else {
                showNotification('Date de autentificare incorecte!', 'error');
            }
        }

        function handleLogout() {
            AppState.isAuthenticated = false;
            AppState.currentUser = null;
            AppState.activeTab = 'dashboard';
            showNotification('AÈ›i fost deconectat cu succes!');
            renderApp();
        }

        function resetDemoData() {
            if (confirm('Sigur doriÈ›i sÄƒ resetaÈ›i toate datele demo?')) {
                AppState.clients = [];
                AppState.servicii = [];
                AppState.lucrari = [];
                showNotification('Datele demo au fost resetate!');
                renderApp();
            }
        }

        function toggleDarkMode() {
            AppState.isDarkMode = !AppState.isDarkMode;
            document.body.classList.toggle('dark', AppState.isDarkMode);
            renderApp();
        }

        // Client management functions
        function handleClientSubmit() {
            const newClient = {
                id: Date.now(),
                ...AppState.clientForm,
                dataCreare: new Date().toISOString().split('T')[0]
            };

            if (AppState.selectedClient) {
                const index = AppState.clients.findIndex(c => c.id === AppState.selectedClient.id);
                AppState.clients[index] = { ...newClient, id: AppState.selectedClient.id };
                showNotification('Client actualizat cu succes!');
            } else {
                AppState.clients.push(newClient);
                showNotification('Client adÄƒugat cu succes!');
                
                // DacÄƒ are serviciu existent, creeazÄƒ serviciul
                if (AppState.clientForm.areServiciuExistent && AppState.clientForm.tipServiciu && AppState.clientForm.dataEfectuare) {
                    const dataExpirare = new Date(AppState.clientForm.dataEfectuare);
                    dataExpirare.setFullYear(dataExpirare.getFullYear() + 2);
                    
                    const newServiciu = {
                        id: Date.now() + 1,
                        clientId: newClient.id,
                        tipServiciu: AppState.clientForm.tipServiciu,
                        dataEfectuare: AppState.clientForm.dataEfectuare,
                        dataExpirare: dataExpirare.toISOString().split('T')[0],
                        status: 'activ',
                        descriere: `Serviciu ${AppState.clientForm.tipServiciu} existent`
                    };
                    
                    AppState.servicii.push(newServiciu);
                }
            }

            AppState.showClientForm = false;
            AppState.selectedClient = null;
            AppState.clientForm = {
                nume: '',
                prenume: '',
                email: '',
                telefon: '',
                strada: '',
                numar: '',
                bloc: '',
                scara: '',
                apartament: '',
                oras: 'RoÈ™iorii de Vede',
                areServiciuExistent: false,
                tipServiciu: '',
                dataEfectuare: ''
            };
            
            renderApp();
        }

        function deleteClient(clientId) {
            if (confirm('Sigur doriÈ›i sÄƒ È™tergeÈ›i acest client? Se vor È™terge È™i serviciile asociate.')) {
                AppState.clients = AppState.clients.filter(c => c.id !== clientId);
                AppState.servicii = AppState.servicii.filter(s => s.clientId !== clientId);
                AppState.lucrari = AppState.lucrari.filter(l => l.clientId !== clientId);
                showNotification('Client È™ters cu succes!');
                renderApp();
            }
        }

        function finalizareLucrare(lucrareId) {
            const lucrare = AppState.lucrari.find(l => l.id === lucrareId);
            if (!lucrare) return;

            const dataFinalizare = new Date();
            const index = AppState.lucrari.findIndex(l => l.id === lucrareId);
            
            AppState.lucrari[index] = {
                ...lucrare,
                status: 'finalizata',
                dataFinalizare: dataFinalizare.toISOString().split('T')[0],
                oraFinalizare: dataFinalizare.toTimeString().split(' ')[0]
            };

            // CreeazÄƒ serviciu nou automat
            const client = AppState.clients.find(c => c.id === lucrare.clientId);
            const dataExpirare = new Date(dataFinalizare);
            dataExpirare.setFullYear(dataExpirare.getFullYear() + 2);

            const newServiciu = {
                id: Date.now(),
                clientId: lucrare.clientId,
                tipServiciu: lucrare.tipServiciu,
                dataEfectuare: AppState.lucrari[index].dataFinalizare,
                dataExpirare: dataExpirare.toISOString().split('T')[0],
                status: 'activ',
                descriere: lucrare.descriere
            };

            AppState.servicii.push(newServiciu);

            // Simulare trimitere email
            simulareEmailFinalizare(client, AppState.lucrari[index]);
            showNotification('Lucrare finalizatÄƒ cu succes! Email trimis automat.');
            renderApp();
        }

        function simulareEmailFinalizare(client, lucrare) {
            const angajat = AppState.utilizatori.find(u => u.email === lucrare.angajat);
            
            console.log(`
ðŸ“§ EMAIL TRIMIS AUTOMAT LA: office@adinstalgaz.ro

Subiect: [AdInstalGaz] Lucrare FinalizatÄƒ - ${lucrare.tipServiciu} - ${client.nume} ${client.prenume}

BunÄƒ ziua,

O lucrare a fost finalizatÄƒ cu succes:

DETALII LUCRARE:
- Client: ${client.nume} ${client.prenume}
- Telefon: ${client.telefon}
- AdresÄƒ: ${client.strada} ${client.numar}, ${client.bloc}, ${client.scara}, ${client.apartament}, ${client.oras}
- Tip serviciu: ${lucrare.tipServiciu}
- Descriere: ${lucrare.descriere}

EXECUTARE:
- Angajat: ${angajat?.nume || 'N/A'}
- Data finalizare: ${lucrare.dataFinalizare}
- Ora finalizare: ${lucrare.oraFinalizare}
- ObservaÈ›ii: ${lucrare.observatii}

URMÄ‚RIRE SERVICIU:
- UrmÄƒtoarea verificare: ${new Date(new Date(lucrare.dataFinalizare).setFullYear(new Date(lucrare.dataFinalizare).getFullYear() + 2)).toISOString().split('T')[0]} (peste 2 ani)
- Reminder automat: ${new Date(new Date(lucrare.dataFinalizare).setFullYear(new Date(lucrare.dataFinalizare).getFullYear() + 2) - 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]} (cu 7 zile Ã®nainte)

---
Generat automat de AdInstalGaz Management System
Pentru detalii complete, accesaÈ›i aplicaÈ›ia.
            `);
        }

        // Render functions
        function renderLoginForm() {
            return `
                <div class="min-h-screen flex items-center justify-center gradient-bg">
                    <div class="max-w-md w-full mx-4 p-8 rounded-2xl shadow-2xl bg-white glass-effect animate-fade-in">
                        <div class="text-center mb-8">
                            <div class="w-16 h-16 mx-auto mb-4 text-blue-600">
                                <i data-lucide="building-2" class="w-full h-full"></i>
                            </div>
                            <h1 class="text-3xl font-bold text-gray-800">AdInstalGaz</h1>
                            <p class="text-sm mt-2 text-gray-600">Sistem Management</p>
                        </div>

                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium mb-2 text-gray-700">Email</label>
                                <input
                                    type="email"
                                    id="login-email"
                                    value="${AppState.loginData.email}"
                                    class="w-full px-4 py-3 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                    placeholder="exemplu@adinstalgaz.ro"
                                    required
                                />
                            </div>

                            <div>
                                <label class="block text-sm font-medium mb-2 text-gray-700">ParolÄƒ</label>
                                <input
                                    type="password"
                                    id="login-password"
                                    value="${AppState.loginData.password}"
                                    class="w-full px-4 py-3 rounded-lg border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                    placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                                    required
                                />
                            </div>

                            <button
                                onclick="performLogin()"
                                class="w-full py-3 px-4 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-medium rounded-lg transition-all duration-200 transform hover:scale-105 shadow-lg"
                            >
                                Autentificare
                            </button>
                        </div>

                        <div class="mt-6 p-4 rounded-lg bg-gray-50">
                            <p class="text-xs text-gray-600 mb-2">Date demo:</p>
                            <p class="text-xs text-gray-500">
                                Admin: florin.gavrila@adinstalgaz.ro / 123456<br/>
                                LucrÄƒtor: ion@adinstalgaz.ro / 123456
                            </p>
                        </div>

                        <div class="flex justify-center mt-6">
                            <button
                                onclick="toggleDarkMode()"
                                class="p-2 rounded-full bg-gray-200 text-gray-600 hover:scale-110 transition-all"
                            >
                                <i data-lucide="moon" class="w-5 h-5"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderSidebar() {
            const menuItems = [
                { id: 'dashboard', label: 'Dashboard', icon: 'home' },
                { id: 'clienti', label: 'ClienÈ›i', icon: 'users' },
                { id: 'servicii', label: 'Baza Date Servicii', icon: 'database' },
                { id: 'lucrari', label: 'LucrÄƒri', icon: 'briefcase' },
                { id: 'program', label: 'Program Zilnic', icon: 'calendar' },
                { id: 'documente', label: 'Documente', icon: 'file-text' }
            ];

            if (AppState.currentUser?.rol === 'administrator') {
                menuItems.push({ id: 'utilizatori', label: 'Utilizatori', icon: 'settings' });
            }

            return `
                <div class="w-64 h-screen bg-white border-r border-gray-200 flex flex-col">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 text-blue-600">
                                <i data-lucide="building-2" class="w-full h-full"></i>
                            </div>
                            <div>
                                <h1 class="text-lg font-bold text-gray-800">AdInstalGaz</h1>
                                <p class="text-xs text-gray-500">Management System</p>
                            </div>
                        </div>
                    </div>

                    <nav class="flex-1 p-4 space-y-2">
                        ${menuItems.map(item => `
                            <button
                                onclick="setActiveTab('${item.id}')"
                                class="w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-all ${
                                    AppState.activeTab === item.id
                                        ? 'bg-blue-600 text-white shadow-lg'
                                        : 'text-gray-600 hover:bg-gray-100 hover:text-gray-900'
                                }"
                            >
                                <i data-lucide="${item.icon}" class="w-5 h-5"></i>
                                <span class="font-medium">${item.label}</span>
                            </button>
                        `).join('')}
                    </nav>

                    <div class="p-4 border-t border-gray-200">
                        <div class="mb-4 p-3 rounded-lg bg-gray-50">
                            <p class="text-sm font-medium text-gray-800">${AppState.currentUser?.nume}</p>
                            <p class="text-xs text-gray-500 capitalize">${AppState.currentUser?.rol}</p>
                        </div>
                        
                        <div class="space-y-2">
                            <button
                                onclick="toggleDarkMode()"
                                class="w-full flex items-center space-x-3 px-4 py-2 rounded-lg transition-all text-gray-600 hover:bg-gray-100"
                            >
                                <i data-lucide="${AppState.isDarkMode ? 'sun' : 'moon'}" class="w-4 h-4"></i>
                                <span class="text-sm">${AppState.isDarkMode ? 'Light Mode' : 'Dark Mode'}</span>
                            </button>
                            
                            ${AppState.currentUser?.rol === 'administrator' ? `
                                <button
                                    onclick="resetDemoData()"
                                    class="w-full flex items-center space-x-3 px-4 py-2 rounded-lg transition-all text-yellow-600 hover:bg-gray-100"
                                >
                                    <i data-lucide="settings" class="w-4 h-4"></i>
                                    <span class="text-sm">Reset Date Demo</span>
                                </button>
                            ` : ''}
                            
                            <button
                                onclick="handleLogout()"
                                class="w-full flex items-center space-x-3 px-4 py-2 rounded-lg transition-all text-red-600 hover:bg-gray-100"
                            >
                                <i data-lucide="log-out" class="w-4 h-4"></i>
                                <span class="text-sm">Logout</span>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderDashboard() {
            const serviciiExpiraCurand = getServiciiExpiraCurand();
            const serviciiExpirate = getServiciiExpirate();
            const lucrariProgramate = AppState.lucrari.filter(l => l.status === 'programata');
            const lucrariInLucru = AppState.lucrari.filter(l => l.status === 'in_lucru');

            return `
                <div class="space-y-6">
                    <div class="flex justify-between items-center">
                        <h1 class="text-3xl font-bold text-gray-800">Dashboard</h1>
                        <div class="flex space-x-4">
                            <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all flex items-center space-x-2">
                                <i data-lucide="download" class="w-4 h-4"></i>
                                <span>Export Raport</span>
                            </button>
                        </div>
                    </div>

                    <!-- Statistici principale -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="p-6 rounded-xl shadow-lg bg-white card-shadow hover-scale">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Total ClienÈ›i</p>
                                    <p class="text-3xl font-bold text-gray-800">${AppState.clients.length}</p>
                                </div>
                                <i data-lucide="users" class="w-12 h-12 text-blue-500"></i>
                            </div>
                        </div>

                        <div class="p-6 rounded-xl shadow-lg bg-white card-shadow hover-scale">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Servicii Active</p>
                                    <p class="text-3xl font-bold text-gray-800">${getServiciiActive().length}</p>
                                </div>
                                <i data-lucide="check-circle" class="w-12 h-12 text-green-500"></i>
                            </div>
                        </div>

                        <div class="p-6 rounded-xl shadow-lg bg-white card-shadow hover-scale">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">LucrÄƒri Programate</p>
                                    <p class="text-3xl font-bold text-gray-800">${lucrariProgramate.length}</p>
                                </div>
                                <i data-lucide="calendar" class="w-12 h-12 text-orange-500"></i>
                            </div>
                        </div>

                        <div class="p-6 rounded-xl shadow-lg bg-white card-shadow hover-scale">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Servicii ExpirÄƒ CurÃ¢nd</p>
                                    <p class="text-3xl font-bold text-gray-800">${serviciiExpiraCurand.length}</p>
                                </div>
                                <i data-lucide="alert-circle" class="w-12 h-12 text-yellow-500"></i>
                            </div>
                        </div>
                    </div>

                    ${serviciiExpiraCurand.length > 0 || serviciiExpirate.length > 0 ? `
                        <div class="p-6 rounded-xl shadow-lg bg-red-50 border border-red-200">
                            <div class="flex items-center space-x-3 mb-4">
                                <i data-lucide="bell" class="w-6 h-6 text-red-500"></i>
                                <h3 class="text-lg font-semibold text-red-800">NotificÄƒri Urgente</h3>
                            </div>
                            
                            ${serviciiExpirate.length > 0 ? `
                                <div class="mb-4">
                                    <h4 class="font-medium mb-2 text-red-700">Servicii Expirate (${serviciiExpirate.length})</h4>
                                    <div class="space-y-2">
                                        ${serviciiExpirate.slice(0, 3).map(serviciu => {
                                            const client = AppState.clients.find(c => c.id === serviciu.clientId);
                                            return `
                                                <div class="p-3 rounded-lg bg-red-100">
                                                    <p class="font-medium text-red-800">
                                                        ${client?.nume} ${client?.prenume} - ${serviciu.tipServiciu}
                                                    </p>
                                                    <p class="text-sm text-red-600">
                                                        Expirat la: ${serviciu.dataExpirare}
                                                    </p>
                                                </div>
                                            `;
                                        }).join('')}
                                    </div>
                                </div>
                            ` : ''}

                            ${serviciiExpiraCurand.length > 0 ? `
                                <div>
                                    <h4 class="font-medium mb-2 text-yellow-700">Servicii ce ExpirÄƒ Ã®n 30 zile (${serviciiExpiraCurand.length})</h4>
                                    <div class="space-y-2">
                                        ${serviciiExpiraCurand.slice(0, 3).map(serviciu => {
                                            const client = AppState.clients.find(c => c.id === serviciu.clientId);
                                            return `
                                                <div class="p-3 rounded-lg bg-yellow-100">
                                                    <p class="font-medium text-yellow-800">
                                                        ${client?.nume} ${client?.prenume} - ${serviciu.tipServiciu}
                                                    </p>
                                                    <p class="text-sm text-yellow-600">
                                                        ExpirÄƒ la: ${serviciu.dataExpirare}
                                                    </p>
                                                </div>
                                            `;
                                        }).join('')}
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                    ` : ''}

                    <!-- LucrÄƒri Ã®n progres -->
                    <div class="p-6 rounded-xl shadow-lg bg-white">
                        <h3 class="text-lg font-semibold mb-4 text-gray-800">LucrÄƒri Ã®n Progres</h3>
                        
                        ${lucrariInLucru.length === 0 ? `
                            <p class="text-sm text-gray-600">Nu existÄƒ lucrÄƒri Ã®n progres</p>
                        ` : `
                            <div class="space-y-3">
                                ${lucrariInLucru.map(lucrare => {
                                    const client = AppState.clients.find(c => c.id === lucrare.clientId);
                                    const angajat = AppState.utilizatori.find(u => u.email === lucrare.angajat);
                                    
                                    return `
                                        <div class="p-4 rounded-lg border bg-gray-50 border-gray-200">
                                            <div class="flex justify-between items-start">
                                                <div>
                                                    <h4 class="font-medium text-gray-800">
                                                        ${client?.nume} ${client?.prenume} - ${lucrare.tipServiciu}
                                                    </h4>
                                                    <p class="text-sm text-gray-600">
                                                        Angajat: ${angajat?.nume || 'N/A'}
                                                    </p>
                                                    <p class="text-sm text-gray-600">
                                                        ProgramatÄƒ: ${lucrare.dataProgramata}
                                                    </p>
                                                </div>
                                                <span class="px-3 py-1 text-xs font-medium bg-orange-100 text-orange-800 rounded-full">
                                                    ÃŽn lucru
                                                </span>
                                            </div>
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        `}
                    </div>
                </div>
            `;
        }

        function renderClientiTab() {
            return `
                <div class="space-y-6">
                    <div class="flex justify-between items-center">
                        <h1 class="text-3xl font-bold text-gray-800">ClienÈ›i</h1>
                        <button
                            onclick="showClientForm()"
                            class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all flex items-center space-x-2"
                        >
                            <i data-lucide="plus" class="w-4 h-4"></i>
                            <span>Client Nou</span>
                        </button>
                    </div>

                    <!-- Lista clienÈ›i -->
                    <div class="grid gap-4">
                        ${AppState.clients.length === 0 ? `
                            <div class="text-center py-12 text-gray-600">
                                Nu existÄƒ clienÈ›i Ã®nregistraÈ›i.
                            </div>
                        ` : AppState.clients.map(client => {
                            const clientServicii = AppState.servicii.filter(s => s.clientId === client.id);
                            const serviciiActive = clientServicii.filter(s => getServiciuStatus(s.dataExpirare) === 'activ');
                            const serviciiExpirate = clientServicii.filter(s => getServiciuStatus(s.dataExpirare) === 'expirat');
                            
                            return `
                                <div class="p-6 rounded-xl shadow-lg bg-white card-shadow hover-scale">
                                    <div class="flex justify-between items-start">
                                        <div class="flex-1">
                                            <div class="flex items-center space-x-4 mb-4">
                                                <div>
                                                    <h3 class="text-xl font-semibold text-gray-800">
                                                        ${client.nume} ${client.prenume}
                                                    </h3>
                                                    <p class="text-sm text-gray-600">
                                                        Client din ${formatDate(client.dataCreare)}
                                                    </p>
                                                </div>
                                                
                                                <div class="flex space-x-2">
                                                    ${serviciiActive.length > 0 ? `
                                                        <span class="px-3 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">
                                                            ${serviciiActive.length} servicii active
                                                        </span>
                                                    ` : ''}
                                                    ${serviciiExpirate.length > 0 ? `
                                                        <span class="px-3 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full">
                                                            ${serviciiExpirate.length} expirate
                                                        </span>
                                                    ` : ''}
                                                </div>
                                            </div>

                                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                                <div class="flex items-center space-x-2">
                                                    <i data-lucide="phone" class="w-4 h-4 text-gray-400"></i>
                                                    <span class="text-sm text-gray-600">${client.telefon}</span>
                                                </div>
                                                
                                                <div class="flex items-center space-x-2">
                                                    <i data-lucide="mail" class="w-4 h-4 text-gray-400"></i>
                                                    <span class="text-sm text-gray-600">${client.email}</span>
                                                </div>
                                                
                                                <div class="flex items-center space-x-2">
                                                    <i data-lucide="map-pin" class="w-4 h-4 text-gray-400"></i>
                                                    <span class="text-sm text-gray-600">
                                                        ${client.strada} ${client.numar}, ${client.oras}
                                                    </span>
                                                </div>
                                            </div>

                                            ${clientServicii.length > 0 ? `
                                                <div class="mt-4">
                                                    <h4 class="text-sm font-medium mb-2 text-gray-700">Servicii:</h4>
                                                    <div class="space-y-2">
                                                        ${clientServicii.slice(0, 2).map(serviciu => `
                                                            <div class="p-3 rounded-lg bg-gray-50">
                                                                <div class="flex justify-between items-center">
                                                                    <span class="text-sm font-medium text-gray-800">
                                                                        ${serviciu.tipServiciu}
                                                                    </span>
                                                                    <span class="text-xs px-2 py-1 rounded-full ${
                                                                        getServiciuStatus(serviciu.dataExpirare) === 'activ' 
                                                                            ? 'bg-green-100 text-green-800'
                                                                            : getServiciuStatus(serviciu.dataExpirare) === 'expira_curand'
                                                                            ? 'bg-yellow-100 text-yellow-800'
                                                                            : 'bg-red-100 text-red-800'
                                                                    }">
                                                                        ExpirÄƒ: ${serviciu.dataExpirare}
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        `).join('')}
                                                        ${clientServicii.length > 2 ? `
                                                            <p class="text-xs text-gray-500">
                                                                +${clientServicii.length - 2} servicii suplimentare
                                                            </p>
                                                        ` : ''}
                                                    </div>
                                                </div>
                                            ` : ''}
                                        </div>

                                        <div class="flex flex-col space-y-2">
                                            <button
                                                onclick="editClient(${client.id})"
                                                class="p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-all"
                                            >
                                                <i data-lucide="edit" class="w-4 h-4"></i>
                                            </button>
                                            
                                            <button
                                                onclick="setActiveTab('servicii')"
                                                class="p-2 text-green-600 hover:bg-green-100 rounded-lg transition-all"
                                            >
                                                <i data-lucide="eye" class="w-4 h-4"></i>
                                            </button>
                                            
                                            <button
                                                onclick="deleteClient(${client.id})"
                                                class="p-2 text-red-600 hover:bg-red-100 rounded-lg transition-all"
                                            >
                                                <i data-lucide="trash-2" class="w-4 h-4"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;
        }

        function renderMainContent() {
            switch (AppState.activeTab) {
                case 'dashboard':
                    return renderDashboard();
                case 'clienti':
                    return renderClientiTab();
                case 'servicii':
                    return '<div class="p-8 text-center"><h2 class="text-2xl font-bold">Servicii - ÃŽn dezvoltare</h2></div>';
                case 'lucrari':
                    return '<div class="p-8 text-center"><h2 class="text-2xl font-bold">LucrÄƒri - ÃŽn dezvoltare</h2></div>';
                case 'program':
                    return '<div class="p-8 text-center"><h2 class="text-2xl font-bold">Program Zilnic - ÃŽn dezvoltare</h2></div>';
                case 'documente':
                    return '<div class="p-8 text-center"><h2 class="text-2xl font-bold">Documente - ÃŽn dezvoltare</h2></div>';
                case 'utilizatori':
                    return AppState.currentUser?.rol === 'administrator' 
                        ? '<div class="p-8 text-center"><h2 class="text-2xl font-bold">Utilizatori - ÃŽn dezvoltare</h2></div>' 
                        : renderDashboard();
                default:
                    return renderDashboard();
            }
        }

        function renderApp() {
            const app = document.getElementById('app');
            
            if (!AppState.isAuthenticated) {
                app.innerHTML = renderLoginForm();
            } else {
                app.innerHTML = `
                    <div class="min-h-screen bg-gray-50">
                        <div class="flex">
                            ${renderSidebar()}
                            <main class="flex-1 overflow-auto">
                                <div class="p-6">
                                    ${renderMainContent()}
                                </div>
                            </main>
                        </div>
                    </div>
                `;
            }

            // Initialize Lucide icons
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }

        // Event handlers
        function performLogin() {
            AppState.loginData.email = document.getElementById('login-email').value;
            AppState.loginData.password = document.getElementById('login-password').value;
            handleLogin();
        }

        function setActiveTab(tab) {
            AppState.activeTab = tab;
            renderApp();
        }

        function showClientForm() {
            AppState.showClientForm = true;
            AppState.selectedClient = null;
            AppState.clientForm = {
                nume: '',
                prenume: '',
                email: '',
                telefon: '',
                strada: '',
                numar: '',
                bloc: '',
                scara: '',
                apartament: '',
                oras: 'RoÈ™iorii de Vede',
                areServiciuExistent: false,
                tipServiciu: '',
                dataEfectuare: ''
            };
            // Aici ar trebui sÄƒ afiÈ™ezi modal-ul pentru formular
            showNotification('FuncÈ›ia de adÄƒugare client va fi implementatÄƒ Ã®n curÃ¢nd!');
        }

        function editClient(clientId) {
            const client = AppState.clients.find(c => c.id === clientId);
            if (client) {
                AppState.selectedClient = client;
                AppState.clientForm = { ...client };
                AppState.showClientForm = true;
                // Aici ar trebui sÄƒ afiÈ™ezi modal-ul pentru editare
                showNotification('FuncÈ›ia de editare client va fi implementatÄƒ Ã®n curÃ¢nd!');
            }
        }

        // Event listeners
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !AppState.isAuthenticated) {
                performLogin();
            }
        });

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            renderApp();
        });

        // Auto-update every 30 seconds
        setInterval(() => {
            if (AppState.isAuthenticated) {
                renderApp();
            }
        }, 30000);
    </script>
</body>
</html>
